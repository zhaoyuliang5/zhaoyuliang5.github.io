<!DOCTYPE html>
<html>
<head>
  <meta name="baidu-site-verification" content="Dkj5iFgW7b" />
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <link rel="dns-prefetch" href="http://yoursite.com">
  <title>Milhouse</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="热爱美食的小小码农">
<meta property="og:type" content="website">
<meta property="og:title" content="Milhouse">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Milhouse">
<meta property="og:description" content="热爱美食的小小码农">
<meta property="og:locale" content="zh_TW">
<meta property="article:author" content="赵宇亮">
<meta property="article:tag" content="美食">
<meta property="article:tag" content="计算机视觉">
<meta property="article:tag" content="电子">
<meta name="twitter:card" content="summary">
  
    <link rel="alternative" href="/atom.xml" title="Milhouse" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" type="text/css" href="/./main.0cf68a.css">
  <style type="text/css">
  
    #container.show {
      background: linear-gradient(200deg,#a0cfe4,#e8c37e);
    }
  </style>
  

  

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <div id="container" q-class="show:isCtnShow">
    <canvas id="anm-canvas" class="anm-canvas"></canvas>
    <div class="left-col" q-class="show:isShow">
      
<div class="overlay" style="background: #4d4d4d"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img src="https://pic2.zhimg.com/80/v2-e48a599513d542d002a0dcd9afc46532_720w.jpg" class="js-avatar">
		</a>
		<hgroup>
		  <h1 class="header-author"><a href="/">赵宇亮</a></h1>
		</hgroup>
		
		<p class="header-subtitle">一往无前虎山行， 拨开云雾见光明 梦里花开牡丹亭，幻想成真歌舞升平</p>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">主页</a></li>
	        
				<li><a href="/tags/%E9%9A%8F%E7%AC%94/">随笔</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
    		
    			
    			<a q-on="click: openSlider(e, 'innerArchive')" href="javascript:void(0)">所有文章</a>
    			
            
    			
    			<a q-on="click: openSlider(e, 'friends')" href="javascript:void(0)">友链</a>
    			
            
    			
    			<a q-on="click: openSlider(e, 'aboutme')" href="javascript:void(0)">关于我</a>
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="https://github.com/zhaoyuliang5" title="github"><i class="icon-github"></i></a>
		        
					<a class="weibo" target="_blank" href="#" title="weibo"><i class="icon-weibo"></i></a>
		        
					<a class="rss" target="_blank" href="#" title="rss"><i class="icon-rss"></i></a>
		        
					<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/zhao-yu-liang-44" title="zhihu"><i class="icon-zhihu"></i></a>
		        
					<a class="qq" target="_blank" href="#" title="qq"><i class="icon-qq"></i></a>
		        
					<a class="weixin" target="_blank" href="#" title="weixin"><i class="icon-weixin"></i></a>
		        
					<a class="mail" target="_blank" href="#" title="mail"><i class="icon-mail"></i></a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col" q-class="show:isShow,hide:isShow|isFalse">
      
<nav id="mobile-nav">
  	<div class="overlay js-overlay" style="background: #4d4d4d"></div>
	<div class="btnctn js-mobile-btnctn">
  		<div class="slider-trigger list" q-on="click: openSlider(e)"><i class="icon icon-sort"></i></div>
	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src="https://pic2.zhimg.com/80/v2-e48a599513d542d002a0dcd9afc46532_720w.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author js-header-author">赵宇亮</h1>
			</hgroup>
			
			<p class="header-subtitle"><i class="icon icon-quo-left"></i>一往无前虎山行， 拨开云雾见光明 梦里花开牡丹亭，幻想成真歌舞升平<i class="icon icon-quo-right"></i></p>
			
			
			
				
			
				
			
			
			
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/zhaoyuliang5" title="github"><i class="icon-github"></i></a>
			        
						<a class="weibo" target="_blank" href="#" title="weibo"><i class="icon-weibo"></i></a>
			        
						<a class="rss" target="_blank" href="#" title="rss"><i class="icon-rss"></i></a>
			        
						<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/zhao-yu-liang-44" title="zhihu"><i class="icon-zhihu"></i></a>
			        
						<a class="qq" target="_blank" href="#" title="qq"><i class="icon-qq"></i></a>
			        
						<a class="weixin" target="_blank" href="#" title="weixin"><i class="icon-weixin"></i></a>
			        
						<a class="mail" target="_blank" href="#" title="mail"><i class="icon-mail"></i></a>
			        
				</div>
			</nav>

			<nav class="header-menu js-header-menu">
				<ul style="width: 50%">
				
				
					<li style="width: 50%"><a href="/">主页</a></li>
		        
					<li style="width: 50%"><a href="/tags/%E9%9A%8F%E7%AC%94/">随笔</a></li>
		        
				</ul>
			</nav>
		</header>				
	</div>
	<div class="mobile-mask" style="display:none" q-show="isShow"></div>
</nav>

      <div id="wrapper" class="body-wrap">
        <div class="menu-l">
          <div class="canvas-wrap">
            <canvas data-colors="#eaeaea" data-sectionHeight="100" data-contentId="js-content" id="myCanvas1" class="anm-canvas"></canvas>
          </div>
          <div id="js-content" class="content-ll">
            
  
    <article id="post-大城小馆(一)" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/%E5%A4%A7%E5%9F%8E%E5%B0%8F%E9%A6%86(%E4%B8%80)/">大城小馆(一)</a>
    </h1>
  

        
        <a href="/%E5%A4%A7%E5%9F%8E%E5%B0%8F%E9%A6%86(%E4%B8%80)/" class="archive-article-date">
  	<time datetime="2022-08-30T11:29:54.797Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2022-08-30</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <hr>
<blockquote>
<p>北京是一个多元化的大城市，也是极具包容性的城市，每天都有来自不同城市的打工人生活亦或生存。对于我来说，唯有美食才能慰藉疲惫心灵，找到些许异在他乡的安慰。</p>
<h2 id="八条一号餐厅"><a href="#八条一号餐厅" class="headerlink" title="八条一号餐厅"></a>八条一号餐厅</h2><p><img src="/%E5%A4%A7%E5%9F%8E%E5%B0%8F%E9%A6%86(%E4%B8%80)/Hy7MCkVz9JUzM566_W4zBiFFH5_i1ewZhJ1jxigqjVz9zptUkFl9MQJGnSN_8gMOjoJrvItByyS4HHaWdXyO_I7F0UeCRQYMHlogzbt7GHgNNiIYVnHvzugZCuBITtvjski7YaLlHpkrQUr5euoQrg.jpg" alt="image"><br>这是一家隐蔽在胡同里的小馆子，店面不大，集合了云南菜和北京菜的特色，店内外布满了绿植，顾客也都是胡同周边的人，菜品风味独特，价格平民，总之富有烟火气。该菜馆也是受到陈晓卿先生、蔡澜先生所青睐，我也去了不下十次。</p>
<ul>
<li>金亚小炒<br><img src="/%E5%A4%A7%E5%9F%8E%E5%B0%8F%E9%A6%86(%E4%B8%80)/1Q2kYMJYy-pZ4TNraikvRpA0CHAgVTrOpLXenC9udfjU3SC5nxN0XdtGwXSP-AT1joJrvItByyS4HHaWdXyO_I7F0UeCRQYMHlogzbt7GHgNNiIYVnHvzugZCuBITtvjski7YaLlHpkrQUr5euoQrg.jpg" alt="image"><br>餐厅老板叫张金亚，故名思意，这道菜就是他发明的，也是该店的必点菜。金亚小炒主要有鸡腿肉、大虾、腰果、灯笼椒等组成，这道菜味道酸甜咸鲜，口感焦酥，肉质汁水丰富。无论味道还是口感都是一级棒，调汁恰到好处，尤其是酸甜的比例，出锅酸味直通鼻腔，但吃起来酸甜刚好合适，甜度多一分则腻，酸度多一份则冲，具备菜品风味的同时，保留了食材的本味，非常值得推荐！分为精品版和普通版，区别在于普通版使用花生，精品版使用腰果，第一次建议精品版。</li>
<li>烙饼卷肘子<br><img src="/%E5%A4%A7%E5%9F%8E%E5%B0%8F%E9%A6%86(%E4%B8%80)/0WF-HMW6-9KWquMaQTn4_bpTavbE76SYa7_QTdHYfW3BEsfCGQirJpwXRyncBMGKjoJrvItByyS4HHaWdXyO_I7F0UeCRQYMHlogzbt7GHgNNiIYVnHvzugZCuBITtvjski7YaLlHpkrQUr5euoQrg.jpg" alt="image"><br>一道热量爆炸的菜！我是一个大饼卷肉的忠实粉丝，这道菜也是他家招牌菜，肘子软烂咸香，菜码丰富多样，烙饼酥香酥脆。一角饼劈开，加两片肥瘦相间的大肉片儿，再加入香椿苗、黄瓜条、葱丝萝卜丝啥的。大口张开，一口咬下去，满口流油，用郭德纲的段子形容，大口吃这个，旁边枪击你爸爸，你都不带心疼的。。。</li>
<li>昆明煎土豆<br><img src="/%E5%A4%A7%E5%9F%8E%E5%B0%8F%E9%A6%86(%E4%B8%80)/-hzk0KUXmWFQDeT0nnUnHgLMac4sSqSZKl9ljRIXVBPxUAcAPtM-bOgDTXUigYJQjoJrvItByyS4HHaWdXyO_I7F0UeCRQYMHlogzbt7GHgNNiIYVnHvzugZCuBITtvjski7YaLlHpkrQUr5euoQrg.jpg" alt="image"><br>昆明煎土豆是云南特色小吃，这道菜焦香酥脆，土豆块大小均匀，看起来金黄金黄的，口感非常棒，表皮酥脆，里面软软绵绵的，烹饪的方式是先炸后炒，出锅之后撒了一点辣椒面调味，值得一试，吃多了会略显油腻。</li>
<li>风味油豆腐丝<br><img src="/%E5%A4%A7%E5%9F%8E%E5%B0%8F%E9%A6%86(%E4%B8%80)/v5nJkNdJQNo8O9C8cOkcC8_jlvW93CEXhFBUkNlS-yRW4zcMmE86gACFY5irlB1CjoJrvItByyS4HHaWdXyO_I7F0UeCRQYMHlogzbt7GHgNNiIYVnHvzugZCuBITtvjski7YaLlHpkrQUr5euoQrg.jpg" alt="image"><br>算是这家的隐藏菜，在菜单不起眼的位置，价格便宜，第一次去这个家店就点了，很出乎意料的一道菜，要是就着大米粥吃，我能吃三碗。咸鲜口，酱味浓郁，也很适合和朋友下酒聊天。</li>
<li>红酒煎猪肝<br><img src="/%E5%A4%A7%E5%9F%8E%E5%B0%8F%E9%A6%86(%E4%B8%80)/NjIMrOa92cPW_6HI5br-1dTXe1n6KE-RDIhU9xXXw-NYSwWp787JWsI2aFeJAkNMjoJrvItByyS4HHaWdXyO_I7F0UeCRQYMHlogzbt7GHgNNiIYVnHvzugZCuBITtvjski7YaLlHpkrQUr5euoQrg.jpg" alt="image"><br>猪肝做的火候特别嫩，吃起来无脏器味，一点也不像猪肝，浓油赤酱，略有果味，挺惊艳的一道菜，这也算是我目前吃过最好吃的猪肝做的菜。</li>
</ul>
</blockquote>
<p><strong>地址：北京市西城区西四北八条1号</strong></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/%E5%A4%A7%E5%9F%8E%E5%B0%8F%E9%A6%86(%E4%B8%80)/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-大城小馆(二)" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/%E5%A4%A7%E5%9F%8E%E5%B0%8F%E9%A6%86(%E4%BA%8C)/">大城小馆(二)</a>
    </h1>
  

        
        <a href="/%E5%A4%A7%E5%9F%8E%E5%B0%8F%E9%A6%86(%E4%BA%8C)/" class="archive-article-date">
  	<time datetime="2022-08-30T11:29:41.885Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2022-08-30</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <hr>
<h2 id="东江人家客家菜"><a href="#东江人家客家菜" class="headerlink" title="东江人家客家菜"></a>东江人家客家菜</h2><p><img src="/%E5%A4%A7%E5%9F%8E%E5%B0%8F%E9%A6%86(%E4%BA%8C)/505f29bfce05b52b0b9a4f7ef3839ebb.jpeg" alt="image"></p>
<blockquote>
<p>第一次知道这家店的时候是我在2019年的初夏，我刚来北京不久。某天，和远道而来的朋友临时约了我们俩中间的位置，在惠新西街南口吃饭，出了地铁C口，也不知道吃什么，一直向前走，过了不久，见到一个饭馆门口聚集了很多人等位置。抬头一看，很朴素的招牌——东江人家，店外窗口排了一条长龙，在等刚出炉的烧鹅，吊在窗前，外皮油亮油亮的，肉汁滴答滴答向下落。看到这阵势，就有想吃的冲动，于是就叫了号。一看单子，店面不大，还要等7桌，考虑到朋友离得不近，就找了附近的店，简单的吃了点火锅。但这个馆子深深扎进我的心里，下次一定要试试，过了差不多一个月我就再次来了。。。</p>
<ul>
<li>惠州烧鹅<br><img src="/%E5%A4%A7%E5%9F%8E%E5%B0%8F%E9%A6%86(%E4%BA%8C)/b5OSnD93b72QPExox7p4smtB9uoev1WsSb-MioKKFPeOIamtgn9yOgxm7XNDABlujoJrvItByyS4HHaWdXyO_I7F0UeCRQYMHlogzbt7GHgNNiIYVnHvzugZCuBITtvjski7YaLlHpkrQUr5euoQrg.jpg" alt="image"><br>他家招牌菜，每桌必点，六两起售，外皮油光四射，晶莹透亮，犹如琥珀一般。大刀快斩，肉汁流淌，香气扑鼻。夹起一块，深深的沾满特制的梅子酱，放入口中咀嚼，外皮的焦酥，鹅肉的咸香，在青梅味道衬托下，能感到一丝清香，看似油腻的菜，但大口大口的吃根本停不下来。</li>
<li>腊味煲仔饭<br><img src="/%E5%A4%A7%E5%9F%8E%E5%B0%8F%E9%A6%86(%E4%BA%8C)/5mNujXcp9HbQHUFZTOR4mdmi0tjlT_E0-PoHh5TrW5LNRkPF4P-002uboxXAK6aSjoJrvItByyS4HHaWdXyO_I7F0UeCRQYMHlogzbt7GHgNNiIYVnHvzugZCuBITtvjski7YaLlHpkrQUr5euoQrg.jpg" alt="image"><br>一份优秀的煲仔饭，一定要具备三点，料好、汁浓、锅巴。这家煲仔饭算是完全达到了，米选用广东丝苗米，米粒细长，无腹、心白，透明晶莹，素有中国米中之王称号。煲饭完成，保证只有最外层的米粒成了饭焦，薄薄一层，只有一粒米的厚度，呈金黄色泽，而非焦黑深黄，焦而不糊，非常考验火候。在腊肠、腊肉上浇上浓浓的特制酱汁，用勺子由底向上翻拌，满屋飘香。一勺送到嘴了，感受的直通天灵盖的美味。</li>
<li>甜酸咕咾肉<br><img src="/%E5%A4%A7%E5%9F%8E%E5%B0%8F%E9%A6%86(%E4%BA%8C)/EIdTc5SLD3rAzC0AAaRfUP7kVpdueKGqA8U5fcpWC32Rt2ywKl9zrZgEwd3YLHTYjoJrvItByyS4HHaWdXyO_I7F0UeCRQYMHlogzbt7GHgNNiIYVnHvzugZCuBITtvjski7YaLlHpkrQUr5euoQrg.jpg" alt="image"><br>很正宗的做法，以往我吃过都算是咕咾肉中异类，他家选用排骨肉作为主料，上生粉偏厚，保证炸制过程中，外皮酥脆，但肉汁饱满。一口下去，肉汁混合着甜酸汁，幸福感爆棚。</li>
<li>干炒牛河<br><img src="/%E5%A4%A7%E5%9F%8E%E5%B0%8F%E9%A6%86(%E4%BA%8C)/ARVS-jR1tnHwZBZhBl7pDbHrC_aPNGm3aI0wvpC3gtF26OumLF9IdO_66h-v18-5joJrvItByyS4HHaWdXyO_I7F0UeCRQYMHlogzbt7GHgNNiIYVnHvzugZCuBITtvjski7YaLlHpkrQUr5euoQrg.jpg" alt="image"><br>非常考验粤菜基本功的一道菜。他家干炒牛河色泽油润亮泽、牛肉滑嫩焦香、河粉爽滑筋道、盘中干爽无汁。这菜一定要刚出锅，趁着有锅气吃，凉了味道会大大折扣。</li>
<li>生啫芥兰<br><img src="/%E5%A4%A7%E5%9F%8E%E5%B0%8F%E9%A6%86(%E4%BA%8C)/I9vv4xmqumPQ3kd3TwiCELKzzWT-He22AXn9G95wgH-7i7vV9ObJPOsO43b14yI-joJrvItByyS4HHaWdXyO_I7F0UeCRQYMHlogzbt7GHgNNiIYVnHvzugZCuBITtvjski7YaLlHpkrQUr5euoQrg.jpg" alt="image"><br>芥兰是广东特有的蔬菜，颜色翠绿，清脆爽口。但对于我一个肉食主义者，清炒有些寡淡，只有配上油脂浓浓的土猪肉，砂锅生啫的做法才适合我。盖上盖子，这么一焖，芥兰混合的土猪肉的香气，不来两碗米饭都对不起这道菜。</li>
</ul>
</blockquote>
<p><strong>地址：北京市朝阳区北土城东路元大都遗址公园6号</strong></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/%E5%A4%A7%E5%9F%8E%E5%B0%8F%E9%A6%86(%E4%BA%8C)/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-ResNet算法解读" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/ResNet%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/">ResNet算法解读</a>
    </h1>
  

        
        <a href="/ResNet%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/" class="archive-article-date">
  	<time datetime="2021-09-02T05:16:42.754Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2021-09-02</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>深度残差网络（Deep residual network,ResNet）的提出是CNN图像史上的一件里程碑事件，让我们先看一下ResNet在ILSVRC和COCO 2015上的战绩：</p>
<p><img src="/ResNet%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/v2-5e98ec97def099a4e6fb6b7ce3b1d460_b.jpg" alt><br>图1 ResNet在ILSVRC和COCO 2015上的战绩</p>
<p>ResNet取得了5项第一，并又一次刷新了CNN模型在ImageNet上的历史：</p>
<p><img src="/ResNet%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/v2-606573bdaaa97de6b8b10fb00f76d29a_b.jpg" alt><br>图2 ImageNet分类Top-5误差</p>
<p>ResNet的作者 <a href="https://link.zhihu.com/?target=http%3A//kaiminghe.com/"> 何凯明 </a>也因此摘得CVPR2016最佳论文奖，当然何博士的成就远不止于此，感兴趣的可以去搜一下他后来的辉煌战绩。那么ResNet为什么会有如此优异的表现呢？其实ResNet是解决了深度CNN模型难训练的问题，从图2中可以看到14年的VGG才19层，而15年的ResNet多达152层，这在网络深度完全不是一个量级上，所以如果是第一眼看这个图的话，肯定会觉得ResNet是靠深度取胜。事实当然是这样，但是ResNet还有架构上的trick，这才使得网络的深度发挥出作用，这个trick就是残差学（Residual learning）。下面详细讲述ResNet的理论及实现。</p>
<h2 id="深度网络的退化问题"><a href="#深度网络的退化问题" class="headerlink" title="深度网络的退化问题"></a>深度网络的退化问题</h2><p>从经验来看，网络的深度对模型的性能至关重要，当增加网络层数后，网络可以进行更加复杂的特征模式的提取，所以当模型更深时理论上可以取得更好的结果，从图2中也可以看出网络越深而效果越好的一个实践证据。但是更深的网络其性能一定会更好吗？实验发现深度网络出现了退化问题（Degradation problem）：网络深度增加时，网络准确度出现饱和，甚至出现下降。这个现象可以在图3中直观看出来：56层的网络比20层网络效果还要差。这不会是过拟合问题，因为56层网络的训练误差同样高。我们知道深层网络存在着梯度消失或者爆炸的问题，这使得深度学习模型很难训练。但是现在已经存在一些技术手段如BatchNorm来缓解这个问题。因此，出现深度网络的退化问题是非常令人诧异的。</p>
<p><img src="/ResNet%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/v2-dcf5688dad675cbe8fb8be243af5e1fd_b.jpg" alt><br>图3 20层与56层网络在CIFAR-10上的误差</p>
<h2 id="残差学习"><a href="#残差学习" class="headerlink" title="残差学习"></a>残差学习</h2><p>深度网络的退化问题至少说明深度网络不容易训练。但是我们考虑这样一个事实：现在你有一个浅层网络，你想通过向上堆积新层来建立深层网络，一个极端情况是这些增加的层什么也不学习，仅仅复制浅层网络的特征，即这样新层是恒等映射（Identitymapping）。在这种情况下，深层网络应该至少和浅层网络性能一样，也不应该出现退化现象。好吧，你不得不承认肯定是目前的训练方法有问题，才使得深层网络很难去找到一个好的参数。</p>
<p>这个有趣的假设让何博士灵感爆发，他提出了残差学习来解决退化问题。对于一个堆积层结构（几层堆积而成）当输入为  $\displaystyle x$  时其学习到的特征记为  $\displaystyle H(x)$  ，现在我们希望其可以学习到残差 $\displaystyle  F(x)=H(x)-x$，这样其实原始的学习特征是  $\displaystyle F(x)+x$ 。之所以这样是因为残差学习相比原始特征直接学习更容易。当残差为0时，此时堆积层仅仅做了恒等映射，至少网络性能不会下降，实际上残差不会为0，这也会使得堆积层在输入特征基础上学习到新的特征，从而拥有更好的性能。残差学习的结构如图4所示。这有点类似与电路中的“短路”，所以是一种短路连接（shortcut connection）。</p>
<p><img src="/ResNet%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/v2-252e6d9979a2a91c2d3033b9b73eb69f_b.jpg" alt><br>图4 残差学习单元<br>为什么残差学习相对更容易，从直观上看残差学习需要学习的内容少，因为残差一般会比较小，学习难度小点。不过我们可以从数学的角度来分析这个问题，首先残差单元可以表示为：</p>
<p><img src="/ResNet%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/1111.png" alt></p>
<p>其中  $\displaystyle x_{l}$  和  $\displaystyle x_{l+1}$  分别表示的是第  $\displaystyle l$  个残差单元的输入和输出，注意每个残差单元一般包含多层结构。  $\displaystyle F$  是残差函数，表示学习到的残差，而$\displaystyle h(x_{l})=x_{l}$  表示恒等映射，  $\displaystyle f$ 是ReLU激活函数。基于上式，我们求得从浅层  $\displaystyle l$  到深层  $\displaystyle L$  的学习特征为：</p>
<p><img src="/ResNet%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/2222.png" alt></p>
<p>利用链式规则，可以求得反向过程的梯度：</p>
<p><img src="/ResNet%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/3333.png" alt></p>
<p>式子的第一个因子表示的损失函数到达 $\displaystyle L$ 的梯度，小括号中的1表明短路机制可以无损地传播梯度，而另外一项残差梯度则需要经过带weights的层，梯度不是直接传递过来的。残差梯度不会那么巧全为-1，而且就算其比较小，有1的存在也不会导致梯度消失。所以残差学习会更容易。要注意上面的推导并不是严格的证明。</p>
<h2 id="ResNet的网络结构"><a href="#ResNet的网络结构" class="headerlink" title="ResNet的网络结构"></a>ResNet的网络结构</h2><p>ResNet网络是参考了VGG19网络，在其基础上进行了修改，并通过短路机制加入了残差单元，如图5所示。变化主要体现在ResNet直接使用stride=2的卷积做下采样，并且用global average pool层替换了全连接层。ResNet的一个重要设计原则是：当feature map大小降低一半时，feature map的数量增加一倍，这保持了网络层的复杂度。从图5中可以看到，ResNet相比普通网络每两层间增加了短路机制，这就形成了残差学习，其中虚线表示feature map数量发生了改变。图5展示的34-layer的ResNet，还可以构建更深的网络如表1所示。从表中可以看到，对于18-layer和34-layer的ResNet，其进行的两层间的残差学习，当网络更深时，其进行的是三层间的残差学习，三层卷积核分别是1x1，3x3和1x1，一个值得注意的是隐含层的feature map数量是比较小的，并且是输出feature map数量的1/4。</p>
<p><img src="/ResNet%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/v2-7cb9c03871ab1faa7ca23199ac403bd9_b.jpg" alt><br>图5 ResNet网络结构图<br><img src="/ResNet%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/v2-1dfd4022d4be28392ff44c49d6b4ed94_b.jpg" alt><br>表1 不同深度的ResNet</p>
<p>下面我们再分析一下残差单元，ResNet使用两种残差单元，如图6所示。左图对应的是浅层网络，而右图对应的是深层网络。对于短路连接，当输入和输出维度一致时，可以直接将输入加到输出上。但是当维度不一致时（对应的是维度增加一倍），这就不能直接相加。有两种策略：（1）采用zero-padding增加维度，此时一般要先做一个downsamp，可以采用strde=2的pooling，这样不会增加参数；（2）采用新的映射（projection shortcut），一般采用1x1的卷积，这样会增加参数，也会增加计算量。短路连接除了直接使用恒等映射，当然都可以采用projection shortcut。</p>
<p><img src="/ResNet%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/v2-0892e5423616c30f69ded61111b111c0_b.jpg" alt><br>图6 不同的残差单元</p>
<p>作者对比18-layer和34-layer的网络效果，如图7所示。可以看到普通的网络出现退化现象，但是ResNet很好的解决了退化问题。</p>
<p><img src="/ResNet%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/v2-ac88d9e118e3a85922188daba84f7efd_b.jpg" alt><br>图7 18-layer和34-layer的网络效果</p>
<p>最后展示一下ResNet网络与其他网络在ImageNet上的对比结果，如表2所示。可以看到ResNet-152其误差降到了4.49%，当采用集成模型后，误差可以降到3.57%。</p>
<p><img src="/ResNet%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/v2-0a2c8a209a221817f91c1f1728327beb_b.jpg" alt><br>表2 ResNet与其他网络的对比结果</p>
<p>说一点关于残差单元题外话，上面我们说到了短路连接的几种处理方式，其实作者在 <a href="https://link.zhihu.com/?target=https%3A//arxiv.org/abs/1603.05027"> 文献[2] </a><br>中又对不同的残差单元做了细致的分析与实验，这里我们直接抛出最优的残差结构，如图8所示。改进前后一个明显的变化是采用pre-<br>activation，BN和ReLU都提前了。而且作者推荐短路连接采用恒等变换，这样保证短路连接不会有阻碍。感兴趣的可以去读读这篇文章。</p>
<p><img src="/ResNet%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/v2-4e0bf37ecad2f306fe09d32a2d37d908_b.jpg" alt> 图8<br>改进后的残差单元及效果</p>
<h2 id="ResNet的TensorFlow实现"><a href="#ResNet的TensorFlow实现" class="headerlink" title="ResNet的TensorFlow实现"></a>ResNet的TensorFlow实现</h2><p>这里给出ResNet50的TensorFlow实现，模型的实现参考了 <a href="https://link.zhihu.com/?target=https%3A//github.com/KaimingHe/deep-residual-
networks"> Caffe版本
</a> 的实现，核心代码如下：</p>
<pre><code>class ResNet50(object):
    def __init__(self, inputs, num_classes=1000, is_training=True,
                 scope=&quot;resnet50&quot;):
        self.inputs =inputs
        self.is_training = is_training
        self.num_classes = num_classes

        with tf.variable_scope(scope):
            # construct the model
            net = conv2d(inputs, 64, 7, 2, scope=&quot;conv1&quot;) # -&gt; [batch, 112, 112, 64]
            net = tf.nn.relu(batch_norm(net, is_training=self.is_training, scope=&quot;bn1&quot;))
            net = max_pool(net, 3, 2, scope=&quot;maxpool1&quot;)  # -&gt; [batch, 56, 56, 64]
            net = self._block(net, 256, 3, init_stride=1, is_training=self.is_training,
                              scope=&quot;block2&quot;)           # -&gt; [batch, 56, 56, 256]
            net = self._block(net, 512, 4, is_training=self.is_training, scope=&quot;block3&quot;)
                                                        # -&gt; [batch, 28, 28, 512]
            net = self._block(net, 1024, 6, is_training=self.is_training, scope=&quot;block4&quot;)
                                                        # -&gt; [batch, 14, 14, 1024]
            net = self._block(net, 2048, 3, is_training=self.is_training, scope=&quot;block5&quot;)
                                                        # -&gt; [batch, 7, 7, 2048]
            net = avg_pool(net, 7, scope=&quot;avgpool5&quot;)    # -&gt; [batch, 1, 1, 2048]
            net = tf.squeeze(net, [1, 2], name=&quot;SpatialSqueeze&quot;) # -&gt; [batch, 2048]
            self.logits = fc(net, self.num_classes, &quot;fc6&quot;)       # -&gt; [batch, num_classes]
            self.predictions = tf.nn.softmax(self.logits)


    def _block(self, x, n_out, n, init_stride=2, is_training=True, scope=&quot;block&quot;):
        with tf.variable_scope(scope):
            h_out = n_out // 4
            out = self._bottleneck(x, h_out, n_out, stride=init_stride,
                                   is_training=is_training, scope=&quot;bottlencek1&quot;)
            for i in range(1, n):
                out = self._bottleneck(out, h_out, n_out, is_training=is_training,
                                       scope=(&quot;bottlencek%s&quot; % (i + 1)))
            return out

    def _bottleneck(self, x, h_out, n_out, stride=None, is_training=True, scope=&quot;bottleneck&quot;):
        &quot;&quot;&quot; A residual bottleneck unit&quot;&quot;&quot;
        n_in = x.get_shape()[-1]
        if stride is None:
            stride = 1 if n_in == n_out else 2

        with tf.variable_scope(scope):
            h = conv2d(x, h_out, 1, stride=stride, scope=&quot;conv_1&quot;)
            h = batch_norm(h, is_training=is_training, scope=&quot;bn_1&quot;)
            h = tf.nn.relu(h)
            h = conv2d(h, h_out, 3, stride=1, scope=&quot;conv_2&quot;)
            h = batch_norm(h, is_training=is_training, scope=&quot;bn_2&quot;)
            h = tf.nn.relu(h)
            h = conv2d(h, n_out, 1, stride=1, scope=&quot;conv_3&quot;)
            h = batch_norm(h, is_training=is_training, scope=&quot;bn_3&quot;)

            if n_in != n_out:
                shortcut = conv2d(x, n_out, 1, stride=stride, scope=&quot;conv_4&quot;)
                shortcut = batch_norm(shortcut, is_training=is_training, scope=&quot;bn_4&quot;)
            else:
                shortcut = x
            return tf.nn.relu(shortcut + h)
</code></pre><p>完整实现可以参见 <a href="https://link.zhihu.com/?target=https%3A//github.com/xiaohu2015/DeepLearning_tutorials/"> GitHub
</a><br>。</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/ResNet%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-Numpy可视化图解" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/">Numpy可视化图解</a>
    </h1>
  

        
        <a href="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/" class="archive-article-date">
  	<time datetime="2020-05-23T10:20:58.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2020-05-23</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>本文用可视化的方式介绍了 NumPy 的功能和使用示例。</p>
</blockquote>
<p><img src="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/v2-fd8441e0b2f2ddb5c515afeb2480f1b5_b.jpg" alt></p>
<p>NumPy 软件包是 Python 生态系统中数据分析、 机器学习和科学计算的主力军。它极大地简化了向量和矩阵的操作处理。Python 的一些主要软件包（如 scikit-learn、SciPy、pandas 和 tensorflow）都以 NumPy 作为其架构的基础部分。除了能对数值数据进行切片（slice）和切块（dice）之外，使用 NumPy 还能为处理和调试上述库中的高级实例带来极大便利。</p>
<p>本文将介绍使用 NumPy 的一些主要方法，以及在将数据送入机器学习模型之前，它如何表示不同类型的数据（表格、图像、文本等）。</p>
<pre><code>import numpy as np
</code></pre><p><strong>创建数组</strong></p>
<p>我们可以通过传递一个 python 列表并使用 np.array（）来创建 NumPy 数组（极大可能是多维数组）。在本例中，python 创建的数组如下图右所示：</p>
<p><img src="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/v2-9bc9f4a57ce3f9e4e73219905e09e2a7_b.jpg" alt></p>
<p>通常我们希望 NumPy 能初始化数组的值，为此 NumPy 提供了 ones()、zeros() 和 random.random()<br>等方法。我们只需传递希望 NumPy 生成的元素数量即可：</p>
<p><img src="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/v2-f82e994f88a38dded5639d48ff24538e_b.jpg" alt></p>
<p>一旦创建了数组，我们就可以尽情对它们进行操作。</p>
<p><strong>数组运算</strong></p>
<p>让我们创建两个 NumPy 数组来展示数组运算功能。我们将下图两个数组称为 data 和 ones：</p>
<p><img src="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/v2-ee92e0eedfaa7293f9133584ed0d22ea_b.jpg" alt></p>
<p>将它们按位置相加（即每行对应相加），直接输入 data + ones 即可：</p>
<p><img src="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/v2-c49fb109e813fc94f60918b82548a39c_b.jpg" alt></p>
<p>当我开始学习这些工具时，我发现这样的抽象让我不必在循环中编写类似计算。此类抽象可以使我在更高层面上思考问题。除了「加」，我们还可以进行如下操作：</p>
<p><img src="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/v2-0026609b58063336aa9518059b01855d_b.jpg" alt></p>
<p>通常情况下，我们希望数组和单个数字之间也可以进行运算操作（即向量和标量之间的运算）。比如说，我们的数组表示以英里为单位的距离，我们希望将其单位转换为千米。只需输入data*1.6 即可：</p>
<p><img src="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/v2-053a0e7bd2080785a5bc81f70d35acd1_b.jpg" alt></p>
<p>看到 NumPy 是如何理解这个运算的了吗？这个概念叫做广播机制（broadcasting），它非常有用。</p>
<p><strong>索引</strong></p>
<p>我们可以我们像对 python 列表进行切片一样，对 NumPy 数组进行任意的索引和切片：</p>
<p><img src="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/v2-2100dcd8d6019bfecf8eda5a18025b6d_b.jpg" alt></p>
<p><strong>聚合</strong></p>
<p>NumPy 还提供聚合功能：</p>
<p><img src="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/v2-87845a1a65e184dad14920d60f9f119a_b.jpg" alt></p>
<p>除了 min、max 和 sum 之外，你还可以使用 mean 得到平均值，使用 prod 得到所有元素的乘积，使用 std 得到标准差等等。</p>
<p><strong>更多维度</strong></p>
<p>上述的例子都在一个维度上处理向量。NumPy 之美的关键在于，它能够将上述所有方法应用到任意数量的维度。</p>
<p><strong>创建矩阵</strong></p>
<p>我们可以传递下列形状的 python 列表，使 NumPy 创建一个矩阵来表示它：</p>
<pre><code>np.array([[1,2],[3,4]])
</code></pre><p>我们也可以使用上面提到的方法（ones()、zeros() 和 random.random()），只要写入一个描述我们创建的矩阵维数的元组即可：</p>
<p><img src="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/v2-77a4672cddff6c8c49e24375c9568bce_b.jpg" alt></p>
<p><strong>矩阵运算</strong></p>
<p>如果两个矩阵大小相同，我们可以使用算术运算符（+-*/）对矩阵进行加和乘。NumPy 将它们视为 position-wise 运算：</p>
<p><img src="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/v2-df64abbdcdb7918b773370fc1c8a7f83_b.jpg" alt></p>
<p>我们也可以对不同大小的两个矩阵执行此类算术运算，但前提是某一个维度为 1（如矩阵只有一列或一行），在这种情况下，NumPy 使用广播规则执行算术运算：</p>
<p><strong>点乘</strong></p>
<p>算术运算和矩阵运算的一个关键区别是矩阵乘法使用点乘。NumPy 为每个矩阵赋予 dot() 方法，我们可以用它与其他矩阵执行点乘操作：</p>
<p><img src="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/v2-18375d27cefa083976e54eb52c3105e7_b.jpg" alt></p>
<p>我在上图的右下角添加了矩阵维数，来强调这两个矩阵的临近边必须有相同的维数。你可以把上述运算视为：</p>
<p><img src="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/v2-2c8621cce73424d018e7b492dfd86428_b.jpg" alt></p>
<p><strong>矩阵索引</strong></p>
<p>当我们处理矩阵时，索引和切片操作变得更加有用：</p>
<p><img src="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/v2-20e17f7ac2d844c60cdade7e31f45008_b.jpg" alt></p>
<p>矩阵聚合</p>
<p>我们可以像聚合向量一样聚合矩阵：</p>
<p><img src="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/v2-9189d8cd719882458ad4a4a4813edb77_b.jpg" alt></p>
<p>我们不仅可以聚合矩阵中的所有值，还可以使用 axis 参数执行跨行或跨列聚合：</p>
<p><img src="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/v2-b2c32f4345a0876bb04693cd462fce54_b.jpg" alt></p>
<p><strong>转置和重塑</strong></p>
<p>处理矩阵时的一个常见需求是旋转矩阵。当需要对两个矩阵执行点乘运算并对齐它们共享的维度时，通常需要进行转置。NumPy 数组有一个方便的方法 T来求得矩阵转置：</p>
<p><img src="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/v2-6a8d8dbb725c0a9c45d4265bca0d74df_b.jpg" alt></p>
<p>在更高级的实例中，你可能需要变换特定矩阵的维度。在机器学习应用中，经常会这样：某个模型对输入形状的要求与你的数据集不同。在这些情况下，NumPy 的reshape() 方法就可以发挥作用了。只需将矩阵所需的新维度赋值给它即可。可以为维度赋值-1，NumPy 可以根据你的矩阵推断出正确的维度：</p>
<p><img src="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/v2-2376ab1662b0132291828a2a77e7e26b_b.jpg" alt></p>
<p><strong>再多维度</strong></p>
<p>NumPy 可以在任意维度实现上述提到的所有内容。其中心数据结构被叫作 ndarray（N 维数组）不是没道理的。</p>
<p><img src="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/v2-809e67eb06f7173b522d3dadf8429b09_b.jpg" alt></p>
<p>在很多情况下，处理一个新的维度只需在 NumPy 函数的参数中添加一个逗号：</p>
<p><img src="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/v2-66763148c5e4ad16c42668c7d44f70f6_b.jpg" alt></p>
<p><strong>实际用法</strong></p>
<p>以下是 NumPy 可实现的有用功能的实例演示。</p>
<p><strong>公式</strong></p>
<p>实现可用于矩阵和向量的数学公式是 NumPy 的关键用例。这就是 NumPy 是 python 社区宠儿的原因。例如均方差公式，它是监督机器学习</p>
<p><img src="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/v2-98daf9f14ba26c6364b06e2ca4ba6c18_b.jpg" alt></p>
<p>在 NumPy 中实现该公式很容易：</p>
<p><img src="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/v2-219cbccfd9b2404cc84add08d9a54f02_b.jpg" alt></p>
<p>这样做的好处在于，NumPy 并不关心 predictions 和 labels<br>包含一个值还是一千个值（只要它们大小相同）。我们可以通过一个示例依次执行上面代码行中的四个操作：</p>
<p><img src="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/v2-3c8e0c8c7f7e5c361b6e5337c0fd99b2_b.jpg" alt></p>
<p>预测和标签向量都包含三个值，也就是说 n 的值为 3。减法后，得到的值如下：</p>
<p><img src="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/v2-2d42d875158d0a9557ea6c69a8a1914b_b.jpg" alt></p>
<p>然后将向量平方得到：</p>
<p><img src="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/v2-84b7cb5ef79f28e9e67614e93914a311_b.jpg" alt></p>
<p>现在对这些值求和：</p>
<p><img src="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/v2-667724e5969589fffb6f0558b071851e_b.jpg" alt></p>
<p>得到的结果即为该预测的误差值和模型质量评分。</p>
<p><strong>数据表示</strong></p>
<p>考虑所有需要处理和构建模型所需的数据类型（电子表格、图像、音频等），其中很多都适合在 n 维数组中表示：</p>
<p>表格和电子表格</p>
<p>电子表格或值表是二维矩阵。电子表格中的每个工作表都可以是它自己的变量。python 中最流行的抽象是 pandas 数据帧，它实际上使用了 NumPy并在其之上构建。</p>
<p><img src="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/v2-b93ef11e4cdecd41ec0c06a813a029a6_b.jpg" alt></p>
<p>音频和时间序列</p>
<p>音频文件是样本的一维数组。每个样本都是一个数字，代表音频信号的一小部分。CD 质量的音频每秒包含 44,100 个样本，每个样本是-65535 到65536 之间的整数。这意味着如果你有一个 10 秒的 CD 质量 WAVE 文件，你可以将它加载到长度为 10 * 44,100 = 441,000 的NumPy 数组中。如果想要提取音频的第一秒，只需将文件加载到 audio 的 NumPy 数组中，然后获取 audio[:44100]。</p>
<p>以下是一段音频文件：</p>
<p><img src="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/v2-1016ab8d0e550ad7036dc3f323a66f57_b.jpg" alt></p>
<p>时间序列数据也是如此（如股票价格随时间变化）。</p>
<p>图像</p>
<p>图像是尺寸（高度 x 宽度）的像素矩阵。</p>
<p>如果图像是黑白（即灰度）的，则每个像素都可以用单个数字表示（通常在 0（黑色）和 255（白色）之间）。想要裁剪图像左上角 10 x 10 的像素吗？在NumPy写入即可。</p>
<p>下图是一个图像文件的片段：</p>
<p><img src="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/v2-566d7b09e9638dd9aaf8019137d60659_b.jpg" alt></p>
<p>如果图像是彩色的，则每个像素由三个数字表示——红色、绿色和蓝色。在这种情况下，我们需要一个三维数组（因为每个单元格只能包含一个数字）。因此彩色图像由尺寸为（高 x 宽 x3）的 ndarray 表示：</p>
<p><img src="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/v2-6d6a4bfe6ac199cb9d05374008e0bc2f_b.jpg" alt></p>
<p>语言</p>
<p>如果我们处理文本，情况就不同了。文本的数字表示需要一个构建词汇表的步骤（模型知道的唯一字清单）和嵌入步骤。让我们看看用数字表示以下文字的步骤：</p>
<p>模型需要先查看大量文本，再用数字表示这位诗人的话语。我们可以让它处理一个小数据集，并用它来构建一个词汇表（71,290 个单词）：</p>
<p><img src="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/v2-3cff454fac3c31a57ac8dfe6fb40d799_b.jpg" alt></p>
<p>这个句子可以被分成一个 token 数组（基于通用规则的单词或单词的一部分）：</p>
<p><img src="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/v2-5a9672a0dc2e7ab781e6b8c1ddc69720_b.jpg" alt></p>
<p>然后我们用词汇表中的 ID 替换每个单词：</p>
<p><img src="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/v2-953e375a50d31e5751fba16139ff62ad_b.jpg" alt></p>
<p>这些 ID 仍然没有为模型提供太多信息价值。因此，在将这一组单词输入到模型之前，我们需要用嵌入替换 token/单词（在本例中为 50 维 word2vec嵌入）：</p>
<p><img src="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/v2-fb3a4958572c72642ef52fe1c5073f23_b.jpg" alt></p>
<p>可以看到，该 NumPy 数组的维度为 [embedding_dimension x sequence_length]。出于性能原因，深度学习模型倾向于保留批大小的第一维（因为如果并行训练多个示例，模型训练速度会加快）。在这种情况下，reshape()变得非常有用。如像 BERT 这样的模型期望的输入形式是：[batch_size，sequence_length，embedding_size]。</p>
<p><img src="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/v2-e413984fe4bcd6f7bf3d7073ddbd9ca0_b.jpg" alt></p>
<p>现在这是 numeric volume 形式，模型可以处理并执行相应操作。其他行虽然留空，但是它们会被填充其他示例以供模型训练（或预测）。</p>
<p>_原文链接：_ <a href="https://link.zhihu.com/?target=https%3A//jalammar.github.io/visual-numpy/"> https://  jalammar.github.io/visu  al-numpy/
</a></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color1">NumPy</a>
        		</li>
      		
		</ul>
	</div>

      
	<div class="article-category tagcloud">
		<i class="icon-book icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="/categories/计算机视觉//" class="article-tag-list-link color1">计算机视觉</a>
        		</li>
      		
		</ul>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/Numpy%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-代码整洁之道" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/%E4%BB%A3%E7%A0%81%E6%95%B4%E6%B4%81%E4%B9%8B%E9%81%93/">代码整洁之道</a>
    </h1>
  

        
        <a href="/%E4%BB%A3%E7%A0%81%E6%95%B4%E6%B4%81%E4%B9%8B%E9%81%93/" class="archive-article-date">
  	<time datetime="2020-04-30T01:47:22.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2020-04-30</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="/%E4%BB%A3%E7%A0%81%E6%95%B4%E6%B4%81%E4%B9%8B%E9%81%93/v2-52f012eaf438b26277ed1aabaeba8922_b.jpg" alt></p>
<p>很多新手在开始学一门新的语言的时候，往往会忽视一些不应该忽视的细节，比如变量命名和函数命名以及注释等一些内容的规范性，久而久之养成了一种习惯。对此呢，我特意收集了一些适合所有学习<br>Python 的人，代码整洁之道。</p>
<p><strong>写出 Pythonic 代码</strong></p>
<p>谈到规范首先想到就是 Python 有名的 PEP8 代码规范文档，它定义了编写Pythonic代码的最佳实践。可以在 <a href="https://link.zhihu.com/?target=https%3A//www.python.org/dev/peps/pep-0008/"> https://www.<br>python.org/dev/peps/pep  -0008/
</a><br>上查看。但是真正去仔细研究学习这些规范的朋友并不是很多，对此呢这篇文章摘选一些比较常用的代码整洁和规范的技巧和方法，下面让我们一起来学习吧！</p>
<p><strong>命名</strong></p>
<p>所有的编程语言都有变量、函数、类等的命名约定，以美之称的 Python 当然更建议使用命名约定。接下来就针对类、函数、方法等等内容进行学习。</p>
<h3 id="变量和函数"><a href="#变量和函数" class="headerlink" title="变量和函数"></a><strong>变量和函数</strong></h3><p>使用小写字母命名函数和变量，并用下划线分隔单词，提高代码可读性。</p>
<h3 id="变量的声明"><a href="#变量的声明" class="headerlink" title="变量的声明"></a><strong>变量的声明</strong></h3><pre><code>names = &quot;Python&quot; #变量名 
namejob_title = &quot;Software Engineer&quot; #带有下划线的变量名
populated_countries_list = []  #带有下划线的变量名 
</code></pre><p>还应该考虑在代码中使用非 Python 内置方法名，如果使用 Python 中内置方法名请使用一个或两个下划线()。</p>
<pre><code>_books = {}# 变量名私有化
__dict = []# 防止python内置库中的名称混淆
</code></pre><p>那如何选择是用_还是__呢？</p>
<p>如果不希望外部类访问该变量，应该使用一个下划线（_）作为类的内部变量的前缀。如果要定义的私有变量名称是 Python 中的关键字如 dict<br>就要使用(__)。</p>
<h3 id="函数的声明"><a href="#函数的声明" class="headerlink" title="函数的声明"></a><strong>函数的声明</strong></h3><pre><code>def get_data(): 
    pass
def calculate_tax_data():
    pass
</code></pre><p>函数的声明和变量一样也是通过小写字母和单下划线进行连接。<br>当然对于函数私有化也是和声明变量类似。</p>
<pre><code>def _get_data():
   pass
</code></pre><p>函数的开头使用单下划线，将其进行私有化。对于使用 Pyton 中的关键字来进行命名的函数<br>要使用双下划线。</p>
<pre><code>def __path():
    pass
</code></pre><p>除了遵循这些命名规则之外，使用清晰易懂的变量名和很重要。</p>
<h3 id="函数名规范"><a href="#函数名规范" class="headerlink" title="函数名规范"></a><strong>函数名规范</strong></h3><pre><code># Wrong Way
def get_user_info(id):
   db = get_db_connection()
   user = execute_query_for_user(id)
   return user

# Right way
def get_user_by(user_id):
    db = get_db_connection()
    user = execute_user_query(user_id) 
    return user
</code></pre><p>这里，第二个函数 get_user_by 确保使用相同的参数来传递变量，从而为函数提供正确的上下文。第一个函数 get_user_info<br>就不怎么不明确了，因为参数 id 意味着什么这里我们不能确定，它是用户 ID，还是用户付款ID或任何其他<br>ID？这种代码可能会对使用你的API的其他开发人员造成混淆。为了解决这个问题，我在第二个函数中更改了两个东西;<br>我更改了函数名称以及传递的参数名称，这使代码可读性更高。</p>
<p>作为开发人员，你有责任在命名变量和函数时仔细考虑，要写让人能够清晰易懂的代码。<br>当然也方便自己以后去维护。</p>
<h3 id="类的命名规范"><a href="#类的命名规范" class="headerlink" title="类的命名规范"></a><strong>类的命名规范</strong></h3><p>类的名称应该像大多数其他语言一样使用驼峰大小写。</p>
<pre><code>class UserInformation:
     def get_user(id):
          db = get_db_connection()
          user = execute_query_for_user(id)
          return user
</code></pre><h3 id="常量的命名规范"><a href="#常量的命名规范" class="headerlink" title="常量的命名规范"></a><strong>常量的命名规范</strong></h3><p>通常应该用大写字母定义常量名称。</p>
<pre><code>TOTAL = 56
TIMOUT = 6
MAX_OVERFLOW = 7
</code></pre><h3 id="函数和方法的参数"><a href="#函数和方法的参数" class="headerlink" title="函数和方法的参数"></a><strong>函数和方法的参数</strong></h3><p>函数和方法的参数命名应遵循与变量和方法名称相同的规则。因为类方法将self作为第一个关键字参数。所以在函数中就不要使用 self<br>作为关键字作为参数，以免造成混淆 .</p>
<pre><code>def calculate_tax(amount, yearly_tax):
    passs

class Player:
    def get_total_score(self, player_name):
         pass
</code></pre><p>关于命名大概就强调这些，下面让我们看看表达式和语句中需要的问题。</p>
<p><strong>代码中的表达式和语句</strong></p>
<pre><code>users = [
    {&quot;first_name&quot;:&quot;Helen&quot;, &quot;age&quot;:39},
    {&quot;first_name&quot;:&quot;Buck&quot;, &quot;age&quot;:10},
    {&quot;first_name&quot;:&quot;anni&quot;, &quot;age&quot;:9}
]
users = sorted(users, key=lambda user: user[&quot;first_name&quot;].lower())
</code></pre><p>这段代码有什么问题?<br>乍一看并不容易理解这段代码，尤其是对于新开发人员来说，因为 lambdas 的语法很古怪，所以不容易理解。虽然这里使用 lambda<br>可以节省行，然而，这并不能保证代码的正确性和可读性。同时这段代码无法解决字典缺少键出现异常的问题。</p>
<p>让我们使用函数重写此代码，使代码更具可读性和正确性; 该函数将判断异常情况，编写起来要简单得多。</p>
<pre><code>users = [
    {&quot;first_name&quot;:&quot;Helen&quot;, &quot;age&quot;:39},
    {&quot;first_name&quot;:&quot;Buck&quot;, &quot;age&quot;:10},
    {&quot;name&quot;:&quot;anni&quot;, &quot;age&quot;:9}
]
def get_user_name(users):
    &quot;&quot;&quot;Get name of the user in lower case&quot;&quot;&quot;
    return users[&quot;first_name&quot;].lower()
def get_sorted_dictionary(users):
    &quot;&quot;&quot;Sort the nested dictionary&quot;&quot;&quot;
    if not isinstance(users, dict):
        raise ValueError(&quot;Not a correct dictionary&quot;)
    if not len(users):
       raise ValueError(&quot;Empty dictionary&quot;)
    users_by_name = sorted(users, key=get_user_name)
    return users_by_name
</code></pre><p>如你所见，此代码检查了所有可能的意外值，并且比起以前的单行代码更具可读性。单行代码虽然看起来很酷节省了行，但是会给代码添加很多复杂性。但是这并不意味着单行代码就不好<br>这里提出的一点是，如果你的单行代码使代码变得更难阅读，那么就请避免使用它，记住写代码不是为了炫酷的，尤其在项目组中。</p>
<p>让我们再考虑一个例子，你试图读取 CSV 文件并计算 CSV 文件处理的行数。下面的代码展示使代码可读的重要性，以及命名如何在使代码可读中发挥重要作用。</p>
<pre><code>import csv
with open(&quot;employee.csv&quot;, mode=&quot;r&quot;) as csv_file:
    csv_reader = csv.DictReader(csv_file)
    line_count = 0
    for row in csv_reader:
        if line_count == 0:
            print(f&#39;Column names are {&quot;, &quot;.join(row)}&#39;)
            line_count += 1
            print(f&#39;\t{row[&quot;name&quot;]} salary: {row[&quot;salary&quot;]}&#39;
            f&#39;and was born in {row[&quot;birthday month&quot;]}.&#39;)
        line_count += 1
    print(f&#39;Processed {line_count} lines.&#39;)
</code></pre><p>将代码分解为函数有助于使复杂的代码变的易于阅读和调试。<br>这里的代码在 with 语句中执行多项操作。为了提高可读性，您可以将带有 process salary 的代码从 CSV<br>文件中提取到另一个函数中，以降低出错的可能性。</p>
<pre><code>import csv
with open(&quot;employee.csv&quot;, mode=&quot;r&quot;) as csv_file:
    csv_reader = csv.DictReader(csv_file)
    line_count = 0
    process_salary(csv_reader)    


def process_salary(csv_reader):
&quot;&quot;&quot;Process salary of user from csv file.&quot;&quot;&quot;
    for row in csv_reader:
            if line_count == 0:
                print(f&#39;Column names are {&quot;, &quot;.join(row)}&#39;)
                line_count += 1
                print(f&#39;\t{row[&quot;name&quot;]} salary: {row[&quot;salary&quot;]}&#39;
                f&#39;and was born in {row[&quot;birthday month&quot;]}.&#39;)
            line_count += 1
        print(f&#39;Processed {line_count} lines.&#39;) 
</code></pre><p>代码是不是变得容易理解了不少呢。<br>在这里，创建了一个帮助函数，而不是在with语句中编写所有内容。这使读者清楚地了解了函数的实际作用。如果想处理一个特定的异常或者想从CSV文件中读取更多的数据，可以进一步分解这个函数，以遵循单一职责原则，一个函数一做一件事。这个很重要。</p>
<p><strong>return语句的类型尽量一致</strong></p>
<p>如果希望函数返回一个值，请确保该函数的所有执行路径都返回该值。但是，如果期望函数只是在不返回值的情况下执行操作，则 Python 会隐式返回 None<br>作为函数的默认值。<br>先看一个错误示范</p>
<pre><code>def calculate_interest(principle, time rate):    
     if principle &gt; 0:
         return (principle * time * rate) / 100
def calculate_interest(principle, time rate):    
    if principle &lt; 0:
        return    
    return (principle * time * rate) / 100ChaPTER 1  PyThonIC ThInkIng
</code></pre><p>正确的示范应该是下面这样</p>
<pre><code>def calculate_interest(principle, time rate):    
     if principle &gt; 0:
         return (principle * time * rate) / 100
     else:
        return None
def calculate_interest(principle, time rate):    
    if principle &lt; 0:
        return None    
    return (principle * time * rate) / 100ChaPTER 1  PyThonIC ThInkIng
</code></pre><p>还是那句话写易读的代码，代码多写点没关系，可读性很重要。</p>
<p><strong>使用 isinstance() 方法而不是 type() 进行比较</strong></p>
<p>当比较两个对象类型时，请考虑使用 isinstance() 而不是 type，因为 isinstance() 判断一个对象是否为另一个对象的子类是<br>true。考虑这样一个场景：如果传递的数据结构是dict 的子类，比如 orderdict。type()<br>对于特定类型的数据结构将失败;然而，isinstance() 可以将其识别出它是 dict 的子类。</p>
<p>错误示范</p>
<pre><code>user_ages = {&quot;Larry&quot;: 35, &quot;Jon&quot;: 89, &quot;Imli&quot;: 12}
type(user_ages) == dict:
</code></pre><p>正确选择</p>
<pre><code>user_ages = {&quot;Larry&quot;: 35, &quot;Jon&quot;: 89, &quot;Imli&quot;: 12}
if isinstance(user_ages, dict):
</code></pre><h3 id="比较布尔值"><a href="#比较布尔值" class="headerlink" title="比较布尔值"></a><strong>比较布尔值</strong></h3><p>在Python中有多种方法可以比较布尔值。<br>错误示范</p>
<pre><code>if is_empty = False
if is_empty == False:
if is_empty is False:
</code></pre><p>正确示范</p>
<pre><code>is_empty = False
if is_empty
</code></pre><h3 id="使用文档字符串"><a href="#使用文档字符串" class="headerlink" title="使用文档字符串"></a><strong>使用文档字符串</strong></h3><p>Docstrings可以在 Python 中声明代码的功能的。通常在方法，类和模块的开头使用。docstring是该对象的<strong>doc</strong>特殊属性。<br>Python 官方语言建议使用“”三重双引号“”来编写文档字符串。你可以在 PEP8 官方文档中找到这些实践。下面让我们简要介绍一下在 Python<br>代码中编写 docstrings 的一些最佳实践 。</p>
<h3 id="方法中使用docstring"><a href="#方法中使用docstring" class="headerlink" title="方法中使用docstring"></a><strong>方法中使用docstring</strong></h3><pre><code>def get_prime_number():
    &quot;&quot;&quot;Get list of prime numbers between 1 to 100.&quot;&quot;&quot;&quot;
</code></pre><p>关于docstring的格式的写法，目前存在多种风格，但是这几种风格都有一些统一的标准。</p>
<ul>
<li>即使字符串符合一行，也会使用三重引号。当你想要扩展时，这种注释非常有用。‘ </li>
<li>三重引号中的字符串前后不应有任何空行 </li>
<li>使用句点（.）结束docstring中的语句<br>类似地，可以应用 Python 多行 docstring 规则来编写多行<br>docstring。在多行上编写文档字符串是用更具描述性的方式记录代码的一种方法。你可以利用 Python 多行文档字符串在 Python<br>代码中编写描述性文档字符串，而不是在每一行上编写注释。</li>
</ul>
<h3 id="多行的docstring"><a href="#多行的docstring" class="headerlink" title="多行的docstring"></a><strong>多行的docstring</strong></h3><pre><code>def call_weather_api(url, location):
    &quot;&quot;&quot;Get the weather of specific location.

    Calling weather api to check for weather by using weather api and 
    location. Make sure you provide city name only, country and county 
    names won&#39;t be accepted and will throw exception if not found the 
    city name.

    :param url:URL of the api to get weather.
    :type url: str
    :param location:Location of the city to get the weather.
    :type location: str
    :return: Give the weather information of given location.
    :rtype: str&quot;&quot;&quot;
</code></pre><p>说一下上面代码的注意点</p>
<ul>
<li>第一行是函数或类的简要描述 </li>
<li>每一行语句的末尾有一个句号 </li>
<li>文档字符串中的简要描述和摘要之间有一行空白 </li>
</ul>
<p>如果使用 Python3.6 可以使用类型注解对上面的docstring以及参数的声明进行修改。</p>
<pre><code>def call_weather_api(url: str, location: str) -&gt; str:
    &quot;&quot;&quot;Get the weather of specific location.

    Calling weather api to check for weather by using weather api and 
    location. Make sure you provide city name only, country and county 
    names won&#39;t be accepted and will throw exception if not found the 
    city name.
    &quot;&quot;&quot;
</code></pre><p>怎么样是不是简洁了不少，如果使用 Python 代码中的类型注解，则不需要再编写参数信息。<br>关于类型注解(type hint)的具体用法可以参考我之前写的 <a href="https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzU0NDQ2OTkzNw%3D%3D%26mid%3D2247484258%26idx%3D1%26sn%3Db13db84dad8eccaec9cd4af618e812e4%26chksm%3Dfb7ae5bccc0d6caa8e145e9fd22d0395e68d618672ebbfe99794926c0b9e782974fb16321e32%26scene%3D21%23wechat_redirect"> python类型检测最终指南—Typing的使用
</a></p>
<h3 id="模块级别的docstring"><a href="#模块级别的docstring" class="headerlink" title="模块级别的docstring"></a><strong>模块级别的docstring</strong></h3><p>一般在文件的顶部放置一个模块级的 docstring 来简要描述模块的使用。<br>这些注释应该放在在导包之前，模块文档字符串应该表明模块的使用方法和功能。<br>如果觉得在使用模块之前客户端需要明确地知道方法或类，你还可以简要地指定特定方法或类。</p>
<pre><code>&quot;&quot;&quot;This module contains all of the network related requests. 
This module will check for all the exceptions while making the network 
calls and raise exceptions for any unknown exception.
Make sure that when you use this module,
you handle these exceptions in client code as:
NetworkError exception for network calls.
NetworkNotFound exception if network not found.
&quot;&quot;&quot;

import urllib3
import json
</code></pre><p>在为模块编写文档字符串时，应考虑执行以下操作：</p>
<ul>
<li>对当前模块写一个简要的说明 </li>
<li>如果想指定某些对读者有用的模块，如上面的代码，还可以添加异常信息，但是注意不要太详细。 </li>
</ul>
<pre><code>NetworkError exception for network calls.
NetworkNotFound exception if network not found.
</code></pre><ul>
<li>将模块的docstring看作是提供关于模块的描述性信息的一种方法，而不需要详细讨论每个函数或类具体操作方法。 </li>
</ul>
<h3 id="类级别的docstring"><a href="#类级别的docstring" class="headerlink" title="类级别的docstring"></a><strong>类级别的docstring</strong></h3><p>类docstring主要用于简要描述类的使用及其总体目标。让我们看一些示例，看看如何编写类文档字符串</p>
<h3 id="单行类docstring"><a href="#单行类docstring" class="headerlink" title="单行类docstring"></a><strong>单行类docstring</strong></h3><pre><code>class Student:
   &quot;&quot;&quot;This class handle actions performed by a student.&quot;&quot;&quot;
   def __init__(self):
      pass
</code></pre><p>这个类有一个一行的 docstring，它简要地讨论了学生类。如前所述，遵守了所以一行docstring 的编码规范。</p>
<h3 id="多行类docstring"><a href="#多行类docstring" class="headerlink" title="多行类docstring"></a><strong>多行类docstring</strong></h3><pre><code>class Student:
    &quot;&quot;&quot;Student class information.

    This class handle actions performed by a student.
    This class provides information about student full name, age, 
    roll-number and other information.
    Usage:
        import student
        student = student.Student()
        student.get_name()
        &gt;&gt;&gt; 678998
   &quot;&quot;&quot;
   def __init__(self):
       pass
</code></pre><p>这个类 docstring 是多行的; 我们写了很多关于 Student 类的用法以及如何使用它。</p>
<h3 id="函数的docstring"><a href="#函数的docstring" class="headerlink" title="函数的docstring"></a><strong>函数的docstring</strong></h3><p>函数文档字符串可以写在函数之后，也可以写在函数的顶部。</p>
<pre><code>def is_prime_number(number):
    &quot;&quot;&quot;Check for prime number.

    Check the given number is prime number 
    or not by checking against all the numbers 
    less the square root of given number.

    :param number:Given number to check for prime
    :type number: int
    :return: True if number is prime otherwise False.
    :rtype: boolean
    &quot;&quot;&quot;
</code></pre><p>如果我们使用类型注解对其进一步优化。</p>
<pre><code>def is_prime_number(number: int)-&gt;bool:
    &quot;&quot;&quot;Check for prime number.

    Check the given number is prime number 
    or not by checking against all the numbers 
    less the square root of given number.
    &quot;&quot;&quot;
</code></pre><h3 id="结语"><a href="#结语" class="headerlink" title="结语"></a><strong>结语</strong></h3><p>当然关于 Python 中的规范还有很多很多，建议大家参考 Python 之禅和 Pep8 对代码进行优化，养成编写 Pythonic 代码的良好习惯。</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color2">python</a>
        		</li>
      		
		</ul>
	</div>

      
	<div class="article-category tagcloud">
		<i class="icon-book icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="/categories/代码规范//" class="article-tag-list-link color5">代码规范</a>
        		</li>
      		
		</ul>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/%E4%BB%A3%E7%A0%81%E6%95%B4%E6%B4%81%E4%B9%8B%E9%81%93/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-如何优雅的使用Git" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E4%BD%BF%E7%94%A8Git/">如何优雅的使用Git</a>
    </h1>
  

        
        <a href="/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E4%BD%BF%E7%94%A8Git/" class="archive-article-date">
  	<time datetime="2020-04-24T02:22:55.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2020-04-24</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E4%BD%BF%E7%94%A8Git/v2-f120fc98d9f77eb6f5f91d22d0b0ccd5_b.jpg" alt></p>
<p>尽管 Git 是一款非常强大的工具，但如果我说 Git 用起来简直是噩梦，大多数人也会认同我的说法。我发现在使用 Git<br>时，在头脑里可视化地想象它会非常有用：当我执行一个特定命令时，这些分支会如何交互，又会怎样影响历史记录？为什么当我在 master 上执行硬重启，force<br>push 到原分支以及 rimraf 我们的 .git 文件夹时，我的同事哭了？</p>
<p>我觉得创建一些最常用且最有用的 Git<br>命令的可视化示例会是一个完美的用例！下面我将介绍的很多命令都有可选参数——你可以使用这些参数来改变对应命令的行为。而我的示例只会涵盖命令的默认行为，而不会添加（或添加太多）可选配置！</p>
<p><strong>合并</strong></p>
<p>拥有多个分支是很方便的，这样可以将不同的新修改互相隔离开，而且还能确保你不会意外地向生产代码推送未经许可或破损的代码修改。但一旦这些修改得到了批准许可，我们就需要将其部署到我们的生产分支中！</p>
<p>可将一个分支的修改融入到另一个分支的一种方式是执行 git merge。Git 可执行两种类型的合并：fast-forward 和 no-fast-<br>forward。现在你可能分不清，但我们马上就来看看它们的差异所在。</p>
<p><strong>Fast-forward (—ff)</strong></p>
<p>在当前分支相比于我们要合并的分支没有额外的提交（commit）时，可以执行 fast-forward 合并。Git<br>很懒，首先会尝试执行最简单的选项：fast-forward！这类合并不会创建新的提交，而是会将我们正在合并的分支上的提交直接合并到当前分支。</p>
<p><img src="/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E4%BD%BF%E7%94%A8Git/v2-0a0431c992211561f14ee66f1cf0ea89_b.gif" alt></p>
<p>完美！现在，我们在 dev 分支上所做的所有改变都合并到了 master 分支上。那么 no-fast-forward 又是什么意思呢？</p>
<p><strong>No-fast-foward (—no-ff)</strong></p>
<p>如果你的当前分支相比于你想要合并的分支没有任何提交，那当然很好，但很遗憾现实情况很少如此！如果我们在当前分支上提交我们想要合并的分支不具备的改变，那么<br>git 将会执行 no-fast-forward 合并。</p>
<p>使用 no-fast-forward 合并时，Git 会在当前活动分支上创建新的 merging commit。这个提交的父提交（parent<br>commit）即指向这个活动分支，也指向我们想要合并的分支！</p>
<p><img src="/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E4%BD%BF%E7%94%A8Git/v2-d5be0dfa20f8a7c57f99f2b48b521bda_b.gif" alt></p>
<p>没什么大不了的，完美的合并！现在，我们在 dev 分支上所做的所有改变都合并到了 master 分支上。</p>
<p><strong>合并冲突</strong></p>
<p>尽管 Git<br>能够很好地决定如何合并分支以及如何向文件添加修改，但它并不总是能完全自己做决定。当我们想要合并的两个分支的同一文件中的同一行代码上有不同的修改，或者一个分支删除了一个文件而另一个分支修改了这个文件时，Git<br>就不知道如何取舍了。</p>
<p>在这样的情况下，Git 会询问你想要保留哪种选择？假设在这两个分支中，我们都编辑了 README.md 的第一行。</p>
<p><img src="/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E4%BD%BF%E7%94%A8Git/v2-7e67f4e1e5ce5b00ff71bd0da66dc275_b.jpg" alt></p>
<p>如果我们想把 dev 合并到 master，就会出现一个合并冲突：你想要标题是 Hello! 还是 Hey!？</p>
<p>当尝试合并这些分支时，Git 会向你展示冲突出现的位置。我们可以手动移除我们不想保留的修改，保存这些修改，再次添加这个已修改的文件，然后提交这些修改。</p>
<p><img src="/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E4%BD%BF%E7%94%A8Git/v2-2a8ce9f5e3f32b399cca693f38418e65_b.gif" alt></p>
<p>完成！尽管合并冲突往往很让人厌烦，但这是合理的：Git 不应该瞎猜我们想要保留哪些修改。</p>
<p><strong>变基（Rebasing）</strong></p>
<p>我们刚看到可通过执行 git merge 将一个分支的修改应用到另一个分支。另一种可将一个分支的修改融入到另一个分支的方式是执行 git rebase。</p>
<p>git rebase 会将当前分支的提交复制到指定的分支之上。</p>
<p><img src="/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E4%BD%BF%E7%94%A8Git/v2-6b8427b4baf6cdfb08b852ab1cdb4941_b.gif" alt></p>
<p>完美，现在我们在 dev 分支上获取了 master 分支上的所有修改。</p>
<p>变基与合并有一个重大的区别：Git 不会尝试确定要保留或不保留哪些文件。我们执行 rebase<br>的分支总是含有我们想要保留的最新近的修改！这样我们不会遇到任何合并冲突，而且可以保留一个漂亮的、线性的 Git 历史记录。</p>
<p>上面这个例子展示了在 master 分支上的变基。但是，在更大型的项目中，你通常不需要这样的操作。git rebase 在为复制的提交创建新的 hash<br>时会修改项目的历史记录。</p>
<p>如果你在开发一个 feature 分支并且 master 分支已经更新过，那么变基就很好用。你可以在你的分支上获取所有更新，这能防止未来出现合并冲突。</p>
<p><strong>交互式变基（Interactive Rebase）</strong></p>
<p>在为提交执行变基之前，我们可以修改它们！我们可以使用交互式变基来完成这一任务。交互式变基在你当前开发的分支上以及想要修改某些提交时会很有用。</p>
<p>在我们正在 rebase 的提交上，我们可以执行以下 6 个动作：</p>
<ul>
<li>reword：修改提交信息； </li>
<li>edit：修改此提交； </li>
<li>squash：将提交融合到前一个提交中； </li>
<li>fixup：将提交融合到前一个提交中，不保留该提交的日志消息； </li>
<li>exec：在每个提交上运行我们想要 rebase 的命令； </li>
<li>drop：移除该提交。 </li>
</ul>
<p>很棒！这样我们就能完全控制我们的提交了。如果你想要移除一个提交，只需 drop 即可。</p>
<p><img src="/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E4%BD%BF%E7%94%A8Git/v2-7189da3226d1fdedeb6a297fbc2b1177_b.gif" alt></p>
<p>如果你想把多个提交融合到一起以便得到清晰的提交历史，那也没有问题！</p>
<p><img src="/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E4%BD%BF%E7%94%A8Git/v2-758ead2cd3914cadc4d822053ad1089a_b.gif" alt></p>
<p>交互式变基能为你在 rebase 时提供大量控制，甚至可以控制当前的活动分支。</p>
<p><strong>重置（Resetting）</strong></p>
<p>当我们不想要之前提交的修改时，就会用到这个命令。也许这是一个 WIP 提交或者可能是引入了 bug 的提交，这时候就要执行 git reset。</p>
<p>git reset 能让我们不再使用当前台面上的文件，让我们可以控制 HEAD 应该指向的位置。</p>
<p><strong>软重置</strong></p>
<p>软重置会将 HEAD 移至指定的提交（或与 HEAD 相比的提交的索引），而不会移除该提交之后加入的修改！</p>
<p>假设我们不想保留添加了一个 style.css 文件的提交 9e78i，而且我们也不想保留添加了一个 index.js 文件的提交<br>035cc。但是，我们确实又想要保留新添加的 style.css 和 index.js 文件！这是软重置的一个完美用例。</p>
<p><img src="/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E4%BD%BF%E7%94%A8Git/v2-ada73b43d7146e071f9557372d733d66_b.gif" alt></p>
<p>输入 git status 后，你会看到我们仍然可以访问在之前的提交上做过的所有修改。这很好，这意味着我们可以修复这些文件的内容，之后再重新提交它们！</p>
<p><strong>硬重置</strong></p>
<p>有时候我们并不想保留特定提交引入的修改。不同于软重置，我们应该再也无需访问它们。Git<br>应该直接将整体状态直接重置到特定提交之前的状态：这甚至包括你在工作目录中和暂存文件上的修改。</p>
<p><img src="/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E4%BD%BF%E7%94%A8Git/v2-3456eebeb80dca402dbf5b55e88c4291_b.gif" alt></p>
<p>Git 丢弃了 9e78i 和 035cc 引入的修改，并将状态重置到了 ec5be 的状态。</p>
<p><strong>还原（Reverting）</strong></p>
<p>另一种撤销修改的方法是执行 git revert。通过对特定的提交执行还原操作，我们会创建一个包含已还原修改的新提交。</p>
<p>假设 ec5be 添加了一个 index.js 文件。但之后我们发现其实我们再也不需要由这个提交引入的修改了。那就还原 ec5be 提交吧！</p>
<p><img src="/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E4%BD%BF%E7%94%A8Git/v2-381df5ae9b3d97906e9235f3723f84a8_b.gif" alt></p>
<p>完美！提交 9e78i 还原了由提交 ec5be 引入的修改。在撤销特定的提交时，git revert 非常有用，同时也不会修改分支的历史。</p>
<p><strong>拣选（Cherry-picking）</strong></p>
<p>当一个特定分支包含我们的活动分支需要的某个提交时，我们对那个提交执行 cherry-pick！对一个提交执行 cherry-pick<br>时，我们会在活动分支上创建一个新的提交，其中包含由拣选出来的提交所引入的修改。</p>
<p>假设 dev 分支上的提交 76d12 为 index.js 文件添加了一项修改，而我们希望将其整合到 master 分支中。我们并不想要整个 dev<br>分支，而只需要这个提交！</p>
<p><img src="/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E4%BD%BF%E7%94%A8Git/v2-486f540aaf172d27349c217f87e9fba8_b.gif" alt></p>
<p>现在 master 分支包含 76d12 引入的修改了。</p>
<p><strong>取回（Fetching）</strong></p>
<p>如果你有一个远程 Git 分支，比如在 GitHub<br>上的分支，当远程分支上包含当前分支没有的提交时，可以使用取回。比如当合并了另一个分支或你的同事推送了一个快速修复时。</p>
<p>通过在这个远程分支上执行 git fetch，我们就可在本地获取这些修改。这不会以任何方式影响你的本地分支：fetch 只是单纯地下载新的数据而已。</p>
<p><img src="/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E4%BD%BF%E7%94%A8Git/v2-686ae54f78ea69b6c00cc8b159cf7369_b.gif" alt></p>
<p>现在我们可以看到自上次推送以来的所有修改了。这些新数据也已经在本地了，我们可以决定用这些新数据做什么了。</p>
<p><strong>拉取（Pulling）</strong></p>
<p>尽管 git fetch 可用于获取某个分支的远程信息，但我们也可以执行 git pull。git pull 实际上是两个命令合成了一个：git fetch<br>和 git merge。当我们从来源拉取修改时，我们首先是像 git fetch 那样取回所有数据，然后最新的修改会自动合并到本地分支中。</p>
<p><img src="/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E4%BD%BF%E7%94%A8Git/v2-1298832b975cf9cf0ad6c399ec5da32d_b.gif" alt></p>
<p>很好，我们现在与远程分支完美同步了，并且也有了所有最新的修改！</p>
<p><strong>Reflog</strong></p>
<p>每个人都会犯错，但犯错其实没啥！有时候你可能感觉你把 git repo 完全搞坏了，让你想完全删了了事。</p>
<p>git reflog 是一个非常有用的命令，可以展示已经执行过的所有动作的日志。包括合并、重置、还原，基本上包含你对你的分支所做的任何修改。</p>
<p><img src="/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E4%BD%BF%E7%94%A8Git/v2-cda251045d9d8b2d5b65db533b6ba3cc_b.gif" alt></p>
<p>如果你犯了错，你可以根据 reflog 提供的信息通过重置 HEAD 来轻松地重做！</p>
<p>假设我们实际上并不需要合并原有分支。当我们执行 git reflog 命令时，我们可以看到这个 repo 的状态在合并前位于<br>HEAD@{1}。那我们就执行一次 git reset，将 HEAD 重新指向在 HEAD@{1} 的位置。</p>
<p><img src="/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E4%BD%BF%E7%94%A8Git/v2-4131550e150396f1dfc6a8242c6d103a_b.gif" alt></p>
<p>我们可以看到最新的动作已被推送给 reflog。</p>
<p><a href="https://www.processon.com/view/link/5c6e2755e4b03334b523ffc3#map" target="_blank" rel="noopener">git常用指令</a></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">Git</a>
        		</li>
      		
		</ul>
	</div>

      
	<div class="article-category tagcloud">
		<i class="icon-book icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="/categories/计算机工具//" class="article-tag-list-link color1">计算机工具</a>
        		</li>
      		
		</ul>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E4%BD%BF%E7%94%A8Git/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-计算机视觉科普" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E7%A7%91%E6%99%AE/">计算机视觉科普</a>
    </h1>
  

        
        <a href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E7%A7%91%E6%99%AE/" class="archive-article-date">
  	<time datetime="2020-03-25T12:07:58.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2020-03-25</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>如果你刚刚接触cv领域，下面的视频会给你巨大的收获，短短十分钟介绍了传统图像处理算法及深度学习原理。</p>
<ul>
<li>图形组成原理</li>
<li>竖直边缘与水平边缘检测</li>
<li>滤波器的概念</li>
<li>卷积原理</li>
<li>Prewitt算子</li>
<li>人脸检测原理</li>
<li>卷积神经网络概念</li>
<li>微表情判断</li>
<li>人体关节点识别与跟踪</li>
</ul>
<iframe width="900" height="600" src="//player.bilibili.com/player.html?aid=21376839&bvid=BV1EW411u7th&cid=37402492&page=35" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>
      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color5">图像处理</a>
        		</li>
      		 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color5">深度学习</a>
        		</li>
      		
		</ul>
	</div>

      
	<div class="article-category tagcloud">
		<i class="icon-book icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="/categories/计算机视觉//" class="article-tag-list-link color1">计算机视觉</a>
        		</li>
      		
		</ul>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E7%A7%91%E6%99%AE/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-Faster RCNN 算法解读" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/Faster%20RCNN%20%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/">Faster RCNN 算法解读</a>
    </h1>
  

        
        <a href="/Faster%20RCNN%20%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/" class="archive-article-date">
  	<time datetime="2020-03-24T10:20:58.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2020-03-24</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>经过R-CNN和Fast RCNN的积淀，Ross B. Girshick在2016年提出了新的Faster RCNN，在结构上，Faster<br>RCNN已经将特征抽取(feature extraction)，proposal提取，bounding box regression(rect<br>refine)，classification都整合在了一个网络中，使得综合性能有较大提高，在检测速度方面尤为明显。</p>
<blockquote>
<p>目录<br> 1 Conv layers<br> 2 Region Proposal Networks(RPN)<br> - 2.1 多通道图像卷积基础知识介绍<br> - 2.2 anchors<br> - 2.3 softmax判定positive与negative<br> - 2.4 bounding box regression原理<br> - 2.5 对proposals进行bounding box regression<br> - 2.6 Proposal Layer<br> 3 RoI pooling<br> - 3.1 为何需要RoI Pooling<br> - 3.2 RoI Pooling原理<br> 4 Classification<br> 5 Faster RCNN训练<br> - 5.1 训练RPN网络<br> - 5.2 通过训练好的RPN网络收集proposals<br> - 5.3 训练Faster RCNN网络<br> Questions and Answer</p>
</blockquote>
<p><img src="/Faster%20RCNN%20%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/v2-c0172be282021a1029f7b72b51079ffe_b.jpg" alt><br>图1 Faster<br>RCNN基本结构（来自原论文）</p>
<p>依作者看来，如图1，Faster RCNN其实可以分为4个主要内容：</p>
<ol>
<li>Conv layers。作为一种CNN网络目标检测方法，Faster RCNN首先使用一组基础的conv+relu+pooling层提取image的feature maps。该feature maps被共享用于后续RPN层和全连接层。 </li>
<li>Region Proposal Networks。RPN网络用于生成region proposals。该层通过softmax判断anchors属于positive或者negative，再利用bounding box regression修正anchors获得精确的proposals。 </li>
<li>Roi Pooling。该层收集输入的feature maps和proposals，综合这些信息后提取proposal feature maps，送入后续全连接层判定目标类别。 </li>
<li>Classification。利用proposal feature maps计算proposal的类别，同时再次bounding box regression获得检测框最终的精确位置。 </li>
</ol>
<p>所以本文以上述4个内容作为切入点介绍Faster R-CNN网络。</p>
<p>图2展示了python版本中的VGG16模型中的faster_rcnn_test.pt的网络结构，可以清晰的看到该网络对于一副任意大小PxQ的图像，首先缩放至固定大小MxN，然后将MxN图像送入网络；而Conv<br>layers中包含了13个conv层+13个relu层+4个pooling层；RPN网络首先经过3x3卷积，再分别生成positive<br>anchors和对应bounding box regression偏移量，然后计算出proposals；而Roi<br>Pooling层则利用proposals从feature maps中提取proposal<br>feature送入后续全连接和softmax网络作classification（即分类proposal到底是什么object）。</p>
<p><img src="/Faster%20RCNN%20%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/v2-e64a99b38f411c337f538eb5f093bdf3_b.jpg" alt><br>图2<br>faster_rcnn_test.pt网络结构<br>（pascal_voc/VGG16/faster_rcnn_alt_opt/faster_rcnn_test.pt）</p>
<p>_本文不会讨论任何关于R-CNN家族的历史，分析清楚最新的Faster R-CNN就够了，并不需要追溯到那么久。实话说我也不了解R-<br>CNN，更不关心。有空不如看看新算法。_</p>
<h2 id="1-Conv-layers"><a href="#1-Conv-layers" class="headerlink" title="1 Conv layers"></a>1 Conv layers</h2><p>Conv<br>layers包含了conv，pooling，relu三种层。以python版本中的VGG16模型中的faster_rcnn_test.pt的网络结构为例，如图2，Conv<br>layers部分共有13个conv层，13个relu层，4个pooling层。这里有一个非常容易被忽略但是又无比重要的信息，在Conv layers中：</p>
<ol>
<li>所有的conv层都是：kernel_size=3，pad=1，stride=1 </li>
<li>所有的pooling层都是：kernel_size=2，pad=1，stride=1  <script type="math/tex">\displaystyle \text{kernel_size}=2</script>  ，  <script type="math/tex">\displaystyle \text{pad}=0</script>  ，  <script type="math/tex">\displaystyle \text{stride}=2</script> </li>
</ol>
<p>为何重要？在Faster RCNN Conv layers中对所有的卷积都做了扩边处理（ pad=1，即填充一圈0），导致原图变为<br>(M+2)x(N+2)大小，再做3x3卷积后输出MxN 。正是这种设置，导致Conv layers中的conv层不改变输入和输出矩阵大小。如图3：</p>
<p><img src="/Faster%20RCNN%20%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/v2-3c772e9ed555eb86a97ef9c08bf563c9_b.jpg" alt><br>图3 卷积示意图</p>
<p>类似的是，Conv<br>layers中的pooling层kernel_size=2，stride=2。这样每个经过pooling层的MxN矩阵，都会变为(M/2)x(N/2)大小。综上所述，在整个Conv<br>layers中，conv和relu层不改变输入输出大小，只有pooling层使输出长宽都变为输入的1/2。</p>
<p>那么，一个MxN大小的矩阵经过Conv layers固定变为(M/16)x(N/16)！这样Conv layers生成的feature<br>map中都可以和原图对应起来。</p>
<h2 id="2-Region-Proposal-Networks-RPN"><a href="#2-Region-Proposal-Networks-RPN" class="headerlink" title="2 Region Proposal Networks(RPN)"></a>2 Region Proposal Networks(RPN)</h2><p>经典的检测方法生成检测框都非常耗时，如OpenCV adaboost使用滑动窗口+图像金字塔生成检测框；或如R-CNN使用SS(Selective<br>Search)方法生成检测框。而Faster RCNN则抛弃了传统的滑动窗口和SS方法，直接使用RPN生成检测框，这也是Faster<br>R-CNN的巨大优势，能极大提升检测框的生成速度。</p>
<p><img src="/Faster%20RCNN%20%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/v2-1908feeaba591d28bee3c4a754cca282_b.jpg" alt><br>图4 RPN网络结构</p>
<p>上图4展示了RPN网络的具体结构。可以看到RPN网络实际分为2条线，上面一条通过softmax分类anchors获得positive和negative分类，下面一条用于计算对于anchors的bounding<br>box regression偏移量，以获得精确的proposal。而最后的Proposal层则负责综合positive anchors和对应bounding<br>box regression偏移量获取proposals，同时剔除太小和超出边界的proposals。其实整个网络到了Proposal<br>Layer这里，就完成了相当于目标定位的功能。</p>
<h2 id="2-1-多通道图像卷积基础知识介绍"><a href="#2-1-多通道图像卷积基础知识介绍" class="headerlink" title="2.1 多通道图像卷积基础知识介绍"></a>2.1 多通道图像卷积基础知识介绍</h2><p>在介绍RPN前，还要多解释几句基础知识，已经懂的看官老爷跳过就好。</p>
<ol>
<li>对于单通道图像+单卷积核做卷积，第一章中的图3已经展示了； </li>
<li>对于多通道图像+多卷积核做卷积，计算方式如下： </li>
</ol>
<p><img src="/Faster%20RCNN%20%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/v2-8d72777321cbf1336b79d839b6c7f9fc_b.jpg" alt><br>图5 多通道卷积计算方式</p>
<p>如图5，输入有3个通道，同时有2个卷积核。对于每个卷积核，先在输入3个通道分别作卷积，再将3个通道结果加起来得到卷积输出。所以对于某个卷积层，无论输入图像有多少个通道，输出图像通道数总是等于卷积核数量！</p>
<p>对多通道图像做1x1卷积，其实就是将输入图像于每个通道乘以卷积系数后加在一起，即相当于把原图像中本来各个独立的通道“联通”在了一起。</p>
<h2 id="2-2-anchors"><a href="#2-2-anchors" class="headerlink" title="2.2 anchors"></a>2.2 anchors</h2><p>提到RPN网络，就不能不说anchors。所谓anchors，实际上就是一组由rpn/generate_anchors.py生成的矩形。直接运行作者demo中的generate_anchors.py可以得到以下输出：</p>
<pre><code>[[ -84.  -40.   99.   55.]
 [-176.  -88.  191.  103.]
 [-360. -184.  375.  199.]
 [ -56.  -56.   71.   71.]
 [-120. -120.  135.  135.]
 [-248. -248.  263.  263.]
 [ -36.  -80.   51.   95.]
 [ -80. -168.   95.  183.]
 [-168. -344.  183.  359.]]
</code></pre><p>其中每行的4个值  <script type="math/tex">\displaystyle (x_1, y_1, x_2, y_2)</script><br>表矩形左上和右下角点坐标。9个矩形共有3种形状，长宽比为大约为  <script type="math/tex">\displaystyle \text{width:height}\in\\{1:1,
1:2, 2:1\\}</script>  三种，如图6。实际上通过anchors就引入了检测中常用到的多尺度方法。</p>
<p><img src="/Faster%20RCNN%20%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/v2-7abead97efcc46a3ee5b030a2151643f_b.jpg" alt><br>图6 anchors示意图</p>
<p>注：关于上面的anchors size，其实是根据检测图像设置的。在python<br>demo中，会把任意大小的输入图像reshape成800x600（即图2中的M=800，N=600）。再回头来看anchors的大小，anchors中长宽1:2中最大为352x704，长宽2:1中最大736x384，基本是cover了800x600的各个尺度和形状。</p>
<p>那么这9个anchors是做什么的呢？借用Faster RCNN论文中的原图，如图7，遍历Conv layers计算获得的feature<br>maps，为每一个点都配备这9种anchors作为初始的检测框。这样做获得检测框很不准确，不用担心，后面还有2次bounding box<br>regression可以修正检测框位置。</p>
<p><img src="/Faster%20RCNN%20%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/v2-c93db71cc8f4f4fd8cfb4ef2e2cef4f4_b.jpg" alt><br>图7</p>
<p>解释一下上面这张图的数字。</p>
<ol>
<li>在原文中使用的是ZF model中，其Conv Layers中最后的conv5层num_output=256，对应生成256张特征图，所以相当于feature map每个点都是256-dimensions </li>
<li>在conv5之后，做了rpn_conv/3x3卷积且num_output=256，相当于每个点又融合了周围3x3的空间信息（猜测这样做也许更鲁棒？反正我没测试），同时256-d不变（如图4和图7中的红框） </li>
<li>假设在conv5 feature map中每个点上有k个anchor（默认k=9），而每个anhcor要分positive和negative，所以每个点由256d feature转化为cls=2k scores；而每个anchor都有(x, y, w, h)对应4个偏移量，所以reg=4k coordinates </li>
<li>补充一点，全部anchors拿去训练太多了，训练程序会在合适的anchors中 <strong>随机</strong> 选取128个postive anchors+128个negative anchors进行训练（什么是合适的anchors下文5.1有解释） </li>
</ol>
<p>注意，在本文讲解中使用的VGG conv5 num_output=512，所以是512d，其他类似。</p>
<p><strong>其实RPN最终就是在原图尺度上，设置了密密麻麻的候选Anchor。然后用cnn去判断哪些Anchor是里面有目标的positive<br>anchor，哪些是没目标的negative anchor。所以，仅仅是个二分类而已！</strong></p>
<p>那么Anchor一共有多少个？原图800x600，VGG下采样16倍，feature map每个点设置9个Anchor，所以：</p>
<script type="math/tex; mode=display">\displaystyle \text{ceil}(800/16) \times \text{ceil}(600/16) \times
9=50\times38 \times9=17100</script><p>其中ceil()表示向上取整，是因为VGG输出的feature map size= 50*38。</p>
<p><img src="/Faster%20RCNN%20%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/v2-4b15828dfee19be726835b671748cc4d_b.jpg" alt><br>图8 Gernerate<br>Anchors</p>
<h2 id="2-3-softmax判定positive与negative"><a href="#2-3-softmax判定positive与negative" class="headerlink" title="2.3 softmax判定positive与negative"></a>2.3 softmax判定positive与negative</h2><p>一副MxN大小的矩阵送入Faster RCNN网络后，到RPN网络变为(M/16)x(N/16)，不妨设<br>W=M/16，H=N/16。在进入reshape与softmax之前，先做了1x1卷积，如图9：</p>
<p><img src="/Faster%20RCNN%20%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/v2-1ab4b6c3dd607a5035b5203c76b078f3_b.jpg" alt><br>图9<br>RPN中判定positive/negative网络结构</p>
<p>该1x1卷积的caffe prototxt定义如下：</p>
<pre><code>layer {
  name: &quot;rpn_cls_score&quot;
  type: &quot;Convolution&quot;
  bottom: &quot;rpn/output&quot;
  top: &quot;rpn_cls_score&quot;
  convolution_param {
    num_output: 18   # 2(positive/negative) * 9(anchors)
    kernel_size: 1 pad: 0 stride: 1
  }
}
</code></pre><p>可以看到其num_output=18，也就是经过该卷积的输出图像为WxHx18大小（注意第二章开头提到的卷积计算方式）。这也就刚好对应了feature<br>maps每一个点都有9个anchors，同时每个anchors又有可能是positive和negative，所有这些信息都保存WxHx(9*2)大小的矩阵。为何这样做？后面接softmax分类获得positive<br>anchors，也就相当于初步提取了检测目标候选区域box（一般认为目标在positive anchors中）。</p>
<p>那么为何要在softmax前后都接一个reshape<br>layer？其实只是为了便于softmax分类，至于具体原因这就要从caffe的实现形式说起了。在caffe基本数据结构blob中以如下形式保存数据：</p>
<pre><code>blob=[batch_size, channel，height，width]
</code></pre><p>对应至上面的保存positive/negative anchors的矩阵，其在caffe blob中的存储形式为[1, 2x9, H,<br>W]。而在softmax分类时需要进行positive/negative二分类，所以reshape layer会将其变为[1, 2, 9xH,<br>W]大小，即单独“腾空”出来一个维度以便softmax分类，之后再reshape回复原状。贴一段caffe<br>softmax_loss_layer.cpp的reshape函数的解释，非常精辟：</p>
<pre><code>&quot;Number of labels must match number of predictions; &quot;
&quot;e.g., if softmax axis == 1 and prediction shape is (N, C, H, W), &quot;
&quot;label count (number of labels) must be N*H*W, &quot;
&quot;with integer values in {0, 1, ..., C-1}.&quot;;
</code></pre><p>综上所述，RPN网络中利用anchors和softmax初步提取出positive<br>anchors作为候选区域（另外也有实现用sigmoid代替softmax，原理类似）。</p>
<h2 id="2-4-bounding-box-regression原理"><a href="#2-4-bounding-box-regression原理" class="headerlink" title="2.4 bounding box regression原理"></a>2.4 bounding box regression原理</h2><p>如图9所示绿色框为飞机的Ground Truth(GT)，红色为提取的positive<br>anchors，即便红色的框被分类器识别为飞机，但是由于红色的框定位不准，这张图相当于没有正确的检测出飞机。所以我们希望采用一种方法对红色的框进行微调，使得positive<br>anchors和GT更加接近。</p>
<p><img src="/Faster%20RCNN%20%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/v2-93021a3c03d66456150efa1da95416d3_b.jpg" alt><br>图10</p>
<p>对于窗口一般使用四维向量  <script type="math/tex">\displaystyle (x, y, w, h)</script>  表示，分别表示窗口的中心点坐标和宽高。对于图<br>11，红色的框A代表原始的positive Anchors，绿色的框G代表目标的GT，我们的目标是寻找一种关系，使得输入原始的anchor<br>A经过映射得到一个跟真实窗口G更接近的回归窗口G’，即：</p>
<ul>
<li>给定anchor  <script type="math/tex">\displaystyle A=(A_{x}, A_{y}, A_{w}, A_{h})</script>  和  <script type="math/tex">\displaystyle GT=[G_{x}, G_{y}, G_{w}, G_{h}]</script> </li>
<li>寻找一种变换 <strong>F，</strong> 使得：  <script type="math/tex">\displaystyle F(A_{x}, A_{y}, A_{w}, A_{h})=(G_{x}^{'}, G_{y}^{'}, G_{w}^{'}, G_{h}^{'})</script>  ，其中  <script type="math/tex">\displaystyle (G_{x}^{'}, G_{y}^{'}, G_{w}^{'}, G_{h}^{'})≈(G_{x}, G_{y}, G_{w}, G_{h})</script> </li>
</ul>
<p><img src="/Faster%20RCNN%20%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/v2-ea7e6e48662bfa68ec73bdf32f36bb85_b.jpg" alt><br>图11</p>
<p>那么经过何种变换 <strong>F</strong> 才能从图10中的anchor A变为G’呢？ 比较简单的思路就是:</p>
<ul>
<li>先做平移 </li>
</ul>
<script type="math/tex; mode=display">\displaystyle G_x'=A_w\cdot d_x(A) +A_x\\\</script><script type="math/tex; mode=display">\displaystyle G_y'=A_h\cdot d_y(A) +A_y\\\</script><ul>
<li>再做缩放 </li>
</ul>
<script type="math/tex; mode=display">\displaystyle G_w'=A_w\cdot \exp(d_w(A))\\\</script><script type="math/tex; mode=display">\displaystyle G_h'=A_h\cdot \exp(d_h(A))\\\</script><p>观察上面4个公式发现，需要学习的是  <script type="math/tex">\displaystyle d_{x}(A),d_{y}(A),d_{w}(A),d_{h}(A)</script><br>这四个变换。当输入的anchor A与GT相差较小时，可以认为这种变换是一种线性变换， 那么就可以用线性回归来建模对窗口进行微调（注意，只有当anchors<br>A和GT比较接近时，才能使用线性回归模型，否则就是复杂的非线性问题了）。</p>
<p>接下来的问题就是如何通过线性回归获得  <script type="math/tex">\displaystyle d_{x}(A),d_{y}(A),d_{w}(A),d_{h}(A)</script><br>了。线性回归就是给定输入的特征向量X, 学习一组参数W, 使得经过线性回归后的值跟真实值Y非常接近，即  <script type="math/tex">\displaystyle Y=WX</script><br>。对于该问题，输入X是cnn feature map，定义为Φ；同时还有训练传入A与GT之间的变换量，即  <script type="math/tex">\displaystyle (t_{x},
t_{y}, t_{w}, t_{h})</script>  。输出是  <script type="math/tex">\displaystyle
d_{x}(A),d_{y}(A),d_{w}(A),d_{h}(A)</script>  四个变换。那么目标函数可以表示为：</p>
<script type="math/tex; mode=display">\displaystyle d_*(A)=W_*^T\cdot \phi(A)\\\</script><p>其中  <script type="math/tex">\displaystyle \phi(A)</script>  是对应anchor的feature map组成的特征向量，  <script type="math/tex">\displaystyle
W_*</script>  是需要学习的参数，  <script type="math/tex">\displaystyle d_*(A)\\\</script><br>是得到的预测值（<em>表示x，y，w，h，也就是每一个变换对应一个上述目标函数）。为了让预测值   $$\displaystyle d_</em>(A)<script type="math/tex">与真实值</script>\displaystyle t_*$$  差距最小，设计L1损失函数：</p>
<script type="math/tex; mode=display">\displaystyle \text{Loss}=\sum_{i}^{N}{|t_*^i-W_*^T\cdot \phi(A^i)|} \\\</script><p>函数优化目标为：</p>
<script type="math/tex; mode=display">\displaystyle \hat{W}_*=\text{argmin}_{W_*}\sum_{i}^{n}|t_*^i- W_*^T\cdot
\phi(A^i)|+\lambda||W_*|| \\\</script><p>为了方便描述，这里以L1损失为例介绍，而真实情况中一般使用soomth-L1损失。</p>
<p>需要说明，只有在GT与需要回归框位置比较接近时，才可近似认为上述线性变换成立。<br>说完原理，对应于Faster RCNN原文，positive anchor与ground truth之间的平移量  <script type="math/tex">\displaystyle
(t_x, t_y)</script>  与尺度因子  <script type="math/tex">\displaystyle (t_w, t_h)</script>  如下：</p>
<script type="math/tex; mode=display">\displaystyle t_x=(x-x_a)/w_a\ \ \ \ t_y=(y-y_a)/h_a\\\</script><script type="math/tex; mode=display">\displaystyle t_w=\log(w/w_a)\ \ \ \ t_h=\log(h/h_a)\\\</script><p>对于训练bouding box regression网络回归分支，输入是cnn feature Φ，监督信号是Anchor与GT的差距 <script type="math/tex">\displaystyle (t_x, t_y, t_w, t_h)</script>  ，即训练目标是：输入Φ的情况下使网络输出与监督信号尽可能接近。那么当bouding boxregression工作时，再输入Φ时，回归网络分支的输出就是每个Anchor的平移量和变换尺度  <script type="math/tex">\displaystyle (t_x, t_y,t_w, t_h)</script>  ，显然即可用来修正Anchor位置了。</p>
<h2 id="2-5-对proposals进行bounding-box-regression"><a href="#2-5-对proposals进行bounding-box-regression" class="headerlink" title="2.5 对proposals进行bounding box regression"></a>2.5 对proposals进行bounding box regression</h2><p>在了解bounding box regression后，再回头来看RPN网络第二条线路，如图12。</p>
<p><img src="/Faster%20RCNN%20%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/v2-8241c8076d60156248916fe2f1a5674a_b.jpg" alt><br>图12 RPN中的bbox reg</p>
<p>先来看一看上图11中1x1卷积的caffe prototxt定义：</p>
<pre><code>layer {
  name: &quot;rpn_bbox_pred&quot;
  type: &quot;Convolution&quot;
  bottom: &quot;rpn/output&quot;
  top: &quot;rpn_bbox_pred&quot;
  convolution_param {
    num_output: 36   # 4 * 9(anchors)
    kernel_size: 1 pad: 0 stride: 1
  }
}
</code></pre><p>可以看到其 num_output=36，即经过该卷积输出图像为WxHx36，在caffe blob存储为[1, 4x9, H,<br>W]，这里相当于feature maps每个点都有9个anchors，每个anchors又都有4个用于回归的</p>
<script type="math/tex; mode=display">\displaystyle [d_{x}(A),d_{y}(A),d_{w}(A),d_{h}(A)]\\\</script><p>变换量。</p>
<p>回到图8，VGG输出  <script type="math/tex">\displaystyle 50*38*512</script>  的特征，对应设置  <script type="math/tex">\displaystyle 50*38*k</script><br>个anchors，而RPN输出：</p>
<ol>
<li>大小为  <script type="math/tex">\displaystyle 50*38*2k</script>  的positive/negative softmax分类特征矩阵 </li>
<li>大小为  <script type="math/tex">\displaystyle 50*38*4k</script>  的regression坐标回归特征矩阵 </li>
</ol>
<p>恰好满足RPN完成positive/negative分类+bounding box regression坐标回归.</p>
<h2 id="2-6-Proposal-Layer"><a href="#2-6-Proposal-Layer" class="headerlink" title="2.6 Proposal Layer"></a>2.6 Proposal Layer</h2><p>Proposal Layer负责综合所有  <script type="math/tex">\displaystyle [d_{x}(A),d_{y}(A),d_{w}(A),d_{h}(A)]</script><br>变换量和positive anchors，计算出精准的proposal，送入后续RoI Pooling Layer。还是先来看看Proposal<br>Layer的caffe prototxt定义：</p>
<pre><code>layer {
  name: &#39;proposal&#39;
  type: &#39;Python&#39;
  bottom: &#39;rpn_cls_prob_reshape&#39;
  bottom: &#39;rpn_bbox_pred&#39;
  bottom: &#39;im_info&#39;
  top: &#39;rois&#39;
  python_param {
    module: &#39;rpn.proposal_layer&#39;
    layer: &#39;ProposalLayer&#39;
    param_str: &quot;&#39;feat_stride&#39;: 16&quot;
  }
}
</code></pre><p>Proposal Layer有3个输入：positive vs negative<br>anchors分类器结果rpn_cls_prob_reshape，对应的bbox reg的  <script type="math/tex">\displaystyle
[d_{x}(A),d_{y}(A),d_{w}(A),d_{h}(A)]</script><br>变换量rpn_bbox_pred，以及im_info；另外还有参数feat_stride=16，这和图4是对应的。<br>首先解释im_info。对于一副任意大小PxQ图像，传入Faster RCNN前首先reshape到固定MxN，im_info=[M, N,<br>scale_factor]则保存了此次缩放的所有信息。然后经过Conv<br>Layers，经过4次pooling变为WxH=(M/16)x(N/16)大小，其中feature_stride=16则保存了该信息，用于计算anchor偏移量。</p>
<p><img src="/Faster%20RCNN%20%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/v2-1e43500c7cc9a9de211d737bc347ced9_b.jpg" alt><br>图13</p>
<p>Proposal Layer forward（caffe layer的前传函数）按照以下顺序依次处理：</p>
<ol>
<li>生成anchors，利用  <script type="math/tex">\displaystyle [d_{x}(A),d_{y}(A),d_{w}(A),d_{h}(A)]</script>  对所有的anchors做bbox regression回归（这里的anchors生成和训练时完全一致） </li>
<li>按照输入的positive softmax scores由大到小排序anchors，提取前pre_nms_topN(e.g. 6000)个anchors，即提取修正位置后的positive anchors </li>
<li>限定超出图像边界的positive anchors为图像边界，防止后续roi pooling时proposal超出图像边界（见文章底部QA部分图21） </li>
<li>剔除尺寸非常小的positive anchors </li>
<li>对剩余的positive anchors进行NMS（nonmaximum suppression） </li>
<li>Proposal Layer有3个输入：positive和negative anchors分类器结果rpn_cls_prob_reshape，对应的bbox reg的(e.g. 300)结果作为proposal输出 </li>
</ol>
<p>之后输出proposal=[x1, y1, x2,<br>y2]，注意，由于在第三步中将anchors映射回原图判断是否超出边界，所以这里输出的proposal是对应MxN输入图像尺度的，这点在后续网络中有用。另外我认为，严格意义上的检测应该到此就结束了，后续部分应该属于识别了。</p>
<p>RPN网络结构就介绍到这里，总结起来就是：<br><strong>生成anchors - &gt; softmax分类器提取positvie anchors -&gt; bbox reg回归positive anchors -&gt;<br>Proposal Layer生成proposals </strong></p>
<h2 id="3-RoI-pooling"><a href="#3-RoI-pooling" class="headerlink" title="3 RoI pooling"></a>3 RoI pooling</h2><p>而RoI Pooling层则负责收集proposal，并计算出proposal feature maps，送入后续网络。从图2中可以看到Rol<br>pooling层有2个输入：</p>
<ol>
<li>原始的feature maps </li>
<li>RPN输出的proposal boxes（大小各不相同） </li>
</ol>
<h2 id="3-1-为何需要RoI-Pooling"><a href="#3-1-为何需要RoI-Pooling" class="headerlink" title="3.1 为何需要RoI Pooling"></a>3.1 为何需要RoI Pooling</h2><p>先来看一个问题：对于传统的CNN（如AlexNet和VGG），当网络训练好后输入的图像尺寸必须是固定值，同时网络输出也是固定大小的vector or<br>matrix。如果输入图像大小不定，这个问题就变得比较麻烦。有2种解决办法：</p>
<ol>
<li>从图像中crop一部分传入网络 </li>
<li>将图像warp成需要的大小后传入网络 </li>
</ol>
<p><img src="/Faster%20RCNN%20%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/v2-e525342cbde476a11c48a6be393f226c_b.jpg" alt><br>图14 crop与warp破坏图像原有结构信息</p>
<p>两种办法的示意图如图14，可以看到无论采取那种办法都不好，要么crop后破坏了图像的完整结构，要么warp破坏了图像原始形状信息。</p>
<p>回忆RPN网络生成的proposals的方法：对positive anchors进行bounding box<br>regression，那么这样获得的proposals也是大小形状各不相同，即也存在上述问题。所以Faster R-CNN中提出了RoI<br>Pooling解决这个问题。不过RoI Pooling确实是从 <a href="https://link.zhihu.com/?target=https%3A//arxiv.org/abs/1406.4729"> Spatial Pyramid Pooling
</a><br>发展而来，但是限于篇幅这里略去不讲，有兴趣的读者可以自行查阅相关论文。</p>
<h2 id="3-2-RoI-Pooling原理"><a href="#3-2-RoI-Pooling原理" class="headerlink" title="3.2 RoI Pooling原理"></a>3.2 RoI Pooling原理</h2><p>分析之前先来看看RoI Pooling Layer的caffe prototxt的定义：</p>
<pre><code>layer {
  name: &quot;roi_pool5&quot;
  type: &quot;ROIPooling&quot;
  bottom: &quot;conv5_3&quot;
  bottom: &quot;rois&quot;
  top: &quot;pool5&quot;
  roi_pooling_param {
    pooled_w: 7
    pooled_h: 7
    spatial_scale: 0.0625 # 1/16
  }
}
</code></pre><p>其中有新参数pooled_w和pooled_h，另外一个参数spatial_scale认真阅读的读者肯定已经知道知道用途。RoI Pooling layer<br>forward过程：</p>
<ul>
<li>由于proposal是对应MXN尺度的，所以首先使用spatial_scale参数将其映射回(M/16)X(N/16)大小的feature map尺度； </li>
<li>再将每个proposal对应的feature map区域水平分为  <script type="math/tex">\displaystyle \text{pooled_w}\times \text{pooled_h}</script>  的网格； </li>
<li>对网格的每一份都进行max pooling处理。 </li>
</ul>
<p>这样处理后，即使大小不同的proposal输出结果都是  <script type="math/tex">\displaystyle \text{pooled_w}\times
\text{pooled_h}</script>  固定大小，实现了固定长度输出。</p>
<p><img src="/Faster%20RCNN%20%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/v2-e3108dc5cdd76b871e21a4cb64001b5c_b.jpg" alt><br>图15 proposal示意图</p>
<h2 id="4-Classification"><a href="#4-Classification" class="headerlink" title="4 Classification"></a>4 Classification</h2><p>Classification部分利用已经获得的proposal feature maps，通过full<br>connect层与softmax计算每个proposal具体属于那个类别（如人，车，电视等），输出cls_prob概率向量；同时再次利用bounding<br>box<br>regression获得每个proposal的位置偏移量bbox_pred，用于回归更加精确的目标检测框。Classification部分网络结构如图16。</p>
<p><img src="/Faster%20RCNN%20%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/v2-9377a45dc8393d546b7b52a491414ded_b.jpg" alt><br>图16 Classification部分网络结构图</p>
<p>从RoI Pooling获取到7x7=49大小的proposal feature maps后，送入后续网络，可以看到做了如下2件事：</p>
<ol>
<li>通过全连接和softmax对proposals进行分类，这实际上已经是识别的范畴了 </li>
<li>再次对proposals进行bounding box regression，获取更高精度的rect box </li>
</ol>
<p>这里来看看全连接层InnerProduct layers，简单的示意图如图17，</p>
<p><img src="/Faster%20RCNN%20%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/v2-38594a97f33ff56fc72542a20a78116d_b.jpg" alt><br>图17 全连接层示意图</p>
<p>其计算公式如下：</p>
<p><img src="/Faster%20RCNN%20%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/v2-f56d3209f9a7d5f27d77ead7489ab70f_b.jpg" alt></p>
<p>其中W和bias B都是预先训练好的，即大小是固定的，当然输入X和输出Y也就是固定大小。所以，这也就印证了之前Roi<br>Pooling的必要性。到这里，我想其他内容已经很容易理解，不在赘述了。</p>
<h2 id="5-Faster-RCNN训练"><a href="#5-Faster-RCNN训练" class="headerlink" title="5 Faster RCNN训练"></a>5 Faster RCNN训练</h2><p>Faster R-CNN的训练，是在已经训练好的model（如VGG_CNN_M_1024，VGG，ZF）的基础上继续进行训练。实际中训练过程分为6个步骤：</p>
<ol>
<li>在已经训练好的model上，训练RPN网络，对应stage1_rpn_train.pt </li>
<li>利用步骤1中训练好的RPN网络，收集proposals，对应rpn_test.pt </li>
<li>第一次训练Fast RCNN网络，对应stage1_fast_rcnn_train.pt </li>
<li>第二训练RPN网络，对应stage2_rpn_train.pt </li>
<li>再次利用步骤4中训练好的RPN网络，收集proposals，对应rpn_test.pt </li>
<li>第二次训练Fast RCNN网络，对应stage2_fast_rcnn_train.pt </li>
</ol>
<p>可以看到训练过程类似于一种“迭代”的过程，不过只循环了2次。至于只循环了2次的原因是应为作者提到：”A similar alternating<br>training can be run for more iterations, but we have observed negligible<br>improvements”，即循环更多次没有提升了。接下来本章以上述6个步骤讲解训练过程。</p>
<p>下面是一张训练过程流程图，应该更加清晰（ <a href="https://zhuanlan.zhihu.com/p/24916624" target="_blank" rel="noopener"> 图来源 </a> ）。</p>
<p><img src="/Faster%20RCNN%20%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/v2-ed3148b3b8bc3fbfc433c7af31fe67d5_b.jpg" alt><br>图18 Faster RCNN训练步骤</p>
<h2 id="5-1-训练RPN网络"><a href="#5-1-训练RPN网络" class="headerlink" title="5.1 训练RPN网络"></a>5.1 训练RPN网络</h2><p>在该步骤中，首先读取RBG提供的预训练好的model（本文使用VGG），开始迭代训练。来看看stage1_rpn_train.pt网络结构，如图19。</p>
<p><img src="/Faster%20RCNN%20%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/v2-c39aef1d06e08e4e0cec96b10f50a779_b.jpg" alt><br>图19<br>stage1_rpn_train.pt（考虑图片大小，Conv Layers中所有的层都画在一起了，如红圈所示，后续图都如此处理）</p>
<p>与检测网络类似的是，依然使用Conv Layers提取feature maps。整个网络使用的Loss如下：</p>
<script type="math/tex; mode=display">\displaystyle
\text{L}(\{p_i\},\{t_i\})=\frac{1}{N_{\text{cls}}}\sum_{i}\text{L}_\text{cls}(p_i,p_i^*)+\lambda\frac{1}{N_{\text{reg}}}\sum_{i}p_i^*\text{L}_\text{reg}(t_i,t_i^*)\\\</script><p>上述公式中  <script type="math/tex">\displaystyle i</script>  表示anchors index，  <script type="math/tex">\displaystyle p_{i}</script><br>表示positive softmax probability，  <script type="math/tex">\displaystyle p_{i}^{*}</script>  代表对应的GT<br>predict概率（即当第i个anchor与GT间IoU&gt;0.7，认为是该anchor是positive，  <script type="math/tex">\displaystyle
p_{i}^{*}=1</script>  ；反之IoU&lt;0.3时，认为是该anchor是negative，  <script type="math/tex">\displaystyle p_{i}^{*}=0</script><br>；至于那些0.3&lt;IoU&lt;0.7的anchor则不参与训练）；  <script type="math/tex">\displaystyle t</script>  代表predict bounding box，</p>
<script type="math/tex; mode=display">\displaystyle t^{*}$$  代表对应positive anchor对应的GT box。可以看到，整个Loss分为2部分：

  1. cls loss，即rpn_cls_loss层计算的softmax loss，用于分类anchors为positive与negative的网络训练 
  2. reg loss，即rpn_loss_bbox层计算的soomth L1 loss，用于bounding box regression网络训练。注意在该loss中乘了  $$\displaystyle p_{i}^{*}$$  ，相当于只关心positive anchors的回归（其实在回归中也完全没必要去关心negative）。 

由于在实际过程中，  $$\displaystyle N_\text{cls}$$  和  $$\displaystyle N_\text{reg}</script><p>差距过大，用参数λ平衡二者（如  <script type="math/tex">\displaystyle N_\text{cls}=256</script>  ，  <script type="math/tex">\displaystyle
N_\text{reg}=2400</script>  时设置  <script type="math/tex">\displaystyle
λ=\frac{N_\text{reg}}{N_\text{cls}}\approx10</script><br>），使总的网络Loss计算过程中能够均匀考虑2种Loss。这里比较重要是  <script type="math/tex">\displaystyle \text{L}_\text{reg}</script><br>使用的soomth L1 loss，计算公式如下：</p>
<script type="math/tex; mode=display">\displaystyle
\text{L}_\text{reg}(t_i,t_i^*)=\sum_{i\in\\{x,y,w,h\\}}^{}\text{smooth}_{\text{L1}}(t_i-
t_i^*)\\\</script><script type="math/tex; mode=display">\displaystyle \text{soomth}_\text{L1}(x) = \begin{cases} 0.5x^2 & \text{if
|x|<1 } \\\ |x|-0.5 & \text{otherwise} \end{cases}\\\</script><p>了解数学原理后，反过来看图18：</p>
<ol>
<li>在RPN训练阶段，rpn-data（python AnchorTargetLayer）层会按照和test阶段Proposal层完全一样的方式生成Anchors用于训练 </li>
<li>对于rpn_loss_cls，输入的rpn_cls_scors_reshape和rpn_labels分别对应  <script type="math/tex">\displaystyle p</script>  与  <script type="math/tex">\displaystyle p^{*}</script>  ，  <script type="math/tex">\displaystyle N_\text{cls}</script>  参数隐含在  <script type="math/tex">\displaystyle p</script>  与  <script type="math/tex">\displaystyle p^{*}</script>  的caffe blob的大小中 </li>
<li>对于rpn_loss_bbox，输入的rpn_bbox_pred和rpn_bbox_targets分别对应  <script type="math/tex">\displaystyle t</script>  与  <script type="math/tex">\displaystyle t^{*}</script>  ，rpn_bbox_inside_weigths对应  <script type="math/tex">\displaystyle p^{*}</script>  ，rpn_bbox_outside_weigths未用到（从soomth_L1_Loss layer代码中可以看到），而  <script type="math/tex">\displaystyle N_\text{reg}</script>  同样隐含在caffe blob大小中 </li>
</ol>
<p>这样，公式与代码就完全对应了。特别需要注意的是，在训练和检测阶段生成和存储anchors的顺序完全一样，这样训练结果才能被用于检测！</p>
<h2 id="5-2-通过训练好的RPN网络收集proposals"><a href="#5-2-通过训练好的RPN网络收集proposals" class="headerlink" title="5.2 通过训练好的RPN网络收集proposals"></a>5.2 通过训练好的RPN网络收集proposals</h2><p>在该步骤中，利用之前的RPN网络，获取proposal rois，同时获取positive softmax<br>probability，如图20，然后将获取的信息保存在python pickle文件中。该网络本质上和检测中的RPN网络一样，没有什么区别。</p>
<p><img src="/Faster%20RCNN%20%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/v2-1ac5f8a2899ee413464ecf7866f8f840_b.jpg" alt><br>图20 rpn_test.pt</p>
<h2 id="5-3-训练Faster-RCNN网络"><a href="#5-3-训练Faster-RCNN网络" class="headerlink" title="5.3 训练Faster RCNN网络"></a>5.3 训练Faster RCNN网络</h2><p>读取之前保存的pickle文件，获取proposals与positive probability。从data层输入网络。然后：</p>
<ol>
<li>将提取的proposals作为rois传入网络，如图21蓝框 </li>
<li>计算bbox_inside_weights+bbox_outside_weights，作用与RPN一样，传入soomth_L1_loss layer，如图21绿框 </li>
</ol>
<p>这样就可以训练最后的识别softmax与最终的bounding box regression了。</p>
<p><img src="/Faster%20RCNN%20%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/v2-fbece817952865689187e68f0af86792_b.jpg" alt><br>图21 stage1_fast_rcnn_train.pt</p>
<p>之后的stage2训练都是大同小异，不再赘述了。Faster R-CNN还有一种end-to-<br>end的训练方式，可以一次完成train，有兴趣请自己看作者GitHub吧。</p>
<p><a href="https://link.zhihu.com/?target=https%3A//github.com/rbgirshick/py-faster-
rcnn"> rbgirshick py-faster-rcnn
</a></p>
<h2 id="QA"><a href="#QA" class="headerlink" title="QA"></a>QA</h2><p>此篇文章初次成文于2016年内部学习分享，再后来经多次修正和完善成为现在的样子。感谢大家一直以来的支持，现在总结常见疑问回答如下：</p>
<ul>
<li>为什么Anchor坐标中有负数 </li>
</ul>
<p>回顾anchor生成步骤：首先生成9个base anchor，然后通过坐标偏移在  <script type="math/tex">\displaystyle 50 \ast 38</script>  大小的$\displaystyle \frac{1}{16}$  下采样FeatureMap每个点都放上这9个base anchor，就形成了 $\displaystyle 50 \ast 38 \ast k$   个anhcors。至于这9个base anchor坐标是什么其实并不重要，不同代码实现也许不同。</p>
<p>显然这里面有一部分边缘anchors会超出图像边界，而真实中不会有超出图像的目标，所以会有clip anchor步骤。</p>
<p><img src="/Faster%20RCNN%20%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/v2-9d67146e0cb10397d8c2170794412608_b.jpg" alt><br>图21 clip anchor</p>
<ul>
<li>Anchor到底与网络输出如何对应 </li>
</ul>
<p>VGG输出  <script type="math/tex">\displaystyle 50*38*512</script>  的特征，对应设置  <script type="math/tex">\displaystyle 50*38*k</script><br>个anchors，而RPN输出  <script type="math/tex">\displaystyle 50*38*2k</script>  的分类特征矩阵和  <script type="math/tex">\displaystyle
50*38*4k</script>  的坐标回归特征矩阵。</p>
<p><img src="/Faster%20RCNN%20%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/v2-82196feb7b528d76411feb90bfec2af4_b.jpg" alt><br>图22 anchor与网络输出如何对应方式</p>
<p>其实在实现过程中，每个点的  <script type="math/tex">\displaystyle 2k</script>  个分类特征与  <script type="math/tex">\displaystyle 4k</script>  回归特征，与</p>
<p><script type="math/tex">\displaystyle k</script>  个anchor逐个对应即可，这实际是一种“人为设置的逻辑映射”。当然，也可以不这样设置，但是无论如何都需要保证<br><strong>在训练和测试过程中映射方式必须一致</strong> 。</p>
<ul>
<li>为何有ROI Pooling还要把输入图片resize到固定大小的MxN </li>
</ul>
<p>由于引入ROI Pooling，从原理上说Faster<br>R-CNN确实能够检测任意大小的图片。但是由于在训练的时候需要使用大batch训练网络，而不同大小输入拼batch在实现的时候代码较为复杂，而且当时以Caffe为代表的第一代深度学习框架也不如Tensorflow和PyTorch灵活，所以作者选择了把输入图片resize到固定大小的800x600。这应该算是历史遗留问题。</p>
<p>另外很多问题，都是属于具体实现问题，真诚的建议读者阅读代码自行理解。</p>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a href="https://link.zhihu.com/?target=http%3A//www.telesens.co/2018/03/11/object-
detection-and-classification-using-r-cnns/"> Object Detection and Classification using R-CNNs
</a></p>
<h2 id="拓展"><a href="#拓展" class="headerlink" title="拓展"></a>拓展</h2><p>检测算法的评价指标：</p>
<p><a href="https://www.zhihu.com/question/288198143/answer/482600906" target="_blank" rel="noopener"> 请问目标检测中的detection performance一般是指那个指标，还是一个统称？
</a></p>
<p>Faster RCNN在文字检测中的应用：CTPN</p>
<p><a href="https://zhuanlan.zhihu.com/p/34757009" target="_blank" rel="noopener"> 场景文字检测—CTPN原理与实现 </a></p>
<p>Faster RCNN在高德导航中的应用：</p>
<p><a href="https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s/IJUMCOBhgXHv7VC1YT4q_g"> 机器学习在交通标志检测与精细分类中的应用
</a></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color2">python</a>
        		</li>
      		
		</ul>
	</div>

      
	<div class="article-category tagcloud">
		<i class="icon-book icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="/categories/web前端//" class="article-tag-list-link color1">web前端</a>
        		</li>
      		
		</ul>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/Faster%20RCNN%20%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-揭开深度学习的神秘面纱" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/">揭开深度学习的神秘面纱</a>
    </h1>
  

        
        <a href="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/" class="archive-article-date">
  	<time datetime="2020-03-24T03:05:43.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2020-03-24</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>分享的内容分四部分，分别是 <strong>入门、基础、进阶和发展趋势</strong> 。</p>
<h2 id="深度学习简单入门"><a href="#深度学习简单入门" class="headerlink" title="深度学习简单入门"></a><strong>深度学习简单入门</strong></h2><p>2016年3月份，AlphaGo以4：1战胜韩国围棋手李世石，一举震惊了世界。</p>
<p>人工智能一下就引爆了整个世界。有种趋势就是，不谈人工智能，就落伍了。</p>
<p>以前资本圈融资都谈的是“互联网+”，现在都在谈“AI+”了。</p>
<p>有人说，马上人工智能时代就要来了，甚至有人宣扬人工智能威胁论。</p>
<p>那么，当我们谈论人工智能的时候，我们究竟在谈论什么呢？</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-9e189bc1d61d604a7117bce1d5b43c74_b.jpg" alt></p>
<p>我们先来讨论下“人工智能”的定义。</p>
<p>什么叫做智能呢？所谓智能，其实就是对人某些高级功能的模拟，让计算机去完成一些以前只有人才能完成的工作，比如思考、决策、解决问题等等。</p>
<p>比如以前只有人可以进行数学计算，而现在计算机也可以进行计算，而且算的比人还准，还快，我们说计算机有一点智能了。</p>
<p>人工智能的发展经历了好几个发展阶段，从最开始的简单的逻辑推理，到中期的基于规则（Rule-<br>based）的专家系统，这些都已经有一定的的智能了，但距离我们想象的人工智能还有一大段距离。直到机器学习诞生以后，人工智能界感觉终于找到了感觉。基于机器学习的图像识别和语音识别在某些垂直领域达到了跟人相媲美的程度。人工智能终于能够达到一定的高度了。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-f8e4e1e3a5b006ab525640e540fea67f_b.jpg" alt></p>
<p>当前机器学习的应用场景非常普遍，比如图像识别、语音识别，中英文翻译，数据挖掘等，未来也会慢慢融入到各行各业。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-c94c89c39ae3727cac1f6c2448b69449_b.jpg" alt></p>
<p>虽然都是机器学习，但是背后的训练方法和模型是完全不同的。</p>
<p>根据训练的方法不同，机器学习算法可以大致分类为 <strong>监督学习、无监督学习</strong> 和 <strong>强化学习</strong> 三种。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-5060313f92529503cd3adfde9d7e267e_b.jpg" alt></p>
<p>监督学习，就是训练数据是有标签的，也就是每个数据都是标注过的，是有正确答案的。训练的时候会告诉模型什么是对的，什么的错的，然后找到输入和输出之间正确的映射关系，比如物体种类的图像识别，识别一张图片内容是只狗，还是棵树。</p>
<p>非监督学习，就是训练数据没有标签的，只有部分特征。模型自己分析数据的特征，找到数据别后隐含的架构关系，比如说自己对数据进行学习分类等等，常见的算法有聚类算法，给你一堆数据，将这数据分为几类。比如在银行的数据库中，给你所有客户的消费记录，让你挑选出哪些可以升级成VIP客户，这就是聚类算法。</p>
<p>还有一种是强化学习，目标是建立环境到行为之间的最佳映射。强化学习的训练是不需要数据的，你告诉他规则或者给他明确一个环境，让模型自己通过不断地尝试，自己根据结果来自己摸索。</p>
<p>Deep Mind的AlphaGo Zero就是通过强化学习训练的,号称花了3天的训练时间就能100：0打败AlphaGo。</p>
<p>比较适合强化学习的一般是环境到行为之间的结果规则比较明确，或者环境比较单一、不太容易受噪音干扰等等，比如下围棋的输赢等等，还可以模拟直升机起降、双足机器人行走等等。</p>
<p><strong>我们今天讨论的就是基于监督学习在图像识别领域的应用。</strong></p>
<p>接下来我们再看下人工智能的历史。</p>
<p>虽说我们感觉人工智能最近几年才开始火起来，但是这个概念一点也不新鲜。</p>
<p>起源于上世纪五、六十年代就提出人工智能的概念了，当时叫 <strong>感知机</strong><br>（perceptron），拥有输入层、输出层和一个隐含层。输入的特征向量通过隐含层变换达到输出层，在输出层得到分类结果，当时的人们对此非常乐观，号称要在10年内解决所有的问题。但是，单层感知机有一个严重得不能再严重的问题，即它对稍复杂一些的函数都无能为力（比如最为典型的“异或”逻辑），连异或都不能拟合。当时有一个专家叫明斯基，号称人工智能之父，在一次行业大会上公开承认，人工智能连一些基本的逻辑运算（比如异或运算）都无能为力，于是政府所有的资助全部都停掉了，于是进入人工智能的第一个冬天。</p>
<p>随着数学的发展，这个缺点直到上世纪八十年代才发明了 <strong>多层感知机</strong><br>克服，同时也提出了梯度下降、误差反向传播（BP）算法等当前深度学习中非常基础的算法。之前被人诟病的问题已经被解决了，希望的小火苗又重新点燃了，于是人工智能开始再次兴起。</p>
<p>但是没过多久大家发现了，虽然理论模型是完善了，但是并没有实际用途，还不能解决实际问题，于是又冷下去了，人工智能的第二个冬天降临。</p>
<p>直到2012年开始第三次兴起，也就是最近几年人工智能的热潮。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-e4ec48459dc6d7ed18a9d7157484ed1a_b.jpg" alt></p>
<p>下面我们就来第三次热潮是如何兴起的。</p>
<p>在这之前，我们先介绍一个比赛。这个比赛是一项图像识别的挑战赛，给你大量图片去做图像识别，比赛看谁的识别错误低。在2012年之前，错误率降低到30%以后，再往下降就很难了，每年只能下降个2，3个百分点。</p>
<p>直到2012年，有一个哥们叫Alex，这哥们在寝室用GPU死磕了一个卷积神经网络的模型，将识别错误率从26%下降到了16%，下降了10%左右，一举震惊了整个人工智能界，当之无愧的获得了当年的冠军。</p>
<p>从此之后，卷积神经网络一炮而红。之后每年挑战赛的冠军，胜者都是利用卷积神经网络来训练的。2015年，挑战赛的错误率已经降低到3.5%附近，而在同样的图像识别的任务，人眼的辨识错误率大概在5.1%，也就是目前的深度学习模型的识别能力已经超过了人眼。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-d25448f96d37b4b45bce30cd6a4ada61_b.jpg" alt></p>
<p>下图是最近几年比较有代表性的模型的架构。</p>
<p>大家可以看出来，深度学习的模型的发展规律，深，更深。没有最深，只有更深。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-6c0809c5b7f5ba224ea4b77389529f2a_b.jpg" alt></p>
<p>那么Alex的卷积神经网络这么厉害，是因为这个哥们是个学术大牛，有什么独创性的学术研究成果么？</p>
<p>其实并不是。</p>
<p>他所采用的模型是1998年Yann Lecun就提出了这个模型，当时Yann<br>Lecun把这个模型应用在识别手写邮编数字的识别上，取得了很好的效果，他搭建的网络，命名为Lenet。这个人的名字——Yann<br>Lecun，大家一定要记住，因为我们后面的内容将会以Lenet作为范本来讲解。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-d2a63026c01885d5dfccd838b80eb417_b.jpg" alt></p>
<p>这个模型是1998年提出来的，可为什么时隔这么多年才开始火起来呢？</p>
<p>人工智能突然爆发背后深层次的原因是什么？我总结了一下，背后的原因主要有三个：</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-7a993ea464fa612de7af43036d47fd29_b.jpg" alt></p>
<p>1.算法的成熟，尤其是随机梯度下降的方法的优化，以及一些能够有效防止过拟合的算法的提出，至于什么是随机梯度下降和过拟合，后面我们会详细讲到</p>
<p>2.数据获取，互联网的爆发，尤其是移动互联网和社交网络的普及，可以比较容易的获取大量的互联网资源，尤其是图片和视频资源，因为做深度学习训练的时候需要大量的数据。</p>
<p>3.计算能力的提升，因为要训练的数据量很大（都是百万级以上的数据），而且训练的参数也很大（有的比较深的模型有几百万甚至上千万个的参数需要同时优化），而多亏了摩尔定律，能够以较低的价格获取强大的运算能力，也多亏了Nvida，开发了GPU这个神器，可以大幅降低训练时间。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-f218a41d127071ddc51f1ea1240ca751_b.jpg" alt></p>
<p>GPU的运算速度是CPU的5-10倍左右，同样的模型需要训练，如果用CPU训练需要一个礼拜的话，那使用GPU，只需要一天时间就可以了。</p>
<p>_截止到目前，我们汇总下我们的学习内容，我们了解了人工智能的简单介绍，大致了解了人工智能的算法分类以及发展历史。_</p>
<h2 id="深度学习基础知识"><a href="#深度学习基础知识" class="headerlink" title="深度学习基础知识"></a><strong>深度学习基础知识</strong></h2><p>接下来我们了解一下基础知识。</p>
<p>我们上面也提到了，我们这次主要以卷积神经网络在图像识别领域的应用来介绍深度学习的。</p>
<p>卷积神经网络，这个词听起来非常深奥。</p>
<p>但其实没什么复杂的，我们可以分开成两个词来理解，卷积和神经网络。</p>
<p>先看下卷积。</p>
<p>卷积时数学的定义，在数学里是有明确的公式定义的。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-cfce3aa9c184d67212a33bda4e1201d6_b.jpg" alt></p>
<p>是不是觉得公式太抽象，看不明白？没关系，我们举个栗子就明白了。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-d2859e5c486ed704492ab80079e99535_b.gif" alt></p>
<p>还是以图像识别为例，我们看到的图像其实是由一个个像素点构成的。</p>
<p>一般彩色图像的是RGB格式的，也就是每个像素点的颜色，都是有RGB（红绿蓝三原色混合而成的），是三个值综合的表现。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-27b835158bff7414d461cd986d44c6e7_b.jpg" alt></p>
<p>假设f函数为5x5（对应到图片上即为5x5像素）为例，h函数为3x3的函数，大家可以理解为为一个手电筒（也就是筛选器），依次扫过这个5x5的区间。在照过一个区域，就像对应区域里的值就和框里的数据去做运算。最终输出为我们的输出图。</p>
<p>手电筒本身是一个函数，在3x3的区域内，他在每个位置都有参数，它的参数和对应到图片上相应位置的数字，先相乘，然后再把相乘的数字相加的结果输出，依次按照这些去把整个图片全部筛选一遍，就是我们所说的卷积运算了。</p>
<p>还是比较抽象，没关系，看下面这个图片就清楚了。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-f9dab2820dc8a941e62c1e5c63e418f1_b.gif" alt></p>
<p>那我们为什么要做卷积呢？我们其实就是建立一个输入和输出的函数，图像识别的目的就是把输入的信息（像素点信息）对应到我们输出结果（识别类别）上去，所以是逐层提取有用特征，去除无用信息的过程。</p>
<p>比如下图所示，第一层可以识别一些边缘信息，后面逐层抽象，汇总到最后，就可以输出我们想要的结果，也就是我们的识别结果。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-9cce8e8972bd8ef97646bf9dcfaff268_b.jpg" alt></p>
<p>虽然我们知道特征是逐层抽象提取的，但是不幸的是，我们并不知道那一层是具体做什么的，也就不知道那个层数具体是什么意思。</p>
<p>也就是说，其实深度学习网络对于我们而言，是个黑盒子，我们只能通过他的输出来判断其好坏，而不能直接去调整某个参数。</p>
<p>那么，什么是神经网络呢？其实这个模型来自于心理学和神经学，人工智能的专家借鉴了这个结构。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-66ee3df39241f6d742bd21666b66fd31_b.jpg" alt></p>
<p>左侧为神经元，神经元接收外界的输入刺激或者其他神经元的传递过来的信号，经过处理，传递给外界或者给其他神经元。</p>
<p>右侧为我们根据神经元的生物学特征抽象出来的数学模型，其中x是输入，包括一开始数据来源（外部刺激）的输入，也包括其他节点（神经元）的输入。</p>
<p>w为参数（weight），每个节点还有一个b，这个b其实是一个偏置。</p>
<p><strong>大家在学习新东西的时候，凡事多问个为什么？只有知道背后的原因了，这样你才能理解的更深刻。有句话说得好，还有什么比带着问题学习更有效率的学习方法呢?</strong></p>
<p>为什么要加这个b呢？大家想想看，如果没有b的话，当输入x为0的时候，输出全部为0，这是我们不想看到的。所以要加上这个b，引入更多的参数，带来更大的优化空间。</p>
<p>大家看一下，目前为止，这个神经元里的函数（对输入信号的处理）都还是线性的，也就是说输出与输入是线性相关的，但是根据神经元的生物学研究，发现其接受到的刺激与输入并不是线性相关的，也为了能够表征一些非线性函数，所以必须要再引入一个函数，也就是下面我们要讲的激活函数（activation<br>function）。</p>
<p>为什么需要激活函数？因为需要引入一些非线性的特性在里面。</p>
<p>常见的激活函数有这些。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-227231cd8f502b37edab36eac2e24e81_b.jpg" alt></p>
<p>以前是sigmoid比较常见，但是现在ReLU用的比较多一些。</p>
<p>就类似于下图这样，在节点经过线性运算后，经过非线性的ReLU,然后进入下一层的下一个节点。中间的w和b，就是我们卷积神经网络的参数，也是我们模型中需要训练的对象。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-54627b088d8fc1470923057b230d603e_b.jpg" alt></p>
<p>大家看LeNet模型中，就是在输入数据多次进行卷积神经网络的处理。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-0a5c0f92bef5ea3d0b902c8823f9cd8f_b.jpg" alt></p>
<p>对于模型而已，我们习惯把输入的数据叫做输入层，中间的网络叫做隐藏层，输出的结果叫做输出层。中间层数越多，模型越复杂，所需要训练的参数也就越多。</p>
<p>所谓的deep learning中的deep，指的就是中间层的层数，右图中GoogLenet有22层。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-7f90a17fdc71dd2ae810bcb91b1bade0_b.jpg" alt></p>
<p>一般说来，模型越复杂，所能实现的功能也越强大，所能达到的精度也越高，目前最深的模型大概有10的7次方个神经元，其神经元比相对原始的脊椎动物如青蛙的神经系统还要小。<br>自从引入隐藏单元，人工神经网络的大小大约每 2.4 年翻一倍，按照现在的发展速度，大概要到2050年左右才能达到人类大脑的神经元数量的规模。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-9274b46be316d9c77990c7b8d8c77e93_b.jpg" alt></p>
<h2 id="损失函数"><a href="#损失函数" class="headerlink" title="损失函数"></a>损失函数</h2><p>怎么判断一个模型训练的好坏呢？我们需要一个评价指标（也就是KPI考核指标），也就是损失函数。</p>
<p>我们最初的目标是什么？是建立输入输出的映射关系。</p>
<p>比如我们的目标是判断一张图片上是只猫，还是一棵树。那这张图片上所有的像素点就是输入，而判断结果就是输出。</p>
<p>那怎么表征这个模型的好坏呢？很简单，大家应该很容易想到，就是把模型输出的答案和正确答案做一下比对，看一下相差多少。</p>
<p>我们一般用下面这个公式（平均平方误差，即MSE）来评估我们的模型好坏。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-8c1ebb180425d386f4a1b236393a0953_b.jpg" alt></p>
<p>我们就是通过对比输出结果与预期结果的差异，其中带帽子的yu就是预期的结果（也就是标签值，即是真值），而前面的不带帽子的yu就是实际的输出结果。当训练结果非常好的时候，比如说是全对的时候，平均误差就是0。当训练结果非常差的时候，比如说全错的时候，误差即为1.</p>
<p>于是我们知道了，这个E越小越好，最好变成0.</p>
<p>大家注意下，这个求和的标识，表示是所有的数据的和，而不是一个的数值。我们常说大数据来训练模型，其实这就是大数据。我们训练的时候需要上百万张的图片，最终得出来的误差，就是这里，然后再除以数量，取平均值。</p>
<p>那怎么去降低这个误差呢？要回答这个问题，就涉及到卷积神经网络的核心思想了，也就是反向传播。</p>
<h2 id="反向传播-梯度下降"><a href="#反向传播-梯度下降" class="headerlink" title="反向传播/梯度下降"></a>反向传播/梯度下降</h2><p>既然讲到机器学习，那当然是让机器自己去通过数据去学习，那机器是如何进行自学习的呢？下面就要敲黑板，划重点了，因为这就是深度学习的重中之重了，也就是机器学习的核心了，理解了这个概念，基本上就理解了一多半了。</p>
<p>这个概念就是反向传播。听名字比较玄乎，其实这个概念大家在高等数学里都接触过这个概念了——梯度，其实也就是求导。</p>
<p>对于一维函数而言，函数梯度下降的方向就是导数的反方向。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-1c18f58067b7c5524454562e9f5e9f43_b.jpg" alt></p>
<p>对于二维函数而言，就是把误差对每个变量求偏导，偏导的反方向即为梯度下降的方向。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-5c5920ccd21c6ba5923602ca8436bbe6_b.jpg" alt></p>
<p>说起来有点抽象，我们举个实例来说明一下。</p>
<p>下面是我们的参数和损失函数的值。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-e1910cd6062c05840e0eb179bf81ff2c_b.jpg" alt></p>
<p>我们先对第一个参数加一个极小值，算出新的损失函数。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-73d4438aef9d4046c089cfd91d28233a_b.jpg" alt></p>
<p>然后用损失函数的变化去除这个极小值，就是这个参数的梯度了。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-a5402c78e656fc193449b05d56df9bc0_b.jpg" alt></p>
<p>同样我们可以使用同样的方法去求得其他参数的梯度。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-a0d47ad39247a3aae81529631a7e6a99_b.jpg" alt><br><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-a0f3ae13ff9c4623d57136a049c4a14f_b.jpg" alt></p>
<p>只要找到梯度下降的方向，按照方向去优化这些参数就好了。这个概念就是梯度下降。</p>
<p>但是我们知道，我们要训练的参数非常多，数据量也非常大，经常是百万、千万量级的，如果每次都把全部训练数据都重新计算一遍，计算损失函数，然后再反向传播，计算梯度，这样下去，模型的误差优化的非常非常慢。</p>
<p>那有没有更快的方法呢？</p>
<p>当然有了。</p>
<p>这些参数（weights），数量非常多，大概有上百万个，为了保证能够更好、更快的计算，节省算力，一般选用随机梯度下降方法，随机抽取一定数量（即为批量，batch）的样本，去计算梯度值，一般选择32/64/128。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-4e874cea17cdeaa41fdb7b942b6d21cf_b.jpg" alt></p>
<p>这个方法就是随机梯度下降，这个批量（batch）这也是大家经常要调的参数。</p>
<p>我们可以这样理解随机梯度下降，其核心思想是，梯度是期望。期望可使用小规模的样本近似估计。具体而言，在算法的每一步，我们从训练集中均匀抽出小批量样本来代替全部数据的梯度，因为其梯度期望是一致的。</p>
<p>值得一提是：这些batch中的样本，必须是随机抽取的，否则其期望就准确了。选的批量（batch）的值越小，进行一次参数优化的计算量越小，就越快，但是其随机性会比较大一些，如果选取的批量值比较大，则计算会稍微慢一些，但是随机性会小一些，这是我们需要权衡的。</p>
<p>前向计算一次，反向反馈一下，更新一下参数，叫做一个Epoch.</p>
<p>Epoch的次数也是个超参数，也是需要搭建模型的时候可以调整的参数。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-e82e5cd376517518daecfb9f6e63c08e_b.jpg" alt></p>
<p>在整个模型中也是类似的。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-bb6f9fd6aabaefa8f6835982357d28f1_b.jpg" alt></p>
<p>_简单总结下，截止到目前，我们已经了解了一些深度学习的基本概念，比如什么是卷积神经网络，了解了反向传播的传播的概念，如何梯度下降的方法去优化误差。_</p>
<p>基本上深度学习是什么回事，大家已经知道了，但是深度学习还需要注意一些细节。有句话说的好，细节就是魔鬼，细节处理的好坏很大程度上决定了你是一个高手，还是一个菜鸟。</p>
<h2 id="深度学习之高手进阶"><a href="#深度学习之高手进阶" class="headerlink" title="深度学习之高手进阶"></a><strong>深度学习之高手进阶</strong></h2><p>我们在进行深度学习的时候一般会按照这4个步骤进行。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-ad9a8000c49cdaf230bac3899451df93_b.jpg" alt></p>
<h2 id="获取数据"><a href="#获取数据" class="headerlink" title="获取数据"></a>获取数据</h2><p>很大程度上，数据的多少决定模型所能达到的精度。再好的模型，没有足够数据，也是白瞎。</p>
<p>对于监督学习而言，需要大量标定的数据。</p>
<p>数据的获取是有成本的，尤其是我们需要的数据都是百万、千万量级的，成本非常高。亚马逊有个专门发布标定任务的平台，叫做Amazon Mechanical<br>Turk.</p>
<p>很多大的数据，比如IMAGENET就是在这上面做label的。</p>
<p>Amazon从中抽取20%的费用，也就是说，需求方发布100美元的任务，得多交20美元给Amazon，躺着也挣钱。</p>
<p>由于数据的获取是有成本的，而且成本很高的。</p>
<p>所以我们需要以尽量低的价格去获得更多的数据，所以，在已经获得数据基础上，仅仅通过软件处理去扩展数据，就是非常重要的，常见的数据扩展的方法见下图。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-f425bece53e7ed73734b0b4ef60b19d1_b.jpg" alt></p>
<h2 id="数据预处理-归一化"><a href="#数据预处理-归一化" class="headerlink" title="数据预处理-归一化"></a>数据预处理-归一化</h2><p>为了更好的计算数据，避免出现太大或者太小的数据，从而出现计算溢出或者精度失真，一般在开始做数据处理之前，需要进行归一化处理，就是将像素保持在合理的范围内，如[0,1]或者[-1,1]。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-696e07cd03c0b213dee97862df4dbcc8_b.jpg" alt></p>
<h2 id="模型搭建"><a href="#模型搭建" class="headerlink" title="模型搭建"></a>模型搭建</h2><p>除了上面提到的卷积神经网络之外，我们在搭建模型的时候，还需要一些其他层，最常见的是输出控制。</p>
<h2 id="全连接层Fully-connected"><a href="#全连接层Fully-connected" class="headerlink" title="全连接层Fully-connected"></a>全连接层Fully-connected</h2><p>全连接层，其字面意思就是将每个输入值和每个输出值都连接起来，全连接层的目的其实就是控制输出数量。</p>
<p>比如我们最终分类是有10类，那我们需要把输出控制为10个，那就需要一个全连接层来链接输出层。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-ad4c6f5a691a0b8ae05ed0e853e3b3c7_b.jpg" alt></p>
<h2 id="softmax"><a href="#softmax" class="headerlink" title="softmax"></a>softmax</h2><p>我们用数值来表征其可能性大小，数值越大，其可能性越大，有的值可能很大，有的值可能很小，是负的。</p>
<p>怎么用概率来表征其可能性呢？总不能加起来一除吧，但是有负数怎么办呢？全连接之后，我们每个类别得到一个值，那怎么转化表征其可能性的概率呢？我们一般通过softmax来转化。</p>
<p>softmax的目的就是把数值转化给每个标签的概率，就是将最终各个值的得分，转化成各个输出值的概率。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-14e4d597044da401b0373704cd900252_b.jpg" alt></p>
<h2 id="独热编码-One-Hot-Encoding"><a href="#独热编码-One-Hot-Encoding" class="headerlink" title="独热编码 One-Hot Encoding"></a>独热编码 One-Hot Encoding</h2><p>独热编码,又叫做一位有效编码</p>
<p>有多少标签，就转化为多少行的单列矩阵，其本质就是将连续值转化为离散值。</p>
<p>这样可以直接直接将输出值直接输出，得到一个唯一值。</p>
<p>就像一个筛子，只留一个最大值，其他全部筛掉。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-00f633a3545c693f738dabb769018110_b.jpg" alt></p>
<p>我们以LeNet为例串起来看（见下图），输出值经过全连接层，转化为10个标签值，然后经过softmax和one-hot<br>encoding，最终转化为唯一的识别标签值，就是我们想要的结果。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-b0c7c76587551362644dd50d1f9d23d5_b.jpg" alt></p>
<h2 id="客观评价——交叉验证"><a href="#客观评价——交叉验证" class="headerlink" title="客观评价——交叉验证"></a>客观评价——交叉验证</h2><p>讲完输出控制，我们再讲一下评价方法。</p>
<p>我们有一些数据，希望利用现有的数据去训练模型，同时利用这些数据去评价这个模型的好坏，也就是我们需要知道，这个模型的准确率是50%，还是90%，还是99%？</p>
<p>具体怎么去做呢？</p>
<p>最先想到的是，用全部的数据去训练，然后评价的时候，从中抽取一定数量的样本去做验证。这不是很简单嘛？</p>
<p>但是，这样不行。</p>
<p>想像一下，在高考考场上，你打开试卷，看了一眼之后高兴坏了。因为你发现这些试题你之前做练习的时候都做过。</p>
<p>其实是一个道理。如果拿训练过的数据去做验证，那得到的误差率会比实际的误差率要低得多，也就失去了意义。</p>
<p>那怎么办呢？我们需要把训练数据和最终评价的数据（也就是验证数据）要分开。这样才能保证你验证的时候看的是全新的数据，才能保证得到的结果是客观可靠地结果。所以我们会得到两个误差率，一个是训练集的误差率，一个是验证集的误差率，记住这两个误差率，后面会用到。</p>
<p>拿到数据的第一步，先把所有的数据随机分成两部分：训练集和验证集。一般而言，训练集占总数据的80%左右，验证集占20%左右。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-0ee469c2d19957af1e2972a77a429b2d_b.jpg" alt></p>
<p>训练的时候，随机从训练集中抽取一个批量的数据，去训练，也就是一次正向传播和一次反向传播。</p>
<p>这一轮做完之后，从验证集里随机抽取一定数量来评价下其误差率。</p>
<p>每做一轮学习，一次正向传播一次反向传播，就随机从验证集里抽取一定数量数据来评价其模型的准确率，一轮之后我们获得训练误差率和验证误差率。</p>
<p>接下来就是重点了，就是模型训练。</p>
<h2 id="模型训练"><a href="#模型训练" class="headerlink" title="模型训练"></a>模型训练</h2><p>实际训练模型的时候，我们会碰到两大终极难题，一个是欠拟合，一个是过拟合。</p>
<p>所谓欠拟合，就是训练误差率和验证误差率都很高。</p>
<p>所谓过拟合，就是训练集的误差率很低，但是验证集的误差率很高。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-997550d365493f2288bbfc5c65c5f9ae_b.jpg" alt></p>
<p>欠拟合和过拟合其实跟模型的复杂程度有很大的关系。</p>
<p>比如这张图里面，本来是抛物线的数据，如果用线性模型去拟合的话，效果很很差。如果用9次方模型去拟合的话，虽然训练集表现非常好，但是测试新数据的时候，你会发现表现很差。</p>
<p>欠拟合的原因其实比较简单，就是模型的深度不够，只需要把模型变得复杂一些就能解决。</p>
<p>过拟合的原因就比较多了，一般来说，简单粗暴的增加训练集的数量就能解决这个问题，但是有时候受限于客观条件，我们没有那么多数据。这时候我们就需要调整一些参数来解决过拟合的问题了。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-67a769fc62f09c8e81297ea311a1f435_b.jpg" alt></p>
<p>模型中能调整的参数叫做超参数。</p>
<p>调整这些参数，有时候有道理，有时候又没有道理，更多的是靠的一种感觉。有人说，调整超参数与其说是个科学，其实更像是一项艺术。</p>
<p>常见的调整的超参数有以下几种，下面我们逐项介绍一下。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-e8973bae36ee37031ee11352c2382ace_b.jpg" alt></p>
<h2 id="学习率"><a href="#学习率" class="headerlink" title="学习率"></a>学习率</h2><p>上面提到的随机梯度下降中，我们会在梯度的前面加一个系数，我们管它叫做学习率，这个参数直接影响了我们误差下降的快慢。</p>
<p>当我们遇到问题的时候，先尝试调整下学习率，说不定就能解决问题。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-3b5f2ece4a0923f6834ae7b2cc569fd1_b.jpg" alt></p>
<p>选择一个合适的学习率可能是困难的。学习率太小会导致收敛的速度很慢，学习率太大会妨碍收敛，导致损失函数在最小值附近波动甚至偏离最小值。下面这张图比较好的说明了学习率高低对模型误差下降的影响。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-cadf3a87bdd764cda9f8e3df46486c17_b.jpg" alt></p>
<h2 id="冲量Momentum"><a href="#冲量Momentum" class="headerlink" title="冲量Momentum"></a>冲量Momentum</h2><p>冲量的概念其实就是在梯度下降的时候，把上次的梯度乘以一个系数pho，加上本次计算的梯度，然后乘以学习率，作为本次下降用的梯度。pho一般选取0.9或者0.99。其本质就是加上了之前梯度下降的惯性在里面，所以叫做冲量。</p>
<p>有时候会采用冲量（momentum）能够有效的提高训练速度，并且也能够更好的消除SGD的噪音（相当于加了平均值），但是有个问题，就是容易冲过头了，不过总体来说，表现还是很不错的，一般用的也比较多。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-0df32955d4c39e25a4aec0f6e5c0c022_b.jpg" alt></p>
<p>下面这两张图也能看出来，SGD+冲量能够有效的加快优化速度，还能够避免随机的噪音。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-987cdbf1a45cce44e800df7615e38a99_b.jpg" alt></p>
<h2 id="轮数epochs"><a href="#轮数epochs" class="headerlink" title="轮数epochs"></a>轮数epochs</h2><p>前面提到，一次正向传播，一次反向传播就是一轮，也就是一个epoch。</p>
<p>一般来说，轮数越多，其误差会越好，但是当学习的越多的时候，他会把一些不太关键的特征作为一些重要的判别标准，从而出现了过拟合。如果发现这种情况（下图），我们需要尽早停止学习。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-6e3cb0f28ad30f056e36911f4b264900_b.jpg" alt></p>
<h2 id="参数初始化（weights-initialization）"><a href="#参数初始化（weights-initialization）" class="headerlink" title="参数初始化（weights initialization）"></a>参数初始化（weights initialization）</h2><p>对于模型的所有参数，我们均随机进行初始化，但是初始化的时候我们一般会让其均值为0，公差为sigma，sigma一般选择比较大，这样其分散效果比较好，训练效果也比较好。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-9e026d489b019e1026b82723b9034e82_b.jpg" alt></p>
<p>但是有时候仅仅调整超参数并不能解决过拟合的问题，这时候我们需要在模型上做一些文章，在模型上做一些处理，来避免过拟合。</p>
<h2 id="Dropout"><a href="#Dropout" class="headerlink" title="Dropout"></a>Dropout</h2><p>最常见的方法就是dropout.</p>
<p>drop的逻辑非常简单粗暴，就是在dropout过程中，有一半的参数不参与运算。</p>
<p>比如说公司里，每天随机有一般人不来上班，为了正常运转，每个岗位都需要有好几个人来备份，这样公司就不会过于依赖某一个人，其实是一个道理。</p>
<p>dropout的本质是冗余。为了避免过拟合，我们需要额外增加很多冗余，使得其输出结果不依赖于某一个或几个特征。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-06808823a69e5068ef34a79219b5ed3a_b.jpg" alt></p>
<h2 id="Pooling池化"><a href="#Pooling池化" class="headerlink" title="Pooling池化"></a>Pooling池化</h2><p>除此之外，池化也是比较常用到的。</p>
<p>Pooling主要的作用为降维，降维的同时能够保留主要特征，能够防止过拟合。</p>
<p>Pooling主要有两种：一种是最大化Pooling，还有一中是平均池化。</p>
<p>最大池化就是把区域的最大值传递到下一层（见下图），平均池化就是把区域内的平均值传递到下一层。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-afd83e56ee9acc725aa45b66597dfc06_b.jpg" alt></p>
<p>一般在Pooling之后会加上一个1x1的卷积层，这样能够以非常低的成本（运算量），带来更多的参数，</p>
<p>更深的深度，而且验证下来效果也非常好。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-91026b0dc2be4df5455a78abd2dbad9c_b.jpg" alt></p>
<p>接下来我们可以分析下Lenet的数据，看的出来是卷积—&gt;池化—&gt;卷积—&gt;池化—&gt;平化（Flatten，将深度转化为维度）—&gt;全连接—&gt;全连接—&gt;全连接。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-4cfd34bbd4b08285ba26ed3cb0b8c378_b.jpg" alt></p>
<p>下面这个模型也比较简单，经过多层卷积、池化之后，平化，然后经过softmax转化。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-2a441974c11cea97851a75698406f904_b.jpg" alt></p>
<p>_截止到目前，我们又了解了训练模型所需要的技巧，如获取数据、预处理数据、模型搭建和模型调试，重点了解了如何防止过拟合。_</p>
<p>恭喜你，现在你已经完全了解了深度学习的全部思想，成功晋级成深度学习高手了~</p>
<p>接下来我们看下深度学习的发展趋势。</p>
<h2 id="深度学习发展趋势"><a href="#深度学习发展趋势" class="headerlink" title="深度学习发展趋势"></a><strong>深度学习发展趋势</strong></h2><p>目前深度学习在图像识别领域取得了很多突破，比如可以对一张图片多次筛选获取多个类别，并标注在图片上。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-da4ea9dabbdec27e7b5a805e3abf236b_b.jpg" alt></p>
<p>还可以进行图像分割。</p>
<p>在做图像分割标注的时候，难度很大，需要把每个类别的范围用像素级的精度画出来。这对标注者的素质要求很高。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-b4707b8dda4510cb853848413538855e_b.jpg" alt></p>
<p>还可以根据图像识别的结果直接生成语句。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-a87fb852a09a2f6b5ca7456bac76f083_b.jpg" alt></p>
<p>Google翻译可以直接将图片上的字母翻译过来，显示在图片上，很厉害。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-fc267e91e7dd9e2a350c236c71904e83_b.jpg" alt></p>
<p>最近媒体上很多新闻，说人工智能可以作诗，写文章，画画等等，这也都是比较简单的。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-269e064b481409888bb390996027da0e_b.jpg" alt></p>
<p>但是当前图像识别领域还存在一些问题，最大的就是其抗干扰能力比较差。</p>
<p>下图中左侧的图片为原始图片，模型可以轻易识别，但是人工加上一些干扰之后，对于肉眼识别不会造成干扰，但是会引起模型的严重误判。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-e0cee8d5c9e8580fb2bcc0b8646ae264_b.jpg" alt></p>
<p>这种情况可能会在某些很重要的商业应用中带来一些风险，比如在自动驾驶的物体识别时，如果有人故意对摄像头造成干扰，就会引起误判，从而可能会引起严重后果。</p>
<p>深度学习在自动驾驶领域有比较多的应用，下面是我做自动驾驶项目中的视频。</p>
<p>车辆识别：</p>
<p><a href="https://link.zhihu.com/?target=https%3A//www.zhihu.com/video/920687534550446080"> <img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-6acf749230df4f6bc598cf85a4d4a653_b.jpg" alt><br><a href="https://www.zhihu.com/video/920687534550446080" target="_blank" rel="noopener">https://www.zhihu.com/video/920687534550446080</a>
</a></p>
<p>行为克隆：</p>
<p><a href="https://link.zhihu.com/?target=https%3A//www.zhihu.com/video/920687705740943360"> <img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-e2d2f7770f77f41826f64921a1638c64_b.jpg" alt><br><a href="https://www.zhihu.com/video/920687705740943360" target="_blank" rel="noopener">https://www.zhihu.com/video/920687705740943360</a>
</a></p>
<p>下图为加特纳技术曲线，就是根据技术发展周期理论来分析新技术的发展周期曲线（从1995年开始每年均有报告），以便帮助人们判断某种新技术是否采用。其把技术成熟经过5个阶段：1是萌芽期，人们对新技术产品和概念开始感知，并且表现出兴趣；2是过热期，人们一拥而上，纷纷采用这种新技术，讨论这种新技术；3是低谷期，又称幻想破灭期。过度的预期，严峻的现实，往往会把人们心理的一把火浇灭；4是复苏期，又称恢复期。人们开始反思问题，并从实际出发考虑技术的价值。相比之前冷静不少；5是成熟期，又称高原期。该技术已经成为一种平常。</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-4f13b15a340886fa20eb602ed6d4b7a6_b.jpg" alt></p>
<p>当前机器学习和自动驾驶就处在过热期。</p>
<p>说到底，人工智能其实就是一种工具而已，只不过这项工具能做的事情多了一些而已。</p>
<p>未来人工智能会融入到生活中的方方面面，我们不可能阻挡这种趋势，所以我们唯一能做的，就是好好利用好这个工具，让未来的工作和生活更加方便一些。</p>
<p>送大家一句话：</p>
<p><img src="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/v2-a189b6ac6314953f72ae70483e7024ce_b.jpg" alt></p>
<h2 id="关于人工智能威胁论"><a href="#关于人工智能威胁论" class="headerlink" title="关于人工智能威胁论"></a><strong>关于人工智能威胁论</strong></h2><p>当前有些媒体在肆意宣扬人工智能威胁论，这其实是毫无道理的。</p>
<p><strong>当人类对自己不了解的事物会本能的产生恐惧，越是不了解，越是会产生恐惧。</strong></p>
<p>大家今天看下来，是不是也觉得人工智能也没啥。</p>
<p>其实就是因为了解了，所以才不会恐惧。我们只有了解他，才能更好的利用好它。</p>
<p>当前有部分无良媒体以及所谓的专家，在传播人工智能威胁论。</p>
<p>其实所谓的专家根本就不是这个领域的专家，如果他不是这个领域的专家，那他对这个话题其实就没有话语权，他说话的分量就跟一个普通人说的没什么区别。</p>
<p>流传比较广的，比如说某个坐在轮椅上的英国物理学家，对，没错，我说的就是霍金。</p>
<p>还有某国际著名新能源汽车公司的CEO，对，我说的就是Elon Musk。</p>
<p>他们对人工智能其实也完全是一知半解。</p>
<p>相信大家今天看完这篇文章之后，对人工智能的理解就可以秒杀他们了。</p>
<p>最近看到吴军的一句话，来解释人工智能威胁论，觉得非常恰当。</p>
<pre><code>说一下人工智能的边界：
1. 世界上有很多问题，其中只有一小部分是数学问题；
2. 在数学问题中，只有一小部分是有解的；
3. 在有解的问题中，只有一部分是理想状态的图灵机可以解决的；
4. 在后一类的问题中，又只有一部分是今天实际的计算机可以解决的；
5. 而人工智能可以解决的问题，又只是计算机可以解决问题的一部分。
</code></pre><p>最后分享一下学习资料：</p>
<ol>
<li>Stanford CS231n课程： <a href="https://link.zhihu.com/?target=http%3A//cs231n.stanford.edu/"> http://  cs231n.stanford.edu/  </a></li>
<li>MIT自动驾驶课程： _<a href="https://link.zhihu.com/?target=https%3A//selfdrivingcars.mit.edu/"> https </a> <a href="https://link.zhihu.com/?target=https%3A//selfdrivingcars.mit.edu/"> :// </a> <a href="https://link.zhihu.com/?target=https%3A//selfdrivingcars.mit.edu/"> selfdrivingcars.mit.edu </a> <a href="https://link.zhihu.com/?target=https%3A//selfdrivingcars.mit.edu/"> / </a> _</li>
<li>Deep Learning书籍: <a href="https://link.zhihu.com/?target=http%3A//deeplearningbook.org/"> http://deeplearningbook.org </a></li>
<li>Foundational papers: <a href="https://link.zhihu.com/?target=http%3A//deeplearning.net/reading-list"> http://  deeplearning.net/readin  g-list  </a></li>
<li>快速上手 <a href="https://link.zhihu.com/?target=http%3A//www.fast.ai/"> http://www.  fast.ai/  </a></li>
<li>图解机器学习 <a href="https://link.zhihu.com/?target=http%3A//www.r2d3.us/visual-intro-to-machine-learning-part-1/"> http://www.  r2d3.us/visual-intro-to  -machine-learning-part-1/  </a></li>
</ol>
<p>本文的脑图链接：<br><a href="https://www.processon.com/view/link/5e8a9161e4b07e41dc2d7a8d#map" target="_blank" rel="noopener">https://www.processon.com/view/link/5e8a9161e4b07e41dc2d7a8d#map</a></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color5">深度学习</a>
        		</li>
      		 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color5">神经网络</a>
        		</li>
      		
		</ul>
	</div>

      
	<div class="article-category tagcloud">
		<i class="icon-book icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="/categories/计算机视觉//" class="article-tag-list-link color1">计算机视觉</a>
        		</li>
      		
		</ul>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/%E6%8F%AD%E5%BC%80%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
  


          </div>
        </div>
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2022 赵宇亮
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		mathjax: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: true,
		toc_hide_index: true,
		root: "/",
		innerArchive: true,
		showTags: true
	}
</script>

<script>!function(t){function n(e){if(r[e])return r[e].exports;var i=r[e]={exports:{},id:e,loaded:!1};return t[e].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var r={};n.m=t,n.c=r,n.p="./",n(0)}([function(t,n,r){r(195),t.exports=r(191)},function(t,n,r){var e=r(3),i=r(52),o=r(27),u=r(28),c=r(53),f="prototype",a=function(t,n,r){var s,l,h,v,p=t&a.F,d=t&a.G,y=t&a.S,g=t&a.P,b=t&a.B,m=d?e:y?e[n]||(e[n]={}):(e[n]||{})[f],x=d?i:i[n]||(i[n]={}),w=x[f]||(x[f]={});d&&(r=n);for(s in r)l=!p&&m&&void 0!==m[s],h=(l?m:r)[s],v=b&&l?c(h,e):g&&"function"==typeof h?c(Function.call,h):h,m&&u(m,s,h,t&a.U),x[s]!=h&&o(x,s,v),g&&w[s]!=h&&(w[s]=h)};e.core=i,a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},function(t,n,r){var e=r(6);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},function(t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n,r){var e=r(126)("wks"),i=r(76),o=r(3).Symbol,u="function"==typeof o;(t.exports=function(t){return e[t]||(e[t]=u&&o[t]||(u?o:i)("Symbol."+t))}).store=e},function(t,n){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},function(t,n,r){var e=r(94),i=r(33);t.exports=function(t){return e(i(t))}},function(t,n,r){t.exports=!r(4)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(2),i=r(167),o=r(50),u=Object.defineProperty;n.f=r(10)?Object.defineProperty:function(t,n,r){if(e(t),n=o(n,!0),e(r),i)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){t.exports=!r(18)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(14),i=r(22);t.exports=r(12)?function(t,n,r){return e.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n,r){var e=r(20),i=r(58),o=r(42),u=Object.defineProperty;n.f=r(12)?Object.defineProperty:function(t,n,r){if(e(t),n=o(n,!0),e(r),i)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){var e=r(40)("wks"),i=r(23),o=r(5).Symbol,u="function"==typeof o;(t.exports=function(t){return e[t]||(e[t]=u&&o[t]||(u?o:i)("Symbol."+t))}).store=e},function(t,n,r){var e=r(67),i=Math.min;t.exports=function(t){return t>0?i(e(t),9007199254740991):0}},function(t,n,r){var e=r(46);t.exports=function(t){return Object(e(t))}},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,r){var e=r(63),i=r(34);t.exports=Object.keys||function(t){return e(t,i)}},function(t,n,r){var e=r(21);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var r=0,e=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+e).toString(36))}},function(t,n){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},function(t,n){var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n,r){var e=r(11),i=r(66);t.exports=r(10)?function(t,n,r){return e.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n,r){var e=r(3),i=r(27),o=r(24),u=r(76)("src"),c="toString",f=Function[c],a=(""+f).split(c);r(52).inspectSource=function(t){return f.call(t)},(t.exports=function(t,n,r,c){var f="function"==typeof r;f&&(o(r,"name")||i(r,"name",n)),t[n]!==r&&(f&&(o(r,u)||i(r,u,t[n]?""+t[n]:a.join(String(n)))),t===e?t[n]=r:c?t[n]?t[n]=r:i(t,n,r):(delete t[n],i(t,n,r)))})(Function.prototype,c,function(){return"function"==typeof this&&this[u]||f.call(this)})},function(t,n,r){var e=r(1),i=r(4),o=r(46),u=function(t,n,r,e){var i=String(o(t)),u="<"+n;return""!==r&&(u+=" "+r+'="'+String(e).replace(/"/g,"&quot;")+'"'),u+">"+i+"</"+n+">"};t.exports=function(t,n){var r={};r[t]=n(u),e(e.P+e.F*i(function(){var n=""[t]('"');return n!==n.toLowerCase()||n.split('"').length>3}),"String",r)}},function(t,n,r){var e=r(115),i=r(46);t.exports=function(t){return e(i(t))}},function(t,n,r){var e=r(116),i=r(66),o=r(30),u=r(50),c=r(24),f=r(167),a=Object.getOwnPropertyDescriptor;n.f=r(10)?a:function(t,n){if(t=o(t),n=u(n,!0),f)try{return a(t,n)}catch(t){}if(c(t,n))return i(!e.f.call(t,n),t[n])}},function(t,n,r){var e=r(24),i=r(17),o=r(145)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),e(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n){t.exports={}},function(t,n){t.exports=!0},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,r){var e=r(14).f,i=r(8),o=r(15)("toStringTag");t.exports=function(t,n,r){t&&!i(t=r?t:t.prototype,o)&&e(t,o,{configurable:!0,value:n})}},function(t,n,r){var e=r(40)("keys"),i=r(23);t.exports=function(t){return e[t]||(e[t]=i(t))}},function(t,n,r){var e=r(5),i="__core-js_shared__",o=e[i]||(e[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?e:r)(t)}},function(t,n,r){var e=r(21);t.exports=function(t,n){if(!e(t))return t;var r,i;if(n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!e(i=r.call(t)))return i;if(!n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,n,r){var e=r(5),i=r(25),o=r(36),u=r(44),c=r(14).f;t.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:e.Symbol||{});"_"==t.charAt(0)||t in n||c(n,t,{value:u.f(t)})}},function(t,n,r){n.f=r(15)},function(t,n){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n,r){var e=r(4);t.exports=function(t,n){return!!t&&e(function(){n?t.call(null,function(){},1):t.call(null)})}},function(t,n,r){var e=r(53),i=r(115),o=r(17),u=r(16),c=r(203);t.exports=function(t,n){var r=1==t,f=2==t,a=3==t,s=4==t,l=6==t,h=5==t||l,v=n||c;return function(n,c,p){for(var d,y,g=o(n),b=i(g),m=e(c,p,3),x=u(b.length),w=0,S=r?v(n,x):f?v(n,0):void 0;x>w;w++)if((h||w in b)&&(d=b[w],y=m(d,w,g),t))if(r)S[w]=y;else if(y)switch(t){case 3:return!0;case 5:return d;case 6:return w;case 2:S.push(d)}else if(s)return!1;return l?-1:a||s?s:S}}},function(t,n,r){var e=r(1),i=r(52),o=r(4);t.exports=function(t,n){var r=(i.Object||{})[t]||Object[t],u={};u[t]=n(r),e(e.S+e.F*o(function(){r(1)}),"Object",u)}},function(t,n,r){var e=r(6);t.exports=function(t,n){if(!e(t))return t;var r,i;if(n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!e(i=r.call(t)))return i;if(!n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,n,r){var e=r(5),i=r(25),o=r(91),u=r(13),c="prototype",f=function(t,n,r){var a,s,l,h=t&f.F,v=t&f.G,p=t&f.S,d=t&f.P,y=t&f.B,g=t&f.W,b=v?i:i[n]||(i[n]={}),m=b[c],x=v?e:p?e[n]:(e[n]||{})[c];v&&(r=n);for(a in r)(s=!h&&x&&void 0!==x[a])&&a in b||(l=s?x[a]:r[a],b[a]=v&&"function"!=typeof x[a]?r[a]:y&&s?o(l,e):g&&x[a]==l?function(t){var n=function(n,r,e){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,r)}return new t(n,r,e)}return t.apply(this,arguments)};return n[c]=t[c],n}(l):d&&"function"==typeof l?o(Function.call,l):l,d&&((b.virtual||(b.virtual={}))[a]=l,t&f.R&&m&&!m[a]&&u(m,a,l)))};f.F=1,f.G=2,f.S=4,f.P=8,f.B=16,f.W=32,f.U=64,f.R=128,t.exports=f},function(t,n){var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},function(t,n,r){var e=r(26);t.exports=function(t,n,r){if(e(t),void 0===n)return t;switch(r){case 1:return function(r){return t.call(n,r)};case 2:return function(r,e){return t.call(n,r,e)};case 3:return function(r,e,i){return t.call(n,r,e,i)}}return function(){return t.apply(n,arguments)}}},function(t,n,r){var e=r(183),i=r(1),o=r(126)("metadata"),u=o.store||(o.store=new(r(186))),c=function(t,n,r){var i=u.get(t);if(!i){if(!r)return;u.set(t,i=new e)}var o=i.get(n);if(!o){if(!r)return;i.set(n,o=new e)}return o},f=function(t,n,r){var e=c(n,r,!1);return void 0!==e&&e.has(t)},a=function(t,n,r){var e=c(n,r,!1);return void 0===e?void 0:e.get(t)},s=function(t,n,r,e){c(r,e,!0).set(t,n)},l=function(t,n){var r=c(t,n,!1),e=[];return r&&r.forEach(function(t,n){e.push(n)}),e},h=function(t){return void 0===t||"symbol"==typeof t?t:String(t)},v=function(t){i(i.S,"Reflect",t)};t.exports={store:u,map:c,has:f,get:a,set:s,keys:l,key:h,exp:v}},function(t,n,r){"use strict";if(r(10)){var e=r(69),i=r(3),o=r(4),u=r(1),c=r(127),f=r(152),a=r(53),s=r(68),l=r(66),h=r(27),v=r(73),p=r(67),d=r(16),y=r(75),g=r(50),b=r(24),m=r(180),x=r(114),w=r(6),S=r(17),_=r(137),O=r(70),E=r(32),P=r(71).f,j=r(154),F=r(76),M=r(7),A=r(48),N=r(117),T=r(146),I=r(155),k=r(80),L=r(123),R=r(74),C=r(130),D=r(160),U=r(11),W=r(31),G=U.f,B=W.f,V=i.RangeError,z=i.TypeError,q=i.Uint8Array,K="ArrayBuffer",J="Shared"+K,Y="BYTES_PER_ELEMENT",H="prototype",$=Array[H],X=f.ArrayBuffer,Q=f.DataView,Z=A(0),tt=A(2),nt=A(3),rt=A(4),et=A(5),it=A(6),ot=N(!0),ut=N(!1),ct=I.values,ft=I.keys,at=I.entries,st=$.lastIndexOf,lt=$.reduce,ht=$.reduceRight,vt=$.join,pt=$.sort,dt=$.slice,yt=$.toString,gt=$.toLocaleString,bt=M("iterator"),mt=M("toStringTag"),xt=F("typed_constructor"),wt=F("def_constructor"),St=c.CONSTR,_t=c.TYPED,Ot=c.VIEW,Et="Wrong length!",Pt=A(1,function(t,n){return Tt(T(t,t[wt]),n)}),jt=o(function(){return 1===new q(new Uint16Array([1]).buffer)[0]}),Ft=!!q&&!!q[H].set&&o(function(){new q(1).set({})}),Mt=function(t,n){if(void 0===t)throw z(Et);var r=+t,e=d(t);if(n&&!m(r,e))throw V(Et);return e},At=function(t,n){var r=p(t);if(r<0||r%n)throw V("Wrong offset!");return r},Nt=function(t){if(w(t)&&_t in t)return t;throw z(t+" is not a typed array!")},Tt=function(t,n){if(!(w(t)&&xt in t))throw z("It is not a typed array constructor!");return new t(n)},It=function(t,n){return kt(T(t,t[wt]),n)},kt=function(t,n){for(var r=0,e=n.length,i=Tt(t,e);e>r;)i[r]=n[r++];return i},Lt=function(t,n,r){G(t,n,{get:function(){return this._d[r]}})},Rt=function(t){var n,r,e,i,o,u,c=S(t),f=arguments.length,s=f>1?arguments[1]:void 0,l=void 0!==s,h=j(c);if(void 0!=h&&!_(h)){for(u=h.call(c),e=[],n=0;!(o=u.next()).done;n++)e.push(o.value);c=e}for(l&&f>2&&(s=a(s,arguments[2],2)),n=0,r=d(c.length),i=Tt(this,r);r>n;n++)i[n]=l?s(c[n],n):c[n];return i},Ct=function(){for(var t=0,n=arguments.length,r=Tt(this,n);n>t;)r[t]=arguments[t++];return r},Dt=!!q&&o(function(){gt.call(new q(1))}),Ut=function(){return gt.apply(Dt?dt.call(Nt(this)):Nt(this),arguments)},Wt={copyWithin:function(t,n){return D.call(Nt(this),t,n,arguments.length>2?arguments[2]:void 0)},every:function(t){return rt(Nt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return C.apply(Nt(this),arguments)},filter:function(t){return It(this,tt(Nt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return et(Nt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return it(Nt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Z(Nt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return ut(Nt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return ot(Nt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return vt.apply(Nt(this),arguments)},lastIndexOf:function(t){return st.apply(Nt(this),arguments)},map:function(t){return Pt(Nt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return lt.apply(Nt(this),arguments)},reduceRight:function(t){return ht.apply(Nt(this),arguments)},reverse:function(){for(var t,n=this,r=Nt(n).length,e=Math.floor(r/2),i=0;i<e;)t=n[i],n[i++]=n[--r],n[r]=t;return n},some:function(t){return nt(Nt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return pt.call(Nt(this),t)},subarray:function(t,n){var r=Nt(this),e=r.length,i=y(t,e);return new(T(r,r[wt]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,d((void 0===n?e:y(n,e))-i))}},Gt=function(t,n){return It(this,dt.call(Nt(this),t,n))},Bt=function(t){Nt(this);var n=At(arguments[1],1),r=this.length,e=S(t),i=d(e.length),o=0;if(i+n>r)throw V(Et);for(;o<i;)this[n+o]=e[o++]},Vt={entries:function(){return at.call(Nt(this))},keys:function(){return ft.call(Nt(this))},values:function(){return ct.call(Nt(this))}},zt=function(t,n){return w(t)&&t[_t]&&"symbol"!=typeof n&&n in t&&String(+n)==String(n)},qt=function(t,n){return zt(t,n=g(n,!0))?l(2,t[n]):B(t,n)},Kt=function(t,n,r){return!(zt(t,n=g(n,!0))&&w(r)&&b(r,"value"))||b(r,"get")||b(r,"set")||r.configurable||b(r,"writable")&&!r.writable||b(r,"enumerable")&&!r.enumerable?G(t,n,r):(t[n]=r.value,t)};St||(W.f=qt,U.f=Kt),u(u.S+u.F*!St,"Object",{getOwnPropertyDescriptor:qt,defineProperty:Kt}),o(function(){yt.call({})})&&(yt=gt=function(){return vt.call(this)});var Jt=v({},Wt);v(Jt,Vt),h(Jt,bt,Vt.values),v(Jt,{slice:Gt,set:Bt,constructor:function(){},toString:yt,toLocaleString:Ut}),Lt(Jt,"buffer","b"),Lt(Jt,"byteOffset","o"),Lt(Jt,"byteLength","l"),Lt(Jt,"length","e"),G(Jt,mt,{get:function(){return this[_t]}}),t.exports=function(t,n,r,f){f=!!f;var a=t+(f?"Clamped":"")+"Array",l="Uint8Array"!=a,v="get"+t,p="set"+t,y=i[a],g=y||{},b=y&&E(y),m=!y||!c.ABV,S={},_=y&&y[H],j=function(t,r){var e=t._d;return e.v[v](r*n+e.o,jt)},F=function(t,r,e){var i=t._d;f&&(e=(e=Math.round(e))<0?0:e>255?255:255&e),i.v[p](r*n+i.o,e,jt)},M=function(t,n){G(t,n,{get:function(){return j(this,n)},set:function(t){return F(this,n,t)},enumerable:!0})};m?(y=r(function(t,r,e,i){s(t,y,a,"_d");var o,u,c,f,l=0,v=0;if(w(r)){if(!(r instanceof X||(f=x(r))==K||f==J))return _t in r?kt(y,r):Rt.call(y,r);o=r,v=At(e,n);var p=r.byteLength;if(void 0===i){if(p%n)throw V(Et);if((u=p-v)<0)throw V(Et)}else if((u=d(i)*n)+v>p)throw V(Et);c=u/n}else c=Mt(r,!0),u=c*n,o=new X(u);for(h(t,"_d",{b:o,o:v,l:u,e:c,v:new Q(o)});l<c;)M(t,l++)}),_=y[H]=O(Jt),h(_,"constructor",y)):L(function(t){new y(null),new y(t)},!0)||(y=r(function(t,r,e,i){s(t,y,a);var o;return w(r)?r instanceof X||(o=x(r))==K||o==J?void 0!==i?new g(r,At(e,n),i):void 0!==e?new g(r,At(e,n)):new g(r):_t in r?kt(y,r):Rt.call(y,r):new g(Mt(r,l))}),Z(b!==Function.prototype?P(g).concat(P(b)):P(g),function(t){t in y||h(y,t,g[t])}),y[H]=_,e||(_.constructor=y));var A=_[bt],N=!!A&&("values"==A.name||void 0==A.name),T=Vt.values;h(y,xt,!0),h(_,_t,a),h(_,Ot,!0),h(_,wt,y),(f?new y(1)[mt]==a:mt in _)||G(_,mt,{get:function(){return a}}),S[a]=y,u(u.G+u.W+u.F*(y!=g),S),u(u.S,a,{BYTES_PER_ELEMENT:n,from:Rt,of:Ct}),Y in _||h(_,Y,n),u(u.P,a,Wt),R(a),u(u.P+u.F*Ft,a,{set:Bt}),u(u.P+u.F*!N,a,Vt),u(u.P+u.F*(_.toString!=yt),a,{toString:yt}),u(u.P+u.F*o(function(){new y(1).slice()}),a,{slice:Gt}),u(u.P+u.F*(o(function(){return[1,2].toLocaleString()!=new y([1,2]).toLocaleString()})||!o(function(){_.toLocaleString.call([1,2])})),a,{toLocaleString:Ut}),k[a]=N?A:T,e||N||h(_,bt,T)}}else t.exports=function(){}},function(t,n){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,n,r){var e=r(21),i=r(5).document,o=e(i)&&e(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n,r){t.exports=!r(12)&&!r(18)(function(){return 7!=Object.defineProperty(r(57)("div"),"a",{get:function(){return 7}}).a})},function(t,n,r){"use strict";var e=r(36),i=r(51),o=r(64),u=r(13),c=r(8),f=r(35),a=r(96),s=r(38),l=r(103),h=r(15)("iterator"),v=!([].keys&&"next"in[].keys()),p="keys",d="values",y=function(){return this};t.exports=function(t,n,r,g,b,m,x){a(r,n,g);var w,S,_,O=function(t){if(!v&&t in F)return F[t];switch(t){case p:case d:return function(){return new r(this,t)}}return function(){return new r(this,t)}},E=n+" Iterator",P=b==d,j=!1,F=t.prototype,M=F[h]||F["@@iterator"]||b&&F[b],A=M||O(b),N=b?P?O("entries"):A:void 0,T="Array"==n?F.entries||M:M;if(T&&(_=l(T.call(new t)))!==Object.prototype&&(s(_,E,!0),e||c(_,h)||u(_,h,y)),P&&M&&M.name!==d&&(j=!0,A=function(){return M.call(this)}),e&&!x||!v&&!j&&F[h]||u(F,h,A),f[n]=A,f[E]=y,b)if(w={values:P?A:O(d),keys:m?A:O(p),entries:N},x)for(S in w)S in F||o(F,S,w[S]);else i(i.P+i.F*(v||j),n,w);return w}},function(t,n,r){var e=r(20),i=r(100),o=r(34),u=r(39)("IE_PROTO"),c=function(){},f="prototype",a=function(){var t,n=r(57)("iframe"),e=o.length;for(n.style.display="none",r(93).appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),a=t.F;e--;)delete a[f][o[e]];return a()};t.exports=Object.create||function(t,n){var r;return null!==t?(c[f]=e(t),r=new c,c[f]=null,r[u]=t):r=a(),void 0===n?r:i(r,n)}},function(t,n,r){var e=r(63),i=r(34).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,i)}},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){var e=r(8),i=r(9),o=r(90)(!1),u=r(39)("IE_PROTO");t.exports=function(t,n){var r,c=i(t),f=0,a=[];for(r in c)r!=u&&e(c,r)&&a.push(r);for(;n.length>f;)e(c,r=n[f++])&&(~o(a,r)||a.push(r));return a}},function(t,n,r){t.exports=r(13)},function(t,n,r){var e=r(76)("meta"),i=r(6),o=r(24),u=r(11).f,c=0,f=Object.isExtensible||function(){return!0},a=!r(4)(function(){return f(Object.preventExtensions({}))}),s=function(t){u(t,e,{value:{i:"O"+ ++c,w:{}}})},l=function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,e)){if(!f(t))return"F";if(!n)return"E";s(t)}return t[e].i},h=function(t,n){if(!o(t,e)){if(!f(t))return!0;if(!n)return!1;s(t)}return t[e].w},v=function(t){return a&&p.NEED&&f(t)&&!o(t,e)&&s(t),t},p=t.exports={KEY:e,NEED:!1,fastKey:l,getWeak:h,onFreeze:v}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?e:r)(t)}},function(t,n){t.exports=function(t,n,r,e){if(!(t instanceof n)||void 0!==e&&e in t)throw TypeError(r+": incorrect invocation!");return t}},function(t,n){t.exports=!1},function(t,n,r){var e=r(2),i=r(173),o=r(133),u=r(145)("IE_PROTO"),c=function(){},f="prototype",a=function(){var t,n=r(132)("iframe"),e=o.length;for(n.style.display="none",r(135).appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),a=t.F;e--;)delete a[f][o[e]];return a()};t.exports=Object.create||function(t,n){var r;return null!==t?(c[f]=e(t),r=new c,c[f]=null,r[u]=t):r=a(),void 0===n?r:i(r,n)}},function(t,n,r){var e=r(175),i=r(133).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,i)}},function(t,n,r){var e=r(175),i=r(133);t.exports=Object.keys||function(t){return e(t,i)}},function(t,n,r){var e=r(28);t.exports=function(t,n,r){for(var i in n)e(t,i,n[i],r);return t}},function(t,n,r){"use strict";var e=r(3),i=r(11),o=r(10),u=r(7)("species");t.exports=function(t){var n=e[t];o&&n&&!n[u]&&i.f(n,u,{configurable:!0,get:function(){return this}})}},function(t,n,r){var e=r(67),i=Math.max,o=Math.min;t.exports=function(t,n){return t=e(t),t<0?i(t+n,0):o(t,n)}},function(t,n){var r=0,e=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+e).toString(36))}},function(t,n,r){var e=r(33);t.exports=function(t){return Object(e(t))}},function(t,n,r){var e=r(7)("unscopables"),i=Array.prototype;void 0==i[e]&&r(27)(i,e,{}),t.exports=function(t){i[e][t]=!0}},function(t,n,r){var e=r(53),i=r(169),o=r(137),u=r(2),c=r(16),f=r(154),a={},s={},n=t.exports=function(t,n,r,l,h){var v,p,d,y,g=h?function(){return t}:f(t),b=e(r,l,n?2:1),m=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(v=c(t.length);v>m;m++)if((y=n?b(u(p=t[m])[0],p[1]):b(t[m]))===a||y===s)return y}else for(d=g.call(t);!(p=d.next()).done;)if((y=i(d,b,p.value,n))===a||y===s)return y};n.BREAK=a,n.RETURN=s},function(t,n){t.exports={}},function(t,n,r){var e=r(11).f,i=r(24),o=r(7)("toStringTag");t.exports=function(t,n,r){t&&!i(t=r?t:t.prototype,o)&&e(t,o,{configurable:!0,value:n})}},function(t,n,r){var e=r(1),i=r(46),o=r(4),u=r(150),c="["+u+"]",f="​",a=RegExp("^"+c+c+"*"),s=RegExp(c+c+"*$"),l=function(t,n,r){var i={},c=o(function(){return!!u[t]()||f[t]()!=f}),a=i[t]=c?n(h):u[t];r&&(i[r]=a),e(e.P+e.F*c,"String",i)},h=l.trim=function(t,n){return t=String(i(t)),1&n&&(t=t.replace(a,"")),2&n&&(t=t.replace(s,"")),t};t.exports=l},function(t,n,r){t.exports={default:r(86),__esModule:!0}},function(t,n,r){t.exports={default:r(87),__esModule:!0}},function(t,n,r){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=r(84),o=e(i),u=r(83),c=e(u),f="function"==typeof c.default&&"symbol"==typeof o.default?function(t){return typeof t}:function(t){return t&&"function"==typeof c.default&&t.constructor===c.default&&t!==c.default.prototype?"symbol":typeof t};n.default="function"==typeof c.default&&"symbol"===f(o.default)?function(t){return void 0===t?"undefined":f(t)}:function(t){return t&&"function"==typeof c.default&&t.constructor===c.default&&t!==c.default.prototype?"symbol":void 0===t?"undefined":f(t)}},function(t,n,r){r(110),r(108),r(111),r(112),t.exports=r(25).Symbol},function(t,n,r){r(109),r(113),t.exports=r(44).f("iterator")},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n){t.exports=function(){}},function(t,n,r){var e=r(9),i=r(106),o=r(105);t.exports=function(t){return function(n,r,u){var c,f=e(n),a=i(f.length),s=o(u,a);if(t&&r!=r){for(;a>s;)if((c=f[s++])!=c)return!0}else for(;a>s;s++)if((t||s in f)&&f[s]===r)return t||s||0;return!t&&-1}}},function(t,n,r){var e=r(88);t.exports=function(t,n,r){if(e(t),void 0===n)return t;switch(r){case 1:return function(r){return t.call(n,r)};case 2:return function(r,e){return t.call(n,r,e)};case 3:return function(r,e,i){return t.call(n,r,e,i)}}return function(){return t.apply(n,arguments)}}},function(t,n,r){var e=r(19),i=r(62),o=r(37);t.exports=function(t){var n=e(t),r=i.f;if(r)for(var u,c=r(t),f=o.f,a=0;c.length>a;)f.call(t,u=c[a++])&&n.push(u);return n}},function(t,n,r){t.exports=r(5).document&&document.documentElement},function(t,n,r){var e=r(56);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},function(t,n,r){var e=r(56);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){"use strict";var e=r(60),i=r(22),o=r(38),u={};r(13)(u,r(15)("iterator"),function(){return this}),t.exports=function(t,n,r){t.prototype=e(u,{next:i(1,r)}),o(t,n+" Iterator")}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,r){var e=r(19),i=r(9);t.exports=function(t,n){for(var r,o=i(t),u=e(o),c=u.length,f=0;c>f;)if(o[r=u[f++]]===n)return r}},function(t,n,r){var e=r(23)("meta"),i=r(21),o=r(8),u=r(14).f,c=0,f=Object.isExtensible||function(){return!0},a=!r(18)(function(){return f(Object.preventExtensions({}))}),s=function(t){u(t,e,{value:{i:"O"+ ++c,w:{}}})},l=function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,e)){if(!f(t))return"F";if(!n)return"E";s(t)}return t[e].i},h=function(t,n){if(!o(t,e)){if(!f(t))return!0;if(!n)return!1;s(t)}return t[e].w},v=function(t){return a&&p.NEED&&f(t)&&!o(t,e)&&s(t),t},p=t.exports={KEY:e,NEED:!1,fastKey:l,getWeak:h,onFreeze:v}},function(t,n,r){var e=r(14),i=r(20),o=r(19);t.exports=r(12)?Object.defineProperties:function(t,n){i(t);for(var r,u=o(n),c=u.length,f=0;c>f;)e.f(t,r=u[f++],n[r]);return t}},function(t,n,r){var e=r(37),i=r(22),o=r(9),u=r(42),c=r(8),f=r(58),a=Object.getOwnPropertyDescriptor;n.f=r(12)?a:function(t,n){if(t=o(t),n=u(n,!0),f)try{return a(t,n)}catch(t){}if(c(t,n))return i(!e.f.call(t,n),t[n])}},function(t,n,r){var e=r(9),i=r(61).f,o={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(t){try{return i(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==o.call(t)?c(t):i(e(t))}},function(t,n,r){var e=r(8),i=r(77),o=r(39)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),e(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,r){var e=r(41),i=r(33);t.exports=function(t){return function(n,r){var o,u,c=String(i(n)),f=e(r),a=c.length;return f<0||f>=a?t?"":void 0:(o=c.charCodeAt(f),o<55296||o>56319||f+1===a||(u=c.charCodeAt(f+1))<56320||u>57343?t?c.charAt(f):o:t?c.slice(f,f+2):u-56320+(o-55296<<10)+65536)}}},function(t,n,r){var e=r(41),i=Math.max,o=Math.min;t.exports=function(t,n){return t=e(t),t<0?i(t+n,0):o(t,n)}},function(t,n,r){var e=r(41),i=Math.min;t.exports=function(t){return t>0?i(e(t),9007199254740991):0}},function(t,n,r){"use strict";var e=r(89),i=r(97),o=r(35),u=r(9);t.exports=r(59)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):"keys"==n?i(0,r):"values"==n?i(0,t[r]):i(0,[r,t[r]])},"values"),o.Arguments=o.Array,e("keys"),e("values"),e("entries")},function(t,n){},function(t,n,r){"use strict";var e=r(104)(!0);r(59)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,r=this._i;return r>=n.length?{value:void 0,done:!0}:(t=e(n,r),this._i+=t.length,{value:t,done:!1})})},function(t,n,r){"use strict";var e=r(5),i=r(8),o=r(12),u=r(51),c=r(64),f=r(99).KEY,a=r(18),s=r(40),l=r(38),h=r(23),v=r(15),p=r(44),d=r(43),y=r(98),g=r(92),b=r(95),m=r(20),x=r(9),w=r(42),S=r(22),_=r(60),O=r(102),E=r(101),P=r(14),j=r(19),F=E.f,M=P.f,A=O.f,N=e.Symbol,T=e.JSON,I=T&&T.stringify,k="prototype",L=v("_hidden"),R=v("toPrimitive"),C={}.propertyIsEnumerable,D=s("symbol-registry"),U=s("symbols"),W=s("op-symbols"),G=Object[k],B="function"==typeof N,V=e.QObject,z=!V||!V[k]||!V[k].findChild,q=o&&a(function(){return 7!=_(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a})?function(t,n,r){var e=F(G,n);e&&delete G[n],M(t,n,r),e&&t!==G&&M(G,n,e)}:M,K=function(t){var n=U[t]=_(N[k]);return n._k=t,n},J=B&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},Y=function(t,n,r){return t===G&&Y(W,n,r),m(t),n=w(n,!0),m(r),i(U,n)?(r.enumerable?(i(t,L)&&t[L][n]&&(t[L][n]=!1),r=_(r,{enumerable:S(0,!1)})):(i(t,L)||M(t,L,S(1,{})),t[L][n]=!0),q(t,n,r)):M(t,n,r)},H=function(t,n){m(t);for(var r,e=g(n=x(n)),i=0,o=e.length;o>i;)Y(t,r=e[i++],n[r]);return t},$=function(t,n){return void 0===n?_(t):H(_(t),n)},X=function(t){var n=C.call(this,t=w(t,!0));return!(this===G&&i(U,t)&&!i(W,t))&&(!(n||!i(this,t)||!i(U,t)||i(this,L)&&this[L][t])||n)},Q=function(t,n){if(t=x(t),n=w(n,!0),t!==G||!i(U,n)||i(W,n)){var r=F(t,n);return!r||!i(U,n)||i(t,L)&&t[L][n]||(r.enumerable=!0),r}},Z=function(t){for(var n,r=A(x(t)),e=[],o=0;r.length>o;)i(U,n=r[o++])||n==L||n==f||e.push(n);return e},tt=function(t){for(var n,r=t===G,e=A(r?W:x(t)),o=[],u=0;e.length>u;)!i(U,n=e[u++])||r&&!i(G,n)||o.push(U[n]);return o};B||(N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),n=function(r){this===G&&n.call(W,r),i(this,L)&&i(this[L],t)&&(this[L][t]=!1),q(this,t,S(1,r))};return o&&z&&q(G,t,{configurable:!0,set:n}),K(t)},c(N[k],"toString",function(){return this._k}),E.f=Q,P.f=Y,r(61).f=O.f=Z,r(37).f=X,r(62).f=tt,o&&!r(36)&&c(G,"propertyIsEnumerable",X,!0),p.f=function(t){return K(v(t))}),u(u.G+u.W+u.F*!B,{Symbol:N});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;nt.length>rt;)v(nt[rt++]);for(var nt=j(v.store),rt=0;nt.length>rt;)d(nt[rt++]);u(u.S+u.F*!B,"Symbol",{for:function(t){return i(D,t+="")?D[t]:D[t]=N(t)},keyFor:function(t){if(J(t))return y(D,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){z=!0},useSimple:function(){z=!1}}),u(u.S+u.F*!B,"Object",{create:$,defineProperty:Y,defineProperties:H,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),T&&u(u.S+u.F*(!B||a(function(){var t=N();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!J(t)){for(var n,r,e=[t],i=1;arguments.length>i;)e.push(arguments[i++]);return n=e[1],"function"==typeof n&&(r=n),!r&&b(n)||(n=function(t,n){if(r&&(n=r.call(this,t,n)),!J(n))return n}),e[1]=n,I.apply(T,e)}}}),N[k][R]||r(13)(N[k],R,N[k].valueOf),l(N,"Symbol"),l(Math,"Math",!0),l(e.JSON,"JSON",!0)},function(t,n,r){r(43)("asyncIterator")},function(t,n,r){r(43)("observable")},function(t,n,r){r(107);for(var e=r(5),i=r(13),o=r(35),u=r(15)("toStringTag"),c=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],f=0;f<5;f++){var a=c[f],s=e[a],l=s&&s.prototype;l&&!l[u]&&i(l,u,a),o[a]=o.Array}},function(t,n,r){var e=r(45),i=r(7)("toStringTag"),o="Arguments"==e(function(){return arguments}()),u=function(t,n){try{return t[n]}catch(t){}};t.exports=function(t){var n,r,c;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=u(n=Object(t),i))?r:o?e(n):"Object"==(c=e(n))&&"function"==typeof n.callee?"Arguments":c}},function(t,n,r){var e=r(45);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,r){var e=r(30),i=r(16),o=r(75);t.exports=function(t){return function(n,r,u){var c,f=e(n),a=i(f.length),s=o(u,a);if(t&&r!=r){for(;a>s;)if((c=f[s++])!=c)return!0}else for(;a>s;s++)if((t||s in f)&&f[s]===r)return t||s||0;return!t&&-1}}},function(t,n,r){"use strict";var e=r(3),i=r(1),o=r(28),u=r(73),c=r(65),f=r(79),a=r(68),s=r(6),l=r(4),h=r(123),v=r(81),p=r(136);t.exports=function(t,n,r,d,y,g){var b=e[t],m=b,x=y?"set":"add",w=m&&m.prototype,S={},_=function(t){var n=w[t];o(w,t,"delete"==t?function(t){return!(g&&!s(t))&&n.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!s(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!s(t)?void 0:n.call(this,0===t?0:t)}:"add"==t?function(t){return n.call(this,0===t?0:t),this}:function(t,r){return n.call(this,0===t?0:t,r),this})};if("function"==typeof m&&(g||w.forEach&&!l(function(){(new m).entries().next()}))){var O=new m,E=O[x](g?{}:-0,1)!=O,P=l(function(){O.has(1)}),j=h(function(t){new m(t)}),F=!g&&l(function(){for(var t=new m,n=5;n--;)t[x](n,n);return!t.has(-0)});j||(m=n(function(n,r){a(n,m,t);var e=p(new b,n,m);return void 0!=r&&f(r,y,e[x],e),e}),m.prototype=w,w.constructor=m),(P||F)&&(_("delete"),_("has"),y&&_("get")),(F||E)&&_(x),g&&w.clear&&delete w.clear}else m=d.getConstructor(n,t,y,x),u(m.prototype,r),c.NEED=!0;return v(m,t),S[t]=m,i(i.G+i.W+i.F*(m!=b),S),g||d.setStrong(m,t,y),m}},function(t,n,r){"use strict";var e=r(27),i=r(28),o=r(4),u=r(46),c=r(7);t.exports=function(t,n,r){var f=c(t),a=r(u,f,""[t]),s=a[0],l=a[1];o(function(){var n={};return n[f]=function(){return 7},7!=""[t](n)})&&(i(String.prototype,t,s),e(RegExp.prototype,f,2==n?function(t,n){return l.call(t,this,n)}:function(t){return l.call(t,this)}))}
},function(t,n,r){"use strict";var e=r(2);t.exports=function(){var t=e(this),n="";return t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),t.sticky&&(n+="y"),n}},function(t,n){t.exports=function(t,n,r){var e=void 0===r;switch(n.length){case 0:return e?t():t.call(r);case 1:return e?t(n[0]):t.call(r,n[0]);case 2:return e?t(n[0],n[1]):t.call(r,n[0],n[1]);case 3:return e?t(n[0],n[1],n[2]):t.call(r,n[0],n[1],n[2]);case 4:return e?t(n[0],n[1],n[2],n[3]):t.call(r,n[0],n[1],n[2],n[3])}return t.apply(r,n)}},function(t,n,r){var e=r(6),i=r(45),o=r(7)("match");t.exports=function(t){var n;return e(t)&&(void 0!==(n=t[o])?!!n:"RegExp"==i(t))}},function(t,n,r){var e=r(7)("iterator"),i=!1;try{var o=[7][e]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,n){if(!n&&!i)return!1;var r=!1;try{var o=[7],u=o[e]();u.next=function(){return{done:r=!0}},o[e]=function(){return u},t(o)}catch(t){}return r}},function(t,n,r){t.exports=r(69)||!r(4)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete r(3)[t]})},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){var e=r(3),i="__core-js_shared__",o=e[i]||(e[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,n,r){for(var e,i=r(3),o=r(27),u=r(76),c=u("typed_array"),f=u("view"),a=!(!i.ArrayBuffer||!i.DataView),s=a,l=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l<9;)(e=i[h[l++]])?(o(e.prototype,c,!0),o(e.prototype,f,!0)):s=!1;t.exports={ABV:a,CONSTR:s,TYPED:c,VIEW:f}},function(t,n){"use strict";var r={versions:function(){var t=window.navigator.userAgent;return{trident:t.indexOf("Trident")>-1,presto:t.indexOf("Presto")>-1,webKit:t.indexOf("AppleWebKit")>-1,gecko:t.indexOf("Gecko")>-1&&-1==t.indexOf("KHTML"),mobile:!!t.match(/AppleWebKit.*Mobile.*/),ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:t.indexOf("Android")>-1||t.indexOf("Linux")>-1,iPhone:t.indexOf("iPhone")>-1||t.indexOf("Mac")>-1,iPad:t.indexOf("iPad")>-1,webApp:-1==t.indexOf("Safari"),weixin:-1==t.indexOf("MicroMessenger")}}()};t.exports=r},function(t,n,r){"use strict";var e=r(85),i=function(t){return t&&t.__esModule?t:{default:t}}(e),o=function(){function t(t,n,e){return n||e?String.fromCharCode(n||e):r[t]||t}function n(t){return e[t]}var r={"&quot;":'"',"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" "},e={};for(var u in r)e[r[u]]=u;return r["&apos;"]="'",e["'"]="&#39;",{encode:function(t){return t?(""+t).replace(/['<> "&]/g,n).replace(/\r?\n/g,"<br/>").replace(/\s/g,"&nbsp;"):""},decode:function(n){return n?(""+n).replace(/<br\s*\/?>/gi,"\n").replace(/&quot;|&lt;|&gt;|&amp;|&nbsp;|&apos;|&#(\d+);|&#(\d+)/g,t).replace(/\u00a0/g," "):""},encodeBase16:function(t){if(!t)return t;t+="";for(var n=[],r=0,e=t.length;e>r;r++)n.push(t.charCodeAt(r).toString(16).toUpperCase());return n.join("")},encodeBase16forJSON:function(t){if(!t)return t;t=t.replace(/[\u4E00-\u9FBF]/gi,function(t){return escape(t).replace("%u","\\u")});for(var n=[],r=0,e=t.length;e>r;r++)n.push(t.charCodeAt(r).toString(16).toUpperCase());return n.join("")},decodeBase16:function(t){if(!t)return t;t+="";for(var n=[],r=0,e=t.length;e>r;r+=2)n.push(String.fromCharCode("0x"+t.slice(r,r+2)));return n.join("")},encodeObject:function(t){if(t instanceof Array)for(var n=0,r=t.length;r>n;n++)t[n]=o.encodeObject(t[n]);else if("object"==(void 0===t?"undefined":(0,i.default)(t)))for(var e in t)t[e]=o.encodeObject(t[e]);else if("string"==typeof t)return o.encode(t);return t},loadScript:function(t){var n=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(n),n.setAttribute("src",t)},addLoadEvent:function(t){var n=window.onload;"function"!=typeof window.onload?window.onload=t:window.onload=function(){n(),t()}}}}();t.exports=o},function(t,n,r){"use strict";var e=r(17),i=r(75),o=r(16);t.exports=function(t){for(var n=e(this),r=o(n.length),u=arguments.length,c=i(u>1?arguments[1]:void 0,r),f=u>2?arguments[2]:void 0,a=void 0===f?r:i(f,r);a>c;)n[c++]=t;return n}},function(t,n,r){"use strict";var e=r(11),i=r(66);t.exports=function(t,n,r){n in t?e.f(t,n,i(0,r)):t[n]=r}},function(t,n,r){var e=r(6),i=r(3).document,o=e(i)&&e(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n,r){var e=r(7)("match");t.exports=function(t){var n=/./;try{"/./"[t](n)}catch(r){try{return n[e]=!1,!"/./"[t](n)}catch(t){}}return!0}},function(t,n,r){t.exports=r(3).document&&document.documentElement},function(t,n,r){var e=r(6),i=r(144).set;t.exports=function(t,n,r){var o,u=n.constructor;return u!==r&&"function"==typeof u&&(o=u.prototype)!==r.prototype&&e(o)&&i&&i(t,o),t}},function(t,n,r){var e=r(80),i=r(7)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(e.Array===t||o[i]===t)}},function(t,n,r){var e=r(45);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){"use strict";var e=r(70),i=r(66),o=r(81),u={};r(27)(u,r(7)("iterator"),function(){return this}),t.exports=function(t,n,r){t.prototype=e(u,{next:i(1,r)}),o(t,n+" Iterator")}},function(t,n,r){"use strict";var e=r(69),i=r(1),o=r(28),u=r(27),c=r(24),f=r(80),a=r(139),s=r(81),l=r(32),h=r(7)("iterator"),v=!([].keys&&"next"in[].keys()),p="keys",d="values",y=function(){return this};t.exports=function(t,n,r,g,b,m,x){a(r,n,g);var w,S,_,O=function(t){if(!v&&t in F)return F[t];switch(t){case p:case d:return function(){return new r(this,t)}}return function(){return new r(this,t)}},E=n+" Iterator",P=b==d,j=!1,F=t.prototype,M=F[h]||F["@@iterator"]||b&&F[b],A=M||O(b),N=b?P?O("entries"):A:void 0,T="Array"==n?F.entries||M:M;if(T&&(_=l(T.call(new t)))!==Object.prototype&&(s(_,E,!0),e||c(_,h)||u(_,h,y)),P&&M&&M.name!==d&&(j=!0,A=function(){return M.call(this)}),e&&!x||!v&&!j&&F[h]||u(F,h,A),f[n]=A,f[E]=y,b)if(w={values:P?A:O(d),keys:m?A:O(p),entries:N},x)for(S in w)S in F||o(F,S,w[S]);else i(i.P+i.F*(v||j),n,w);return w}},function(t,n){var r=Math.expm1;t.exports=!r||r(10)>22025.465794806718||r(10)<22025.465794806718||-2e-17!=r(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:r},function(t,n){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,n,r){var e=r(3),i=r(151).set,o=e.MutationObserver||e.WebKitMutationObserver,u=e.process,c=e.Promise,f="process"==r(45)(u);t.exports=function(){var t,n,r,a=function(){var e,i;for(f&&(e=u.domain)&&e.exit();t;){i=t.fn,t=t.next;try{i()}catch(e){throw t?r():n=void 0,e}}n=void 0,e&&e.enter()};if(f)r=function(){u.nextTick(a)};else if(o){var s=!0,l=document.createTextNode("");new o(a).observe(l,{characterData:!0}),r=function(){l.data=s=!s}}else if(c&&c.resolve){var h=c.resolve();r=function(){h.then(a)}}else r=function(){i.call(e,a)};return function(e){var i={fn:e,next:void 0};n&&(n.next=i),t||(t=i,r()),n=i}}},function(t,n,r){var e=r(6),i=r(2),o=function(t,n){if(i(t),!e(n)&&null!==n)throw TypeError(n+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,e){try{e=r(53)(Function.call,r(31).f(Object.prototype,"__proto__").set,2),e(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,r){return o(t,r),n?t.__proto__=r:e(t,r),t}}({},!1):void 0),check:o}},function(t,n,r){var e=r(126)("keys"),i=r(76);t.exports=function(t){return e[t]||(e[t]=i(t))}},function(t,n,r){var e=r(2),i=r(26),o=r(7)("species");t.exports=function(t,n){var r,u=e(t).constructor;return void 0===u||void 0==(r=e(u)[o])?n:i(r)}},function(t,n,r){var e=r(67),i=r(46);t.exports=function(t){return function(n,r){var o,u,c=String(i(n)),f=e(r),a=c.length;return f<0||f>=a?t?"":void 0:(o=c.charCodeAt(f),o<55296||o>56319||f+1===a||(u=c.charCodeAt(f+1))<56320||u>57343?t?c.charAt(f):o:t?c.slice(f,f+2):u-56320+(o-55296<<10)+65536)}}},function(t,n,r){var e=r(122),i=r(46);t.exports=function(t,n,r){if(e(n))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(t))}},function(t,n,r){"use strict";var e=r(67),i=r(46);t.exports=function(t){var n=String(i(this)),r="",o=e(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(n+=n))1&o&&(r+=n);return r}},function(t,n){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,n,r){var e,i,o,u=r(53),c=r(121),f=r(135),a=r(132),s=r(3),l=s.process,h=s.setImmediate,v=s.clearImmediate,p=s.MessageChannel,d=0,y={},g="onreadystatechange",b=function(){var t=+this;if(y.hasOwnProperty(t)){var n=y[t];delete y[t],n()}},m=function(t){b.call(t.data)};h&&v||(h=function(t){for(var n=[],r=1;arguments.length>r;)n.push(arguments[r++]);return y[++d]=function(){c("function"==typeof t?t:Function(t),n)},e(d),d},v=function(t){delete y[t]},"process"==r(45)(l)?e=function(t){l.nextTick(u(b,t,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=m,e=u(o.postMessage,o,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts?(e=function(t){s.postMessage(t+"","*")},s.addEventListener("message",m,!1)):e=g in a("script")?function(t){f.appendChild(a("script"))[g]=function(){f.removeChild(this),b.call(t)}}:function(t){setTimeout(u(b,t,1),0)}),t.exports={set:h,clear:v}},function(t,n,r){"use strict";var e=r(3),i=r(10),o=r(69),u=r(127),c=r(27),f=r(73),a=r(4),s=r(68),l=r(67),h=r(16),v=r(71).f,p=r(11).f,d=r(130),y=r(81),g="ArrayBuffer",b="DataView",m="prototype",x="Wrong length!",w="Wrong index!",S=e[g],_=e[b],O=e.Math,E=e.RangeError,P=e.Infinity,j=S,F=O.abs,M=O.pow,A=O.floor,N=O.log,T=O.LN2,I="buffer",k="byteLength",L="byteOffset",R=i?"_b":I,C=i?"_l":k,D=i?"_o":L,U=function(t,n,r){var e,i,o,u=Array(r),c=8*r-n-1,f=(1<<c)-1,a=f>>1,s=23===n?M(2,-24)-M(2,-77):0,l=0,h=t<0||0===t&&1/t<0?1:0;for(t=F(t),t!=t||t===P?(i=t!=t?1:0,e=f):(e=A(N(t)/T),t*(o=M(2,-e))<1&&(e--,o*=2),t+=e+a>=1?s/o:s*M(2,1-a),t*o>=2&&(e++,o/=2),e+a>=f?(i=0,e=f):e+a>=1?(i=(t*o-1)*M(2,n),e+=a):(i=t*M(2,a-1)*M(2,n),e=0));n>=8;u[l++]=255&i,i/=256,n-=8);for(e=e<<n|i,c+=n;c>0;u[l++]=255&e,e/=256,c-=8);return u[--l]|=128*h,u},W=function(t,n,r){var e,i=8*r-n-1,o=(1<<i)-1,u=o>>1,c=i-7,f=r-1,a=t[f--],s=127&a;for(a>>=7;c>0;s=256*s+t[f],f--,c-=8);for(e=s&(1<<-c)-1,s>>=-c,c+=n;c>0;e=256*e+t[f],f--,c-=8);if(0===s)s=1-u;else{if(s===o)return e?NaN:a?-P:P;e+=M(2,n),s-=u}return(a?-1:1)*e*M(2,s-n)},G=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},B=function(t){return[255&t]},V=function(t){return[255&t,t>>8&255]},z=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},q=function(t){return U(t,52,8)},K=function(t){return U(t,23,4)},J=function(t,n,r){p(t[m],n,{get:function(){return this[r]}})},Y=function(t,n,r,e){var i=+r,o=l(i);if(i!=o||o<0||o+n>t[C])throw E(w);var u=t[R]._b,c=o+t[D],f=u.slice(c,c+n);return e?f:f.reverse()},H=function(t,n,r,e,i,o){var u=+r,c=l(u);if(u!=c||c<0||c+n>t[C])throw E(w);for(var f=t[R]._b,a=c+t[D],s=e(+i),h=0;h<n;h++)f[a+h]=s[o?h:n-h-1]},$=function(t,n){s(t,S,g);var r=+n,e=h(r);if(r!=e)throw E(x);return e};if(u.ABV){if(!a(function(){new S})||!a(function(){new S(.5)})){S=function(t){return new j($(this,t))};for(var X,Q=S[m]=j[m],Z=v(j),tt=0;Z.length>tt;)(X=Z[tt++])in S||c(S,X,j[X]);o||(Q.constructor=S)}var nt=new _(new S(2)),rt=_[m].setInt8;nt.setInt8(0,2147483648),nt.setInt8(1,2147483649),!nt.getInt8(0)&&nt.getInt8(1)||f(_[m],{setInt8:function(t,n){rt.call(this,t,n<<24>>24)},setUint8:function(t,n){rt.call(this,t,n<<24>>24)}},!0)}else S=function(t){var n=$(this,t);this._b=d.call(Array(n),0),this[C]=n},_=function(t,n,r){s(this,_,b),s(t,S,b);var e=t[C],i=l(n);if(i<0||i>e)throw E("Wrong offset!");if(r=void 0===r?e-i:h(r),i+r>e)throw E(x);this[R]=t,this[D]=i,this[C]=r},i&&(J(S,k,"_l"),J(_,I,"_b"),J(_,k,"_l"),J(_,L,"_o")),f(_[m],{getInt8:function(t){return Y(this,1,t)[0]<<24>>24},getUint8:function(t){return Y(this,1,t)[0]},getInt16:function(t){var n=Y(this,2,t,arguments[1]);return(n[1]<<8|n[0])<<16>>16},getUint16:function(t){var n=Y(this,2,t,arguments[1]);return n[1]<<8|n[0]},getInt32:function(t){return G(Y(this,4,t,arguments[1]))},getUint32:function(t){return G(Y(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return W(Y(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return W(Y(this,8,t,arguments[1]),52,8)},setInt8:function(t,n){H(this,1,t,B,n)},setUint8:function(t,n){H(this,1,t,B,n)},setInt16:function(t,n){H(this,2,t,V,n,arguments[2])},setUint16:function(t,n){H(this,2,t,V,n,arguments[2])},setInt32:function(t,n){H(this,4,t,z,n,arguments[2])},setUint32:function(t,n){H(this,4,t,z,n,arguments[2])},setFloat32:function(t,n){H(this,4,t,K,n,arguments[2])},setFloat64:function(t,n){H(this,8,t,q,n,arguments[2])}});y(S,g),y(_,b),c(_[m],u.VIEW,!0),n[g]=S,n[b]=_},function(t,n,r){var e=r(3),i=r(52),o=r(69),u=r(182),c=r(11).f;t.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:e.Symbol||{});"_"==t.charAt(0)||t in n||c(n,t,{value:u.f(t)})}},function(t,n,r){var e=r(114),i=r(7)("iterator"),o=r(80);t.exports=r(52).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[e(t)]}},function(t,n,r){"use strict";var e=r(78),i=r(170),o=r(80),u=r(30);t.exports=r(140)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):"keys"==n?i(0,r):"values"==n?i(0,t[r]):i(0,[r,t[r]])},"values"),o.Arguments=o.Array,e("keys"),e("values"),e("entries")},function(t,n){function r(t,n){t.classList?t.classList.add(n):t.className+=" "+n}t.exports=r},function(t,n){function r(t,n){if(t.classList)t.classList.remove(n);else{var r=new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi");t.className=t.className.replace(r," ")}}t.exports=r},function(t,n){function r(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function i(t){if(s===setTimeout)return setTimeout(t,0);if((s===r||!s)&&setTimeout)return s=setTimeout,setTimeout(t,0);try{return s(t,0)}catch(n){try{return s.call(null,t,0)}catch(n){return s.call(this,t,0)}}}function o(t){if(l===clearTimeout)return clearTimeout(t);if((l===e||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{return l(t)}catch(n){try{return l.call(null,t)}catch(n){return l.call(this,t)}}}function u(){d&&v&&(d=!1,v.length?p=v.concat(p):y=-1,p.length&&c())}function c(){if(!d){var t=i(u);d=!0;for(var n=p.length;n;){for(v=p,p=[];++y<n;)v&&v[y].run();y=-1,n=p.length}v=null,d=!1,o(t)}}function f(t,n){this.fun=t,this.array=n}function a(){}var s,l,h=t.exports={};!function(){try{s="function"==typeof setTimeout?setTimeout:r}catch(t){s=r}try{l="function"==typeof clearTimeout?clearTimeout:e}catch(t){l=e}}();var v,p=[],d=!1,y=-1;h.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)n[r-1]=arguments[r];p.push(new f(t,n)),1!==p.length||d||i(c)},f.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=a,h.addListener=a,h.once=a,h.off=a,h.removeListener=a,h.removeAllListeners=a,h.emit=a,h.prependListener=a,h.prependOnceListener=a,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,n,r){var e=r(45);t.exports=function(t,n){if("number"!=typeof t&&"Number"!=e(t))throw TypeError(n);return+t}},function(t,n,r){"use strict";var e=r(17),i=r(75),o=r(16);t.exports=[].copyWithin||function(t,n){var r=e(this),u=o(r.length),c=i(t,u),f=i(n,u),a=arguments.length>2?arguments[2]:void 0,s=Math.min((void 0===a?u:i(a,u))-f,u-c),l=1;for(f<c&&c<f+s&&(l=-1,f+=s-1,c+=s-1);s-- >0;)f in r?r[c]=r[f]:delete r[c],c+=l,f+=l;return r}},function(t,n,r){var e=r(79);t.exports=function(t,n){var r=[];return e(t,!1,r.push,r,n),r}},function(t,n,r){var e=r(26),i=r(17),o=r(115),u=r(16);t.exports=function(t,n,r,c,f){e(n);var a=i(t),s=o(a),l=u(a.length),h=f?l-1:0,v=f?-1:1;if(r<2)for(;;){if(h in s){c=s[h],h+=v;break}if(h+=v,f?h<0:l<=h)throw TypeError("Reduce of empty array with no initial value")}for(;f?h>=0:l>h;h+=v)h in s&&(c=n(c,s[h],h,a));return c}},function(t,n,r){"use strict";var e=r(26),i=r(6),o=r(121),u=[].slice,c={},f=function(t,n,r){if(!(n in c)){for(var e=[],i=0;i<n;i++)e[i]="a["+i+"]";c[n]=Function("F,a","return new F("+e.join(",")+")")}return c[n](t,r)};t.exports=Function.bind||function(t){var n=e(this),r=u.call(arguments,1),c=function(){var e=r.concat(u.call(arguments));return this instanceof c?f(n,e.length,e):o(n,e,t)};return i(n.prototype)&&(c.prototype=n.prototype),c}},function(t,n,r){"use strict";var e=r(11).f,i=r(70),o=r(73),u=r(53),c=r(68),f=r(46),a=r(79),s=r(140),l=r(170),h=r(74),v=r(10),p=r(65).fastKey,d=v?"_s":"size",y=function(t,n){var r,e=p(n);if("F"!==e)return t._i[e];for(r=t._f;r;r=r.n)if(r.k==n)return r};t.exports={getConstructor:function(t,n,r,s){var l=t(function(t,e){c(t,l,n,"_i"),t._i=i(null),t._f=void 0,t._l=void 0,t[d]=0,void 0!=e&&a(e,r,t[s],t)});return o(l.prototype,{clear:function(){for(var t=this,n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[d]=0},delete:function(t){var n=this,r=y(n,t);if(r){var e=r.n,i=r.p;delete n._i[r.i],r.r=!0,i&&(i.n=e),e&&(e.p=i),n._f==r&&(n._f=e),n._l==r&&(n._l=i),n[d]--}return!!r},forEach:function(t){c(this,l,"forEach");for(var n,r=u(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!y(this,t)}}),v&&e(l.prototype,"size",{get:function(){return f(this[d])}}),l},def:function(t,n,r){var e,i,o=y(t,n);return o?o.v=r:(t._l=o={i:i=p(n,!0),k:n,v:r,p:e=t._l,n:void 0,r:!1},t._f||(t._f=o),e&&(e.n=o),t[d]++,"F"!==i&&(t._i[i]=o)),t},getEntry:y,setStrong:function(t,n,r){s(t,n,function(t,n){this._t=t,this._k=n,this._l=void 0},function(){for(var t=this,n=t._k,r=t._l;r&&r.r;)r=r.p;return t._t&&(t._l=r=r?r.n:t._t._f)?"keys"==n?l(0,r.k):"values"==n?l(0,r.v):l(0,[r.k,r.v]):(t._t=void 0,l(1))},r?"entries":"values",!r,!0),h(n)}}},function(t,n,r){var e=r(114),i=r(161);t.exports=function(t){return function(){if(e(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},function(t,n,r){"use strict";var e=r(73),i=r(65).getWeak,o=r(2),u=r(6),c=r(68),f=r(79),a=r(48),s=r(24),l=a(5),h=a(6),v=0,p=function(t){return t._l||(t._l=new d)},d=function(){this.a=[]},y=function(t,n){return l(t.a,function(t){return t[0]===n})};d.prototype={get:function(t){var n=y(this,t);if(n)return n[1]},has:function(t){return!!y(this,t)},set:function(t,n){var r=y(this,t);r?r[1]=n:this.a.push([t,n])},delete:function(t){var n=h(this.a,function(n){return n[0]===t});return~n&&this.a.splice(n,1),!!~n}},t.exports={getConstructor:function(t,n,r,o){var a=t(function(t,e){c(t,a,n,"_i"),t._i=v++,t._l=void 0,void 0!=e&&f(e,r,t[o],t)});return e(a.prototype,{delete:function(t){if(!u(t))return!1;var n=i(t);return!0===n?p(this).delete(t):n&&s(n,this._i)&&delete n[this._i]},has:function(t){if(!u(t))return!1;var n=i(t);return!0===n?p(this).has(t):n&&s(n,this._i)}}),a},def:function(t,n,r){var e=i(o(n),!0);return!0===e?p(t).set(n,r):e[t._i]=r,t},ufstore:p}},function(t,n,r){t.exports=!r(10)&&!r(4)(function(){return 7!=Object.defineProperty(r(132)("div"),"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(6),i=Math.floor;t.exports=function(t){return!e(t)&&isFinite(t)&&i(t)===t}},function(t,n,r){var e=r(2);t.exports=function(t,n,r,i){try{return i?n(e(r)[0],r[1]):n(r)}catch(n){var o=t.return;throw void 0!==o&&e(o.call(t)),n}}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,n,r){"use strict";var e=r(72),i=r(125),o=r(116),u=r(17),c=r(115),f=Object.assign;t.exports=!f||r(4)(function(){var t={},n={},r=Symbol(),e="abcdefghijklmnopqrst";return t[r]=7,e.split("").forEach(function(t){n[t]=t}),7!=f({},t)[r]||Object.keys(f({},n)).join("")!=e})?function(t,n){for(var r=u(t),f=arguments.length,a=1,s=i.f,l=o.f;f>a;)for(var h,v=c(arguments[a++]),p=s?e(v).concat(s(v)):e(v),d=p.length,y=0;d>y;)l.call(v,h=p[y++])&&(r[h]=v[h]);return r}:f},function(t,n,r){var e=r(11),i=r(2),o=r(72);t.exports=r(10)?Object.defineProperties:function(t,n){i(t);for(var r,u=o(n),c=u.length,f=0;c>f;)e.f(t,r=u[f++],n[r]);return t}},function(t,n,r){var e=r(30),i=r(71).f,o={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(t){try{return i(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==o.call(t)?c(t):i(e(t))}},function(t,n,r){var e=r(24),i=r(30),o=r(117)(!1),u=r(145)("IE_PROTO");t.exports=function(t,n){var r,c=i(t),f=0,a=[];for(r in c)r!=u&&e(c,r)&&a.push(r);for(;n.length>f;)e(c,r=n[f++])&&(~o(a,r)||a.push(r));return a}},function(t,n,r){var e=r(72),i=r(30),o=r(116).f;t.exports=function(t){return function(n){for(var r,u=i(n),c=e(u),f=c.length,a=0,s=[];f>a;)o.call(u,r=c[a++])&&s.push(t?[r,u[r]]:u[r]);return s}}},function(t,n,r){var e=r(71),i=r(125),o=r(2),u=r(3).Reflect;t.exports=u&&u.ownKeys||function(t){var n=e.f(o(t)),r=i.f;return r?n.concat(r(t)):n}},function(t,n,r){var e=r(3).parseFloat,i=r(82).trim;t.exports=1/e(r(150)+"-0")!=-1/0?function(t){var n=i(String(t),3),r=e(n);return 0===r&&"-"==n.charAt(0)?-0:r}:e},function(t,n,r){var e=r(3).parseInt,i=r(82).trim,o=r(150),u=/^[\-+]?0[xX]/;t.exports=8!==e(o+"08")||22!==e(o+"0x16")?function(t,n){var r=i(String(t),3);return e(r,n>>>0||(u.test(r)?16:10))}:e},function(t,n){t.exports=Object.is||function(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n}},function(t,n,r){var e=r(16),i=r(149),o=r(46);t.exports=function(t,n,r,u){var c=String(o(t)),f=c.length,a=void 0===r?" ":String(r),s=e(n);if(s<=f||""==a)return c;var l=s-f,h=i.call(a,Math.ceil(l/a.length));return h.length>l&&(h=h.slice(0,l)),u?h+c:c+h}},function(t,n,r){n.f=r(7)},function(t,n,r){"use strict";var e=r(164);t.exports=r(118)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var n=e.getEntry(this,t);return n&&n.v},set:function(t,n){return e.def(this,0===t?0:t,n)}},e,!0)},function(t,n,r){r(10)&&"g"!=/./g.flags&&r(11).f(RegExp.prototype,"flags",{configurable:!0,get:r(120)})},function(t,n,r){"use strict";var e=r(164);t.exports=r(118)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return e.def(this,t=0===t?0:t,t)}},e)},function(t,n,r){"use strict";var e,i=r(48)(0),o=r(28),u=r(65),c=r(172),f=r(166),a=r(6),s=u.getWeak,l=Object.isExtensible,h=f.ufstore,v={},p=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},d={get:function(t){if(a(t)){var n=s(t);return!0===n?h(this).get(t):n?n[this._i]:void 0}},set:function(t,n){return f.def(this,t,n)}},y=t.exports=r(118)("WeakMap",p,d,f,!0,!0);7!=(new y).set((Object.freeze||Object)(v),7).get(v)&&(e=f.getConstructor(p),c(e.prototype,d),u.NEED=!0,i(["delete","has","get","set"],function(t){var n=y.prototype,r=n[t];o(n,t,function(n,i){if(a(n)&&!l(n)){this._f||(this._f=new e);var o=this._f[t](n,i);return"set"==t?this:o}return r.call(this,n,i)})}))},,,,function(t,n){"use strict";function r(){var t=document.querySelector("#page-nav");if(t&&!document.querySelector("#page-nav .extend.prev")&&(t.innerHTML='<a class="extend prev disabled" rel="prev">&laquo; Prev</a>'+t.innerHTML),t&&!document.querySelector("#page-nav .extend.next")&&(t.innerHTML=t.innerHTML+'<a class="extend next disabled" rel="next">Next &raquo;</a>'),yiliaConfig&&yiliaConfig.open_in_new){document.querySelectorAll(".article-entry a:not(.article-more-a)").forEach(function(t){var n=t.getAttribute("target");n&&""!==n||t.setAttribute("target","_blank")})}if(yiliaConfig&&yiliaConfig.toc_hide_index){document.querySelectorAll(".toc-number").forEach(function(t){t.style.display="none"})}var n=document.querySelector("#js-aboutme");n&&0!==n.length&&(n.innerHTML=n.innerText)}t.exports={init:r}},function(t,n,r){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}function i(t,n){var r=/\/|index.html/g;return t.replace(r,"")===n.replace(r,"")}function o(){for(var t=document.querySelectorAll(".js-header-menu li a"),n=window.location.pathname,r=0,e=t.length;r<e;r++){var o=t[r];i(n,o.getAttribute("href"))&&(0,h.default)(o,"active")}}function u(t){for(var n=t.offsetLeft,r=t.offsetParent;null!==r;)n+=r.offsetLeft,r=r.offsetParent;return n}function c(t){for(var n=t.offsetTop,r=t.offsetParent;null!==r;)n+=r.offsetTop,r=r.offsetParent;return n}function f(t,n,r,e,i){var o=u(t),f=c(t)-n;if(f-r<=i){var a=t.$newDom;a||(a=t.cloneNode(!0),(0,d.default)(t,a),t.$newDom=a,a.style.position="fixed",a.style.top=(r||f)+"px",a.style.left=o+"px",a.style.zIndex=e||2,a.style.width="100%",a.style.color="#fff"),a.style.visibility="visible",t.style.visibility="hidden"}else{t.style.visibility="visible";var s=t.$newDom;s&&(s.style.visibility="hidden")}}function a(){var t=document.querySelector(".js-overlay"),n=document.querySelector(".js-header-menu");f(t,document.body.scrollTop,-63,2,0),f(n,document.body.scrollTop,1,3,0)}function s(){document.querySelector("#container").addEventListener("scroll",function(t){a()}),window.addEventListener("scroll",function(t){a()}),a()}var l=r(156),h=e(l),v=r(157),p=(e(v),r(382)),d=e(p),y=r(128),g=e(y),b=r(190),m=e(b),x=r(129);(function(){g.default.versions.mobile&&window.screen.width<800&&(o(),s())})(),(0,x.addLoadEvent)(function(){m.default.init()}),t.exports={}},,,,function(t,n,r){(function(t){"use strict";function n(t,n,r){t[n]||Object[e](t,n,{writable:!0,configurable:!0,value:r})}if(r(381),r(391),r(198),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;var e="defineProperty";n(String.prototype,"padLeft","".padStart),n(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&n(Array,t,Function.call.bind([][t]))})}).call(n,function(){return this}())},,,function(t,n,r){r(210),t.exports=r(52).RegExp.escape},,,,function(t,n,r){var e=r(6),i=r(138),o=r(7)("species");t.exports=function(t){var n;return i(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)||(n=void 0),e(n)&&null===(n=n[o])&&(n=void 0)),void 0===n?Array:n}},function(t,n,r){var e=r(202);t.exports=function(t,n){return new(e(t))(n)}},function(t,n,r){"use strict";var e=r(2),i=r(50),o="number";t.exports=function(t){if("string"!==t&&t!==o&&"default"!==t)throw TypeError("Incorrect hint");return i(e(this),t!=o)}},function(t,n,r){var e=r(72),i=r(125),o=r(116);t.exports=function(t){var n=e(t),r=i.f;if(r)for(var u,c=r(t),f=o.f,a=0;c.length>a;)f.call(t,u=c[a++])&&n.push(u);return n}},function(t,n,r){var e=r(72),i=r(30);t.exports=function(t,n){for(var r,o=i(t),u=e(o),c=u.length,f=0;c>f;)if(o[r=u[f++]]===n)return r}},function(t,n,r){"use strict";var e=r(208),i=r(121),o=r(26);t.exports=function(){for(var t=o(this),n=arguments.length,r=Array(n),u=0,c=e._,f=!1;n>u;)(r[u]=arguments[u++])===c&&(f=!0);return function(){var e,o=this,u=arguments.length,a=0,s=0;if(!f&&!u)return i(t,r,o);if(e=r.slice(),f)for(;n>a;a++)e[a]===c&&(e[a]=arguments[s++]);for(;u>s;)e.push(arguments[s++]);return i(t,e,o)}}},function(t,n,r){t.exports=r(3)},function(t,n){t.exports=function(t,n){var r=n===Object(n)?function(t){return n[t]}:n;return function(n){return String(n).replace(t,r)}}},function(t,n,r){var e=r(1),i=r(209)(/[\\^$*+?.()|[\]{}]/g,"\\$&");e(e.S,"RegExp",{escape:function(t){return i(t)}})},function(t,n,r){var e=r(1);e(e.P,"Array",{copyWithin:r(160)}),r(78)("copyWithin")},function(t,n,r){"use strict";var e=r(1),i=r(48)(4);e(e.P+e.F*!r(47)([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},function(t,n,r){var e=r(1);e(e.P,"Array",{fill:r(130)}),r(78)("fill")},function(t,n,r){"use strict";var e=r(1),i=r(48)(2);e(e.P+e.F*!r(47)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(48)(6),o="findIndex",u=!0;o in[]&&Array(1)[o](function(){u=!1}),e(e.P+e.F*u,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(78)(o)},function(t,n,r){"use strict";var e=r(1),i=r(48)(5),o="find",u=!0;o in[]&&Array(1)[o](function(){u=!1}),e(e.P+e.F*u,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(78)(o)},function(t,n,r){"use strict";var e=r(1),i=r(48)(0),o=r(47)([].forEach,!0);e(e.P+e.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(53),i=r(1),o=r(17),u=r(169),c=r(137),f=r(16),a=r(131),s=r(154);i(i.S+i.F*!r(123)(function(t){Array.from(t)}),"Array",{from:function(t){var n,r,i,l,h=o(t),v="function"==typeof this?this:Array,p=arguments.length,d=p>1?arguments[1]:void 0,y=void 0!==d,g=0,b=s(h);if(y&&(d=e(d,p>2?arguments[2]:void 0,2)),void 0==b||v==Array&&c(b))for(n=f(h.length),r=new v(n);n>g;g++)a(r,g,y?d(h[g],g):h[g]);else for(l=b.call(h),r=new v;!(i=l.next()).done;g++)a(r,g,y?u(l,d,[i.value,g],!0):i.value);return r.length=g,r}})},function(t,n,r){"use strict";var e=r(1),i=r(117)(!1),o=[].indexOf,u=!!o&&1/[1].indexOf(1,-0)<0;e(e.P+e.F*(u||!r(47)(o)),"Array",{indexOf:function(t){return u?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},function(t,n,r){var e=r(1);e(e.S,"Array",{isArray:r(138)})},function(t,n,r){"use strict";var e=r(1),i=r(30),o=[].join;e(e.P+e.F*(r(115)!=Object||!r(47)(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},function(t,n,r){"use strict";var e=r(1),i=r(30),o=r(67),u=r(16),c=[].lastIndexOf,f=!!c&&1/[1].lastIndexOf(1,-0)<0;e(e.P+e.F*(f||!r(47)(c)),"Array",{lastIndexOf:function(t){if(f)return c.apply(this,arguments)||0;var n=i(this),r=u(n.length),e=r-1;for(arguments.length>1&&(e=Math.min(e,o(arguments[1]))),e<0&&(e=r+e);e>=0;e--)if(e in n&&n[e]===t)return e||0;return-1}})},function(t,n,r){"use strict";var e=r(1),i=r(48)(1);e(e.P+e.F*!r(47)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(131);e(e.S+e.F*r(4)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,n=arguments.length,r=new("function"==typeof this?this:Array)(n);n>t;)i(r,t,arguments[t++]);return r.length=n,r}})},function(t,n,r){"use strict";var e=r(1),i=r(162);e(e.P+e.F*!r(47)([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},function(t,n,r){"use strict";var e=r(1),i=r(162);e(e.P+e.F*!r(47)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},function(t,n,r){"use strict";var e=r(1),i=r(135),o=r(45),u=r(75),c=r(16),f=[].slice;e(e.P+e.F*r(4)(function(){i&&f.call(i)}),"Array",{slice:function(t,n){var r=c(this.length),e=o(this);if(n=void 0===n?r:n,"Array"==e)return f.call(this,t,n);for(var i=u(t,r),a=u(n,r),s=c(a-i),l=Array(s),h=0;h<s;h++)l[h]="String"==e?this.charAt(i+h):this[i+h];return l}})},function(t,n,r){"use strict";var e=r(1),i=r(48)(3);e(e.P+e.F*!r(47)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(26),o=r(17),u=r(4),c=[].sort,f=[1,2,3];e(e.P+e.F*(u(function(){f.sort(void 0)})||!u(function(){f.sort(null)})||!r(47)(c)),"Array",{sort:function(t){return void 0===t?c.call(o(this)):c.call(o(this),i(t))}})},function(t,n,r){r(74)("Array")},function(t,n,r){var e=r(1);e(e.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,n,r){"use strict";var e=r(1),i=r(4),o=Date.prototype.getTime,u=function(t){return t>9?t:"0"+t};e(e.P+e.F*(i(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!i(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){
if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var t=this,n=t.getUTCFullYear(),r=t.getUTCMilliseconds(),e=n<0?"-":n>9999?"+":"";return e+("00000"+Math.abs(n)).slice(e?-6:-4)+"-"+u(t.getUTCMonth()+1)+"-"+u(t.getUTCDate())+"T"+u(t.getUTCHours())+":"+u(t.getUTCMinutes())+":"+u(t.getUTCSeconds())+"."+(r>99?r:"0"+u(r))+"Z"}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(50);e(e.P+e.F*r(4)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var n=i(this),r=o(n);return"number"!=typeof r||isFinite(r)?n.toISOString():null}})},function(t,n,r){var e=r(7)("toPrimitive"),i=Date.prototype;e in i||r(27)(i,e,r(204))},function(t,n,r){var e=Date.prototype,i="Invalid Date",o="toString",u=e[o],c=e.getTime;new Date(NaN)+""!=i&&r(28)(e,o,function(){var t=c.call(this);return t===t?u.call(this):i})},function(t,n,r){var e=r(1);e(e.P,"Function",{bind:r(163)})},function(t,n,r){"use strict";var e=r(6),i=r(32),o=r(7)("hasInstance"),u=Function.prototype;o in u||r(11).f(u,o,{value:function(t){if("function"!=typeof this||!e(t))return!1;if(!e(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},function(t,n,r){var e=r(11).f,i=r(66),o=r(24),u=Function.prototype,c="name",f=Object.isExtensible||function(){return!0};c in u||r(10)&&e(u,c,{configurable:!0,get:function(){try{var t=this,n=(""+t).match(/^\s*function ([^ (]*)/)[1];return o(t,c)||!f(t)||e(t,c,i(5,n)),n}catch(t){return""}}})},function(t,n,r){var e=r(1),i=r(171),o=Math.sqrt,u=Math.acosh;e(e.S+e.F*!(u&&710==Math.floor(u(Number.MAX_VALUE))&&u(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},function(t,n,r){function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}var i=r(1),o=Math.asinh;i(i.S+i.F*!(o&&1/o(0)>0),"Math",{asinh:e})},function(t,n,r){var e=r(1),i=Math.atanh;e(e.S+e.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,n,r){var e=r(1),i=r(142);e(e.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,n,r){var e=r(1),i=Math.exp;e(e.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,n,r){var e=r(1),i=r(141);e(e.S+e.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,n,r){var e=r(1),i=r(142),o=Math.pow,u=o(2,-52),c=o(2,-23),f=o(2,127)*(2-c),a=o(2,-126),s=function(t){return t+1/u-1/u};e(e.S,"Math",{fround:function(t){var n,r,e=Math.abs(t),o=i(t);return e<a?o*s(e/a/c)*a*c:(n=(1+c/u)*e,r=n-(n-e),r>f||r!=r?o*(1/0):o*r)}})},function(t,n,r){var e=r(1),i=Math.abs;e(e.S,"Math",{hypot:function(t,n){for(var r,e,o=0,u=0,c=arguments.length,f=0;u<c;)r=i(arguments[u++]),f<r?(e=f/r,o=o*e*e+1,f=r):r>0?(e=r/f,o+=e*e):o+=r;return f===1/0?1/0:f*Math.sqrt(o)}})},function(t,n,r){var e=r(1),i=Math.imul;e(e.S+e.F*r(4)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(t,n){var r=65535,e=+t,i=+n,o=r&e,u=r&i;return 0|o*u+((r&e>>>16)*u+o*(r&i>>>16)<<16>>>0)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{log10:function(t){return Math.log(t)/Math.LN10}})},function(t,n,r){var e=r(1);e(e.S,"Math",{log1p:r(171)})},function(t,n,r){var e=r(1);e(e.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,n,r){var e=r(1);e(e.S,"Math",{sign:r(142)})},function(t,n,r){var e=r(1),i=r(141),o=Math.exp;e(e.S+e.F*r(4)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,n,r){var e=r(1),i=r(141),o=Math.exp;e(e.S,"Math",{tanh:function(t){var n=i(t=+t),r=i(-t);return n==1/0?1:r==1/0?-1:(n-r)/(o(t)+o(-t))}})},function(t,n,r){var e=r(1);e(e.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,n,r){"use strict";var e=r(3),i=r(24),o=r(45),u=r(136),c=r(50),f=r(4),a=r(71).f,s=r(31).f,l=r(11).f,h=r(82).trim,v="Number",p=e[v],d=p,y=p.prototype,g=o(r(70)(y))==v,b="trim"in String.prototype,m=function(t){var n=c(t,!1);if("string"==typeof n&&n.length>2){n=b?n.trim():h(n,3);var r,e,i,o=n.charCodeAt(0);if(43===o||45===o){if(88===(r=n.charCodeAt(2))||120===r)return NaN}else if(48===o){switch(n.charCodeAt(1)){case 66:case 98:e=2,i=49;break;case 79:case 111:e=8,i=55;break;default:return+n}for(var u,f=n.slice(2),a=0,s=f.length;a<s;a++)if((u=f.charCodeAt(a))<48||u>i)return NaN;return parseInt(f,e)}}return+n};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var n=arguments.length<1?0:t,r=this;return r instanceof p&&(g?f(function(){y.valueOf.call(r)}):o(r)!=v)?u(new d(m(n)),r,p):m(n)};for(var x,w=r(10)?a(d):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;w.length>S;S++)i(d,x=w[S])&&!i(p,x)&&l(p,x,s(d,x));p.prototype=y,y.constructor=p,r(28)(e,v,p)}},function(t,n,r){var e=r(1);e(e.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,n,r){var e=r(1),i=r(3).isFinite;e(e.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,n,r){var e=r(1);e(e.S,"Number",{isInteger:r(168)})},function(t,n,r){var e=r(1);e(e.S,"Number",{isNaN:function(t){return t!=t}})},function(t,n,r){var e=r(1),i=r(168),o=Math.abs;e(e.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,n,r){var e=r(1);e(e.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,n,r){var e=r(1);e(e.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,n,r){var e=r(1),i=r(178);e(e.S+e.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(t,n,r){var e=r(1),i=r(179);e(e.S+e.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(t,n,r){"use strict";var e=r(1),i=r(67),o=r(159),u=r(149),c=1..toFixed,f=Math.floor,a=[0,0,0,0,0,0],s="Number.toFixed: incorrect invocation!",l="0",h=function(t,n){for(var r=-1,e=n;++r<6;)e+=t*a[r],a[r]=e%1e7,e=f(e/1e7)},v=function(t){for(var n=6,r=0;--n>=0;)r+=a[n],a[n]=f(r/t),r=r%t*1e7},p=function(){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==a[t]){var r=String(a[t]);n=""===n?r:n+u.call(l,7-r.length)+r}return n},d=function(t,n,r){return 0===n?r:n%2==1?d(t,n-1,r*t):d(t*t,n/2,r)},y=function(t){for(var n=0,r=t;r>=4096;)n+=12,r/=4096;for(;r>=2;)n+=1,r/=2;return n};e(e.P+e.F*(!!c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r(4)(function(){c.call({})})),"Number",{toFixed:function(t){var n,r,e,c,f=o(this,s),a=i(t),g="",b=l;if(a<0||a>20)throw RangeError(s);if(f!=f)return"NaN";if(f<=-1e21||f>=1e21)return String(f);if(f<0&&(g="-",f=-f),f>1e-21)if(n=y(f*d(2,69,1))-69,r=n<0?f*d(2,-n,1):f/d(2,n,1),r*=4503599627370496,(n=52-n)>0){for(h(0,r),e=a;e>=7;)h(1e7,0),e-=7;for(h(d(10,e,1),0),e=n-1;e>=23;)v(1<<23),e-=23;v(1<<e),h(1,1),v(2),b=p()}else h(0,r),h(1<<-n,0),b=p()+u.call(l,a);return a>0?(c=b.length,b=g+(c<=a?"0."+u.call(l,a-c)+b:b.slice(0,c-a)+"."+b.slice(c-a))):b=g+b,b}})},function(t,n,r){"use strict";var e=r(1),i=r(4),o=r(159),u=1..toPrecision;e(e.P+e.F*(i(function(){return"1"!==u.call(1,void 0)})||!i(function(){u.call({})})),"Number",{toPrecision:function(t){var n=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?u.call(n):u.call(n,t)}})},function(t,n,r){var e=r(1);e(e.S+e.F,"Object",{assign:r(172)})},function(t,n,r){var e=r(1);e(e.S,"Object",{create:r(70)})},function(t,n,r){var e=r(1);e(e.S+e.F*!r(10),"Object",{defineProperties:r(173)})},function(t,n,r){var e=r(1);e(e.S+e.F*!r(10),"Object",{defineProperty:r(11).f})},function(t,n,r){var e=r(6),i=r(65).onFreeze;r(49)("freeze",function(t){return function(n){return t&&e(n)?t(i(n)):n}})},function(t,n,r){var e=r(30),i=r(31).f;r(49)("getOwnPropertyDescriptor",function(){return function(t,n){return i(e(t),n)}})},function(t,n,r){r(49)("getOwnPropertyNames",function(){return r(174).f})},function(t,n,r){var e=r(17),i=r(32);r(49)("getPrototypeOf",function(){return function(t){return i(e(t))}})},function(t,n,r){var e=r(6);r(49)("isExtensible",function(t){return function(n){return!!e(n)&&(!t||t(n))}})},function(t,n,r){var e=r(6);r(49)("isFrozen",function(t){return function(n){return!e(n)||!!t&&t(n)}})},function(t,n,r){var e=r(6);r(49)("isSealed",function(t){return function(n){return!e(n)||!!t&&t(n)}})},function(t,n,r){var e=r(1);e(e.S,"Object",{is:r(180)})},function(t,n,r){var e=r(17),i=r(72);r(49)("keys",function(){return function(t){return i(e(t))}})},function(t,n,r){var e=r(6),i=r(65).onFreeze;r(49)("preventExtensions",function(t){return function(n){return t&&e(n)?t(i(n)):n}})},function(t,n,r){var e=r(6),i=r(65).onFreeze;r(49)("seal",function(t){return function(n){return t&&e(n)?t(i(n)):n}})},function(t,n,r){var e=r(1);e(e.S,"Object",{setPrototypeOf:r(144).set})},function(t,n,r){"use strict";var e=r(114),i={};i[r(7)("toStringTag")]="z",i+""!="[object z]"&&r(28)(Object.prototype,"toString",function(){return"[object "+e(this)+"]"},!0)},function(t,n,r){var e=r(1),i=r(178);e(e.G+e.F*(parseFloat!=i),{parseFloat:i})},function(t,n,r){var e=r(1),i=r(179);e(e.G+e.F*(parseInt!=i),{parseInt:i})},function(t,n,r){"use strict";var e,i,o,u=r(69),c=r(3),f=r(53),a=r(114),s=r(1),l=r(6),h=r(26),v=r(68),p=r(79),d=r(146),y=r(151).set,g=r(143)(),b="Promise",m=c.TypeError,x=c.process,w=c[b],x=c.process,S="process"==a(x),_=function(){},O=!!function(){try{var t=w.resolve(1),n=(t.constructor={})[r(7)("species")]=function(t){t(_,_)};return(S||"function"==typeof PromiseRejectionEvent)&&t.then(_)instanceof n}catch(t){}}(),E=function(t,n){return t===n||t===w&&n===o},P=function(t){var n;return!(!l(t)||"function"!=typeof(n=t.then))&&n},j=function(t){return E(w,t)?new F(t):new i(t)},F=i=function(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw m("Bad Promise constructor");n=t,r=e}),this.resolve=h(n),this.reject=h(r)},M=function(t){try{t()}catch(t){return{error:t}}},A=function(t,n){if(!t._n){t._n=!0;var r=t._c;g(function(){for(var e=t._v,i=1==t._s,o=0;r.length>o;)!function(n){var r,o,u=i?n.ok:n.fail,c=n.resolve,f=n.reject,a=n.domain;try{u?(i||(2==t._h&&I(t),t._h=1),!0===u?r=e:(a&&a.enter(),r=u(e),a&&a.exit()),r===n.promise?f(m("Promise-chain cycle")):(o=P(r))?o.call(r,c,f):c(r)):f(e)}catch(t){f(t)}}(r[o++]);t._c=[],t._n=!1,n&&!t._h&&N(t)})}},N=function(t){y.call(c,function(){var n,r,e,i=t._v;if(T(t)&&(n=M(function(){S?x.emit("unhandledRejection",i,t):(r=c.onunhandledrejection)?r({promise:t,reason:i}):(e=c.console)&&e.error&&e.error("Unhandled promise rejection",i)}),t._h=S||T(t)?2:1),t._a=void 0,n)throw n.error})},T=function(t){if(1==t._h)return!1;for(var n,r=t._a||t._c,e=0;r.length>e;)if(n=r[e++],n.fail||!T(n.promise))return!1;return!0},I=function(t){y.call(c,function(){var n;S?x.emit("rejectionHandled",t):(n=c.onrejectionhandled)&&n({promise:t,reason:t._v})})},k=function(t){var n=this;n._d||(n._d=!0,n=n._w||n,n._v=t,n._s=2,n._a||(n._a=n._c.slice()),A(n,!0))},L=function(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw m("Promise can't be resolved itself");(n=P(t))?g(function(){var e={_w:r,_d:!1};try{n.call(t,f(L,e,1),f(k,e,1))}catch(t){k.call(e,t)}}):(r._v=t,r._s=1,A(r,!1))}catch(t){k.call({_w:r,_d:!1},t)}}};O||(w=function(t){v(this,w,b,"_h"),h(t),e.call(this);try{t(f(L,this,1),f(k,this,1))}catch(t){k.call(this,t)}},e=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},e.prototype=r(73)(w.prototype,{then:function(t,n){var r=j(d(this,w));return r.ok="function"!=typeof t||t,r.fail="function"==typeof n&&n,r.domain=S?x.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&A(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),F=function(){var t=new e;this.promise=t,this.resolve=f(L,t,1),this.reject=f(k,t,1)}),s(s.G+s.W+s.F*!O,{Promise:w}),r(81)(w,b),r(74)(b),o=r(52)[b],s(s.S+s.F*!O,b,{reject:function(t){var n=j(this);return(0,n.reject)(t),n.promise}}),s(s.S+s.F*(u||!O),b,{resolve:function(t){if(t instanceof w&&E(t.constructor,this))return t;var n=j(this);return(0,n.resolve)(t),n.promise}}),s(s.S+s.F*!(O&&r(123)(function(t){w.all(t).catch(_)})),b,{all:function(t){var n=this,r=j(n),e=r.resolve,i=r.reject,o=M(function(){var r=[],o=0,u=1;p(t,!1,function(t){var c=o++,f=!1;r.push(void 0),u++,n.resolve(t).then(function(t){f||(f=!0,r[c]=t,--u||e(r))},i)}),--u||e(r)});return o&&i(o.error),r.promise},race:function(t){var n=this,r=j(n),e=r.reject,i=M(function(){p(t,!1,function(t){n.resolve(t).then(r.resolve,e)})});return i&&e(i.error),r.promise}})},function(t,n,r){var e=r(1),i=r(26),o=r(2),u=(r(3).Reflect||{}).apply,c=Function.apply;e(e.S+e.F*!r(4)(function(){u(function(){})}),"Reflect",{apply:function(t,n,r){var e=i(t),f=o(r);return u?u(e,n,f):c.call(e,n,f)}})},function(t,n,r){var e=r(1),i=r(70),o=r(26),u=r(2),c=r(6),f=r(4),a=r(163),s=(r(3).Reflect||{}).construct,l=f(function(){function t(){}return!(s(function(){},[],t)instanceof t)}),h=!f(function(){s(function(){})});e(e.S+e.F*(l||h),"Reflect",{construct:function(t,n){o(t),u(n);var r=arguments.length<3?t:o(arguments[2]);if(h&&!l)return s(t,n,r);if(t==r){switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3])}var e=[null];return e.push.apply(e,n),new(a.apply(t,e))}var f=r.prototype,v=i(c(f)?f:Object.prototype),p=Function.apply.call(t,v,n);return c(p)?p:v}})},function(t,n,r){var e=r(11),i=r(1),o=r(2),u=r(50);i(i.S+i.F*r(4)(function(){Reflect.defineProperty(e.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,n,r){o(t),n=u(n,!0),o(r);try{return e.f(t,n,r),!0}catch(t){return!1}}})},function(t,n,r){var e=r(1),i=r(31).f,o=r(2);e(e.S,"Reflect",{deleteProperty:function(t,n){var r=i(o(t),n);return!(r&&!r.configurable)&&delete t[n]}})},function(t,n,r){"use strict";var e=r(1),i=r(2),o=function(t){this._t=i(t),this._i=0;var n,r=this._k=[];for(n in t)r.push(n)};r(139)(o,"Object",function(){var t,n=this,r=n._k;do{if(n._i>=r.length)return{value:void 0,done:!0}}while(!((t=r[n._i++])in n._t));return{value:t,done:!1}}),e(e.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,n,r){var e=r(31),i=r(1),o=r(2);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,n){return e.f(o(t),n)}})},function(t,n,r){var e=r(1),i=r(32),o=r(2);e(e.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},function(t,n,r){function e(t,n){var r,c,s=arguments.length<3?t:arguments[2];return a(t)===s?t[n]:(r=i.f(t,n))?u(r,"value")?r.value:void 0!==r.get?r.get.call(s):void 0:f(c=o(t))?e(c,n,s):void 0}var i=r(31),o=r(32),u=r(24),c=r(1),f=r(6),a=r(2);c(c.S,"Reflect",{get:e})},function(t,n,r){var e=r(1);e(e.S,"Reflect",{has:function(t,n){return n in t}})},function(t,n,r){var e=r(1),i=r(2),o=Object.isExtensible;e(e.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,n,r){var e=r(1);e(e.S,"Reflect",{ownKeys:r(177)})},function(t,n,r){var e=r(1),i=r(2),o=Object.preventExtensions;e(e.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,n,r){var e=r(1),i=r(144);i&&e(e.S,"Reflect",{setPrototypeOf:function(t,n){i.check(t,n);try{return i.set(t,n),!0}catch(t){return!1}}})},function(t,n,r){function e(t,n,r){var f,h,v=arguments.length<4?t:arguments[3],p=o.f(s(t),n);if(!p){if(l(h=u(t)))return e(h,n,r,v);p=a(0)}return c(p,"value")?!(!1===p.writable||!l(v)||(f=o.f(v,n)||a(0),f.value=r,i.f(v,n,f),0)):void 0!==p.set&&(p.set.call(v,r),!0)}var i=r(11),o=r(31),u=r(32),c=r(24),f=r(1),a=r(66),s=r(2),l=r(6);f(f.S,"Reflect",{set:e})},function(t,n,r){var e=r(3),i=r(136),o=r(11).f,u=r(71).f,c=r(122),f=r(120),a=e.RegExp,s=a,l=a.prototype,h=/a/g,v=/a/g,p=new a(h)!==h;if(r(10)&&(!p||r(4)(function(){return v[r(7)("match")]=!1,a(h)!=h||a(v)==v||"/a/i"!=a(h,"i")}))){a=function(t,n){var r=this instanceof a,e=c(t),o=void 0===n;return!r&&e&&t.constructor===a&&o?t:i(p?new s(e&&!o?t.source:t,n):s((e=t instanceof a)?t.source:t,e&&o?f.call(t):n),r?this:l,a)};for(var d=u(s),y=0;d.length>y;)!function(t){t in a||o(a,t,{configurable:!0,get:function(){return s[t]},set:function(n){s[t]=n}})}(d[y++]);l.constructor=a,a.prototype=l,r(28)(e,"RegExp",a)}r(74)("RegExp")},function(t,n,r){r(119)("match",1,function(t,n,r){return[function(r){"use strict";var e=t(this),i=void 0==r?void 0:r[n];return void 0!==i?i.call(r,e):new RegExp(r)[n](String(e))},r]})},function(t,n,r){r(119)("replace",2,function(t,n,r){return[function(e,i){"use strict";var o=t(this),u=void 0==e?void 0:e[n];return void 0!==u?u.call(e,o,i):r.call(String(o),e,i)},r]})},function(t,n,r){r(119)("search",1,function(t,n,r){return[function(r){"use strict";var e=t(this),i=void 0==r?void 0:r[n];return void 0!==i?i.call(r,e):new RegExp(r)[n](String(e))},r]})},function(t,n,r){r(119)("split",2,function(t,n,e){"use strict";var i=r(122),o=e,u=[].push,c="split",f="length",a="lastIndex";if("c"=="abbc"[c](/(b)*/)[1]||4!="test"[c](/(?:)/,-1)[f]||2!="ab"[c](/(?:ab)*/)[f]||4!="."[c](/(.?)(.?)/)[f]||"."[c](/()()/)[f]>1||""[c](/.?/)[f]){var s=void 0===/()??/.exec("")[1];e=function(t,n){var r=String(this);if(void 0===t&&0===n)return[];if(!i(t))return o.call(r,t,n);var e,c,l,h,v,p=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),y=0,g=void 0===n?4294967295:n>>>0,b=new RegExp(t.source,d+"g");for(s||(e=new RegExp("^"+b.source+"$(?!\\s)",d));(c=b.exec(r))&&!((l=c.index+c[0][f])>y&&(p.push(r.slice(y,c.index)),!s&&c[f]>1&&c[0].replace(e,function(){for(v=1;v<arguments[f]-2;v++)void 0===arguments[v]&&(c[v]=void 0)}),c[f]>1&&c.index<r[f]&&u.apply(p,c.slice(1)),h=c[0][f],y=l,p[f]>=g));)b[a]===c.index&&b[a]++;return y===r[f]?!h&&b.test("")||p.push(""):p.push(r.slice(y)),p[f]>g?p.slice(0,g):p}}else"0"[c](void 0,0)[f]&&(e=function(t,n){return void 0===t&&0===n?[]:o.call(this,t,n)});return[function(r,i){var o=t(this),u=void 0==r?void 0:r[n];return void 0!==u?u.call(r,o,i):e.call(String(o),r,i)},e]})},function(t,n,r){"use strict";r(184);var e=r(2),i=r(120),o=r(10),u="toString",c=/./[u],f=function(t){r(28)(RegExp.prototype,u,t,!0)};r(4)(function(){return"/a/b"!=c.call({source:"a",flags:"b"})})?f(function(){var t=e(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):c.name!=u&&f(function(){return c.call(this)})},function(t,n,r){"use strict";r(29)("anchor",function(t){return function(n){return t(this,"a","name",n)}})},function(t,n,r){"use strict";r(29)("big",function(t){return function(){return t(this,"big","","")}})},function(t,n,r){"use strict";r(29)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,n,r){"use strict";r(29)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,n,r){"use strict";var e=r(1),i=r(147)(!1);e(e.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,n,r){"use strict";var e=r(1),i=r(16),o=r(148),u="endsWith",c=""[u];e(e.P+e.F*r(134)(u),"String",{endsWith:function(t){var n=o(this,t,u),r=arguments.length>1?arguments[1]:void 0,e=i(n.length),f=void 0===r?e:Math.min(i(r),e),a=String(t);return c?c.call(n,a,f):n.slice(f-a.length,f)===a}})},function(t,n,r){"use strict";r(29)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,n,r){"use strict";r(29)("fontcolor",function(t){return function(n){return t(this,"font","color",n)}})},function(t,n,r){"use strict";r(29)("fontsize",function(t){return function(n){return t(this,"font","size",n)}})},function(t,n,r){var e=r(1),i=r(75),o=String.fromCharCode,u=String.fromCodePoint;e(e.S+e.F*(!!u&&1!=u.length),"String",{fromCodePoint:function(t){for(var n,r=[],e=arguments.length,u=0;e>u;){if(n=+arguments[u++],i(n,1114111)!==n)throw RangeError(n+" is not a valid code point");r.push(n<65536?o(n):o(55296+((n-=65536)>>10),n%1024+56320))}return r.join("")}})},function(t,n,r){"use strict";var e=r(1),i=r(148),o="includes";e(e.P+e.F*r(134)(o),"String",{includes:function(t){return!!~i(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,n,r){"use strict";r(29)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,n,r){"use strict";var e=r(147)(!0);r(140)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,r=this._i;return r>=n.length?{value:void 0,done:!0}:(t=e(n,r),this._i+=t.length,{value:t,done:!1})})},function(t,n,r){"use strict";r(29)("link",function(t){return function(n){return t(this,"a","href",n)}})},function(t,n,r){var e=r(1),i=r(30),o=r(16);e(e.S,"String",{raw:function(t){for(var n=i(t.raw),r=o(n.length),e=arguments.length,u=[],c=0;r>c;)u.push(String(n[c++])),c<e&&u.push(String(arguments[c]));return u.join("")}})},function(t,n,r){var e=r(1);e(e.P,"String",{repeat:r(149)})},function(t,n,r){"use strict";r(29)("small",function(t){return function(){return t(this,"small","","")}})},function(t,n,r){"use strict";var e=r(1),i=r(16),o=r(148),u="startsWith",c=""[u];e(e.P+e.F*r(134)(u),"String",{startsWith:function(t){var n=o(this,t,u),r=i(Math.min(arguments.length>1?arguments[1]:void 0,n.length)),e=String(t);return c?c.call(n,e,r):n.slice(r,r+e.length)===e}})},function(t,n,r){"use strict";r(29)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,n,r){"use strict";r(29)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,n,r){"use strict";r(29)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,n,r){"use strict";r(82)("trim",function(t){return function(){return t(this,3)}})},function(t,n,r){"use strict";var e=r(3),i=r(24),o=r(10),u=r(1),c=r(28),f=r(65).KEY,a=r(4),s=r(126),l=r(81),h=r(76),v=r(7),p=r(182),d=r(153),y=r(206),g=r(205),b=r(138),m=r(2),x=r(30),w=r(50),S=r(66),_=r(70),O=r(174),E=r(31),P=r(11),j=r(72),F=E.f,M=P.f,A=O.f,N=e.Symbol,T=e.JSON,I=T&&T.stringify,k="prototype",L=v("_hidden"),R=v("toPrimitive"),C={}.propertyIsEnumerable,D=s("symbol-registry"),U=s("symbols"),W=s("op-symbols"),G=Object[k],B="function"==typeof N,V=e.QObject,z=!V||!V[k]||!V[k].findChild,q=o&&a(function(){return 7!=_(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a})?function(t,n,r){var e=F(G,n);e&&delete G[n],M(t,n,r),e&&t!==G&&M(G,n,e)}:M,K=function(t){var n=U[t]=_(N[k]);return n._k=t,n},J=B&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},Y=function(t,n,r){return t===G&&Y(W,n,r),m(t),n=w(n,!0),m(r),i(U,n)?(r.enumerable?(i(t,L)&&t[L][n]&&(t[L][n]=!1),r=_(r,{enumerable:S(0,!1)})):(i(t,L)||M(t,L,S(1,{})),t[L][n]=!0),q(t,n,r)):M(t,n,r)},H=function(t,n){m(t);for(var r,e=g(n=x(n)),i=0,o=e.length;o>i;)Y(t,r=e[i++],n[r]);return t},$=function(t,n){return void 0===n?_(t):H(_(t),n)},X=function(t){var n=C.call(this,t=w(t,!0));return!(this===G&&i(U,t)&&!i(W,t))&&(!(n||!i(this,t)||!i(U,t)||i(this,L)&&this[L][t])||n)},Q=function(t,n){if(t=x(t),n=w(n,!0),t!==G||!i(U,n)||i(W,n)){var r=F(t,n);return!r||!i(U,n)||i(t,L)&&t[L][n]||(r.enumerable=!0),r}},Z=function(t){for(var n,r=A(x(t)),e=[],o=0;r.length>o;)i(U,n=r[o++])||n==L||n==f||e.push(n);return e},tt=function(t){for(var n,r=t===G,e=A(r?W:x(t)),o=[],u=0;e.length>u;)!i(U,n=e[u++])||r&&!i(G,n)||o.push(U[n]);return o};B||(N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),n=function(r){this===G&&n.call(W,r),i(this,L)&&i(this[L],t)&&(this[L][t]=!1),q(this,t,S(1,r))};return o&&z&&q(G,t,{configurable:!0,set:n}),K(t)},c(N[k],"toString",function(){return this._k}),E.f=Q,P.f=Y,r(71).f=O.f=Z,r(116).f=X,r(125).f=tt,o&&!r(69)&&c(G,"propertyIsEnumerable",X,!0),p.f=function(t){return K(v(t))}),u(u.G+u.W+u.F*!B,{Symbol:N});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;nt.length>rt;)v(nt[rt++]);for(var nt=j(v.store),rt=0;nt.length>rt;)d(nt[rt++]);u(u.S+u.F*!B,"Symbol",{for:function(t){return i(D,t+="")?D[t]:D[t]=N(t)},keyFor:function(t){if(J(t))return y(D,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){z=!0},useSimple:function(){z=!1}}),u(u.S+u.F*!B,"Object",{create:$,defineProperty:Y,defineProperties:H,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),T&&u(u.S+u.F*(!B||a(function(){var t=N();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!J(t)){for(var n,r,e=[t],i=1;arguments.length>i;)e.push(arguments[i++]);return n=e[1],"function"==typeof n&&(r=n),!r&&b(n)||(n=function(t,n){if(r&&(n=r.call(this,t,n)),!J(n))return n}),e[1]=n,I.apply(T,e)}}}),N[k][R]||r(27)(N[k],R,N[k].valueOf),l(N,"Symbol"),l(Math,"Math",!0),l(e.JSON,"JSON",!0)},function(t,n,r){"use strict";var e=r(1),i=r(127),o=r(152),u=r(2),c=r(75),f=r(16),a=r(6),s=r(3).ArrayBuffer,l=r(146),h=o.ArrayBuffer,v=o.DataView,p=i.ABV&&s.isView,d=h.prototype.slice,y=i.VIEW,g="ArrayBuffer";e(e.G+e.W+e.F*(s!==h),{ArrayBuffer:h}),e(e.S+e.F*!i.CONSTR,g,{isView:function(t){return p&&p(t)||a(t)&&y in t}}),e(e.P+e.U+e.F*r(4)(function(){return!new h(2).slice(1,void 0).byteLength}),g,{slice:function(t,n){if(void 0!==d&&void 0===n)return d.call(u(this),t);for(var r=u(this).byteLength,e=c(t,r),i=c(void 0===n?r:n,r),o=new(l(this,h))(f(i-e)),a=new v(this),s=new v(o),p=0;e<i;)s.setUint8(p++,a.getUint8(e++));return o}}),r(74)(g)},function(t,n,r){var e=r(1);e(e.G+e.W+e.F*!r(127).ABV,{DataView:r(152).DataView})},function(t,n,r){r(55)("Float32",4,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Float64",8,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Int16",2,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Int32",4,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Int8",1,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Uint16",2,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Uint32",4,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Uint8",1,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Uint8",1,function(t){return function(n,r,e){return t(this,n,r,e)}},!0)},function(t,n,r){"use strict";var e=r(166);r(118)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return e.def(this,t,!0)}},e,!1,!0)},function(t,n,r){"use strict";var e=r(1),i=r(117)(!0);e(e.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(78)("includes")},function(t,n,r){var e=r(1),i=r(143)(),o=r(3).process,u="process"==r(45)(o);e(e.G,{asap:function(t){var n=u&&o.domain;i(n?n.bind(t):t)}})},function(t,n,r){var e=r(1),i=r(45);e(e.S,"Error",{isError:function(t){return"Error"===i(t)}})},function(t,n,r){var e=r(1);e(e.P+e.R,"Map",{toJSON:r(165)("Map")})},function(t,n,r){var e=r(1);e(e.S,"Math",{iaddh:function(t,n,r,e){var i=t>>>0,o=n>>>0,u=r>>>0;return o+(e>>>0)+((i&u|(i|u)&~(i+u>>>0))>>>31)|0}})},function(t,n,r){var e=r(1);e(e.S,"Math",{imulh:function(t,n){var r=65535,e=+t,i=+n,o=e&r,u=i&r,c=e>>16,f=i>>16,a=(c*u>>>0)+(o*u>>>16);return c*f+(a>>16)+((o*f>>>0)+(a&r)>>16)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{isubh:function(t,n,r,e){var i=t>>>0,o=n>>>0,u=r>>>0;return o-(e>>>0)-((~i&u|~(i^u)&i-u>>>0)>>>31)|0}})},function(t,n,r){var e=r(1);e(e.S,"Math",{umulh:function(t,n){var r=65535,e=+t,i=+n,o=e&r,u=i&r,c=e>>>16,f=i>>>16,a=(c*u>>>0)+(o*u>>>16);return c*f+(a>>>16)+((o*f>>>0)+(a&r)>>>16)}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(26),u=r(11);r(10)&&e(e.P+r(124),"Object",{__defineGetter__:function(t,n){u.f(i(this),t,{get:o(n),enumerable:!0,configurable:!0})}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(26),u=r(11);r(10)&&e(e.P+r(124),"Object",{__defineSetter__:function(t,n){u.f(i(this),t,{set:o(n),enumerable:!0,configurable:!0})}})},function(t,n,r){var e=r(1),i=r(176)(!0);e(e.S,"Object",{entries:function(t){return i(t)}})},function(t,n,r){var e=r(1),i=r(177),o=r(30),u=r(31),c=r(131);e(e.S,"Object",{getOwnPropertyDescriptors:function(t){for(var n,r=o(t),e=u.f,f=i(r),a={},s=0;f.length>s;)c(a,n=f[s++],e(r,n));return a}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(50),u=r(32),c=r(31).f;r(10)&&e(e.P+r(124),"Object",{__lookupGetter__:function(t){var n,r=i(this),e=o(t,!0);do{if(n=c(r,e))return n.get}while(r=u(r))}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(50),u=r(32),c=r(31).f;r(10)&&e(e.P+r(124),"Object",{__lookupSetter__:function(t){var n,r=i(this),e=o(t,!0);do{if(n=c(r,e))return n.set}while(r=u(r))}})},function(t,n,r){var e=r(1),i=r(176)(!1);e(e.S,"Object",{values:function(t){return i(t)}})},function(t,n,r){"use strict";var e=r(1),i=r(3),o=r(52),u=r(143)(),c=r(7)("observable"),f=r(26),a=r(2),s=r(68),l=r(73),h=r(27),v=r(79),p=v.RETURN,d=function(t){return null==t?void 0:f(t)},y=function(t){var n=t._c;n&&(t._c=void 0,n())},g=function(t){return void 0===t._o},b=function(t){g(t)||(t._o=void 0,y(t))},m=function(t,n){a(t),this._c=void 0,this._o=t,t=new x(this);try{var r=n(t),e=r;null!=r&&("function"==typeof r.unsubscribe?r=function(){e.unsubscribe()}:f(r),this._c=r)}catch(n){return void t.error(n)}g(this)&&y(this)};m.prototype=l({},{unsubscribe:function(){b(this)}});var x=function(t){this._s=t};x.prototype=l({},{next:function(t){var n=this._s;if(!g(n)){var r=n._o;try{var e=d(r.next);if(e)return e.call(r,t)}catch(t){try{b(n)}finally{throw t}}}},error:function(t){var n=this._s;if(g(n))throw t;var r=n._o;n._o=void 0;try{var e=d(r.error);if(!e)throw t;t=e.call(r,t)}catch(t){try{y(n)}finally{throw t}}return y(n),t},complete:function(t){var n=this._s;if(!g(n)){var r=n._o;n._o=void 0;try{var e=d(r.complete);t=e?e.call(r,t):void 0}catch(t){try{y(n)}finally{throw t}}return y(n),t}}});var w=function(t){s(this,w,"Observable","_f")._f=f(t)};l(w.prototype,{subscribe:function(t){return new m(t,this._f)},forEach:function(t){var n=this;return new(o.Promise||i.Promise)(function(r,e){f(t);var i=n.subscribe({next:function(n){try{return t(n)}catch(t){e(t),i.unsubscribe()}},error:e,complete:r})})}}),l(w,{from:function(t){var n="function"==typeof this?this:w,r=d(a(t)[c]);if(r){var e=a(r.call(t));return e.constructor===n?e:new n(function(t){return e.subscribe(t)})}return new n(function(n){var r=!1;return u(function(){if(!r){try{if(v(t,!1,function(t){if(n.next(t),r)return p})===p)return}catch(t){if(r)throw t;return void n.error(t)}n.complete()}}),function(){r=!0}})},of:function(){for(var t=0,n=arguments.length,r=Array(n);t<n;)r[t]=arguments[t++];return new("function"==typeof this?this:w)(function(t){var n=!1;return u(function(){if(!n){for(var e=0;e<r.length;++e)if(t.next(r[e]),n)return;t.complete()}}),function(){n=!0}})}}),h(w.prototype,c,function(){return this}),e(e.G,{Observable:w}),r(74)("Observable")},function(t,n,r){var e=r(54),i=r(2),o=e.key,u=e.set;e.exp({defineMetadata:function(t,n,r,e){u(t,n,i(r),o(e))}})},function(t,n,r){var e=r(54),i=r(2),o=e.key,u=e.map,c=e.store;e.exp({deleteMetadata:function(t,n){var r=arguments.length<3?void 0:o(arguments[2]),e=u(i(n),r,!1);if(void 0===e||!e.delete(t))return!1;if(e.size)return!0;var f=c.get(n);return f.delete(r),!!f.size||c.delete(n)}})},function(t,n,r){var e=r(185),i=r(161),o=r(54),u=r(2),c=r(32),f=o.keys,a=o.key,s=function(t,n){var r=f(t,n),o=c(t);if(null===o)return r;var u=s(o,n);return u.length?r.length?i(new e(r.concat(u))):u:r};o.exp({getMetadataKeys:function(t){return s(u(t),arguments.length<2?void 0:a(arguments[1]))}})},function(t,n,r){var e=r(54),i=r(2),o=r(32),u=e.has,c=e.get,f=e.key,a=function(t,n,r){if(u(t,n,r))return c(t,n,r);var e=o(n);return null!==e?a(t,e,r):void 0};e.exp({getMetadata:function(t,n){return a(t,i(n),arguments.length<3?void 0:f(arguments[2]))}})},function(t,n,r){var e=r(54),i=r(2),o=e.keys,u=e.key;e.exp({getOwnMetadataKeys:function(t){
return o(i(t),arguments.length<2?void 0:u(arguments[1]))}})},function(t,n,r){var e=r(54),i=r(2),o=e.get,u=e.key;e.exp({getOwnMetadata:function(t,n){return o(t,i(n),arguments.length<3?void 0:u(arguments[2]))}})},function(t,n,r){var e=r(54),i=r(2),o=r(32),u=e.has,c=e.key,f=function(t,n,r){if(u(t,n,r))return!0;var e=o(n);return null!==e&&f(t,e,r)};e.exp({hasMetadata:function(t,n){return f(t,i(n),arguments.length<3?void 0:c(arguments[2]))}})},function(t,n,r){var e=r(54),i=r(2),o=e.has,u=e.key;e.exp({hasOwnMetadata:function(t,n){return o(t,i(n),arguments.length<3?void 0:u(arguments[2]))}})},function(t,n,r){var e=r(54),i=r(2),o=r(26),u=e.key,c=e.set;e.exp({metadata:function(t,n){return function(r,e){c(t,n,(void 0!==e?i:o)(r),u(e))}}})},function(t,n,r){var e=r(1);e(e.P+e.R,"Set",{toJSON:r(165)("Set")})},function(t,n,r){"use strict";var e=r(1),i=r(147)(!0);e(e.P,"String",{at:function(t){return i(this,t)}})},function(t,n,r){"use strict";var e=r(1),i=r(46),o=r(16),u=r(122),c=r(120),f=RegExp.prototype,a=function(t,n){this._r=t,this._s=n};r(139)(a,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),e(e.P,"String",{matchAll:function(t){if(i(this),!u(t))throw TypeError(t+" is not a regexp!");var n=String(this),r="flags"in f?String(t.flags):c.call(t),e=new RegExp(t.source,~r.indexOf("g")?r:"g"+r);return e.lastIndex=o(t.lastIndex),new a(e,n)}})},function(t,n,r){"use strict";var e=r(1),i=r(181);e(e.P,"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,n,r){"use strict";var e=r(1),i=r(181);e(e.P,"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,n,r){"use strict";r(82)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,n,r){"use strict";r(82)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,n,r){r(153)("asyncIterator")},function(t,n,r){r(153)("observable")},function(t,n,r){var e=r(1);e(e.S,"System",{global:r(3)})},function(t,n,r){for(var e=r(155),i=r(28),o=r(3),u=r(27),c=r(80),f=r(7),a=f("iterator"),s=f("toStringTag"),l=c.Array,h=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],v=0;v<5;v++){var p,d=h[v],y=o[d],g=y&&y.prototype;if(g){g[a]||u(g,a,l),g[s]||u(g,s,d),c[d]=l;for(p in e)g[p]||i(g,p,e[p],!0)}}},function(t,n,r){var e=r(1),i=r(151);e(e.G+e.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,n,r){var e=r(3),i=r(1),o=r(121),u=r(207),c=e.navigator,f=!!c&&/MSIE .\./.test(c.userAgent),a=function(t){return f?function(n,r){return t(o(u,[].slice.call(arguments,2),"function"==typeof n?n:Function(n)),r)}:t};i(i.G+i.B+i.F*f,{setTimeout:a(e.setTimeout),setInterval:a(e.setInterval)})},function(t,n,r){r(330),r(269),r(271),r(270),r(273),r(275),r(280),r(274),r(272),r(282),r(281),r(277),r(278),r(276),r(268),r(279),r(283),r(284),r(236),r(238),r(237),r(286),r(285),r(256),r(266),r(267),r(257),r(258),r(259),r(260),r(261),r(262),r(263),r(264),r(265),r(239),r(240),r(241),r(242),r(243),r(244),r(245),r(246),r(247),r(248),r(249),r(250),r(251),r(252),r(253),r(254),r(255),r(317),r(322),r(329),r(320),r(312),r(313),r(318),r(323),r(325),r(308),r(309),r(310),r(311),r(314),r(315),r(316),r(319),r(321),r(324),r(326),r(327),r(328),r(231),r(233),r(232),r(235),r(234),r(220),r(218),r(224),r(221),r(227),r(229),r(217),r(223),r(214),r(228),r(212),r(226),r(225),r(219),r(222),r(211),r(213),r(216),r(215),r(230),r(155),r(302),r(307),r(184),r(303),r(304),r(305),r(306),r(287),r(183),r(185),r(186),r(342),r(331),r(332),r(337),r(340),r(341),r(335),r(338),r(336),r(339),r(333),r(334),r(288),r(289),r(290),r(291),r(292),r(295),r(293),r(294),r(296),r(297),r(298),r(299),r(301),r(300),r(343),r(369),r(372),r(371),r(373),r(374),r(370),r(375),r(376),r(354),r(357),r(353),r(351),r(352),r(355),r(356),r(346),r(368),r(377),r(345),r(347),r(349),r(348),r(350),r(359),r(360),r(362),r(361),r(364),r(363),r(365),r(366),r(367),r(344),r(358),r(380),r(379),r(378),t.exports=r(52)},function(t,n){function r(t,n){if("string"==typeof n)return t.insertAdjacentHTML("afterend",n);var r=t.nextSibling;return r?t.parentNode.insertBefore(n,r):t.parentNode.appendChild(n)}t.exports=r},,,,,,,,,function(t,n,r){(function(n,r){!function(n){"use strict";function e(t,n,r,e){var i=n&&n.prototype instanceof o?n:o,u=Object.create(i.prototype),c=new p(e||[]);return u._invoke=s(t,r,c),u}function i(t,n,r){try{return{type:"normal",arg:t.call(n,r)}}catch(t){return{type:"throw",arg:t}}}function o(){}function u(){}function c(){}function f(t){["next","throw","return"].forEach(function(n){t[n]=function(t){return this._invoke(n,t)}})}function a(t){function n(r,e,o,u){var c=i(t[r],t,e);if("throw"!==c.type){var f=c.arg,a=f.value;return a&&"object"==typeof a&&m.call(a,"__await")?Promise.resolve(a.__await).then(function(t){n("next",t,o,u)},function(t){n("throw",t,o,u)}):Promise.resolve(a).then(function(t){f.value=t,o(f)},u)}u(c.arg)}function e(t,r){function e(){return new Promise(function(e,i){n(t,r,e,i)})}return o=o?o.then(e,e):e()}"object"==typeof r&&r.domain&&(n=r.domain.bind(n));var o;this._invoke=e}function s(t,n,r){var e=P;return function(o,u){if(e===F)throw new Error("Generator is already running");if(e===M){if("throw"===o)throw u;return y()}for(r.method=o,r.arg=u;;){var c=r.delegate;if(c){var f=l(c,r);if(f){if(f===A)continue;return f}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(e===P)throw e=M,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);e=F;var a=i(t,n,r);if("normal"===a.type){if(e=r.done?M:j,a.arg===A)continue;return{value:a.arg,done:r.done}}"throw"===a.type&&(e=M,r.method="throw",r.arg=a.arg)}}}function l(t,n){var r=t.iterator[n.method];if(r===g){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=g,l(t,n),"throw"===n.method))return A;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return A}var e=i(r,t.iterator,n.arg);if("throw"===e.type)return n.method="throw",n.arg=e.arg,n.delegate=null,A;var o=e.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=g),n.delegate=null,A):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,A)}function h(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function v(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(h,this),this.reset(!0)}function d(t){if(t){var n=t[w];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,e=function n(){for(;++r<t.length;)if(m.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=g,n.done=!0,n};return e.next=e}}return{next:y}}function y(){return{value:g,done:!0}}var g,b=Object.prototype,m=b.hasOwnProperty,x="function"==typeof Symbol?Symbol:{},w=x.iterator||"@@iterator",S=x.asyncIterator||"@@asyncIterator",_=x.toStringTag||"@@toStringTag",O="object"==typeof t,E=n.regeneratorRuntime;if(E)return void(O&&(t.exports=E));E=n.regeneratorRuntime=O?t.exports:{},E.wrap=e;var P="suspendedStart",j="suspendedYield",F="executing",M="completed",A={},N={};N[w]=function(){return this};var T=Object.getPrototypeOf,I=T&&T(T(d([])));I&&I!==b&&m.call(I,w)&&(N=I);var k=c.prototype=o.prototype=Object.create(N);u.prototype=k.constructor=c,c.constructor=u,c[_]=u.displayName="GeneratorFunction",E.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===u||"GeneratorFunction"===(n.displayName||n.name))},E.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,_ in t||(t[_]="GeneratorFunction")),t.prototype=Object.create(k),t},E.awrap=function(t){return{__await:t}},f(a.prototype),a.prototype[S]=function(){return this},E.AsyncIterator=a,E.async=function(t,n,r,i){var o=new a(e(t,n,r,i));return E.isGeneratorFunction(n)?o:o.next().then(function(t){return t.done?t.value:o.next()})},f(k),k[_]="Generator",k.toString=function(){return"[object Generator]"},E.keys=function(t){var n=[];for(var r in t)n.push(r);return n.reverse(),function r(){for(;n.length;){var e=n.pop();if(e in t)return r.value=e,r.done=!1,r}return r.done=!0,r}},E.values=d,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(v),!t)for(var n in this)"t"===n.charAt(0)&&m.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=g)},stop:function(){this.done=!0;var t=this.tryEntries[0],n=t.completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(t){function n(n,e){return o.type="throw",o.arg=t,r.next=n,e&&(r.method="next",r.arg=g),!!e}if(this.done)throw t;for(var r=this,e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=m.call(i,"catchLoc"),c=m.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc<=this.prev&&m.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var i=e;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=n&&n<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=n,i?(this.method="next",this.next=i.finallyLoc,A):this.complete(o)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),A},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),v(r),A}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var e=r.completion;if("throw"===e.type){var i=e.arg;v(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:d(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=g),A}}}("object"==typeof n?n:"object"==typeof window?window:"object"==typeof self?self:this)}).call(n,function(){return this}(),r(158))}])</script><script src="/./main.0cf68a.js"></script><script>!function(){!function(e){var t=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(t),t.setAttribute("src",e)}("/slider.e37972.js")}()</script>


<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


    
<div class="tools-col" q-class="show:isShow,hide:isShow|isFalse" q-on="click:stop(e)">
  <div class="tools-nav header-menu">
    
    
      
      
      
    
      
      
      
    
      
      
      
    
    

    <ul style="width: 70%">
    
    
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'innerArchive')"><a href="javascript:void(0)" q-class="active:innerArchive">所有文章</a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'friends')"><a href="javascript:void(0)" q-class="active:friends">友链</a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'aboutme')"><a href="javascript:void(0)" q-class="active:aboutme">关于我</a></li>
      
        
    </ul>
  </div>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all" q-show="innerArchive">
        <div class="search-wrap">
          <input class="search-ipt" q-model="search" type="text" placeholder="find something…">
          <i class="icon-search icon" q-show="search|isEmptyStr"></i>
          <i class="icon-close icon" q-show="search|isNotEmptyStr" q-on="click:clearChose(e)"></i>
        </div>
        <div class="widget tagcloud search-tag">
          <p class="search-tag-wording">tag:</p>
          <label class="search-switch">
            <input type="checkbox" q-on="click:toggleTag(e)" q-attr="checked:showTags">
          </label>
          <ul class="article-tag-list" q-show="showTags">
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">图像处理</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">深度学习</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">Git</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">NumPy</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">python</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">神经网络</a>
              </li>
            
            <div class="clearfix"></div>
          </ul>
        </div>
        <ul class="search-ul">
          <p q-show="jsonFail" style="padding: 20px; font-size: 12px;">
            缺失模块。<br/>1、请确保node版本大于6.2<br/>2、在博客根目录（注意不是yilia根目录）执行以下命令：<br/> npm i hexo-generator-json-content --save<br/><br/>
            3、在根目录_config.yml里添加配置：
<pre style="font-size: 12px;" q-show="jsonFail">
  jsonContent:
    meta: false
    pages: false
    posts:
      title: true
      date: true
      path: true
      text: false
      raw: false
      content: false
      slug: false
      updated: false
      comments: false
      link: false
      permalink: false
      excerpt: false
      categories: false
      tags: true
</pre>
          </p>
          <li class="search-li" q-repeat="items" q-show="isShow">
            <a q-attr="href:path|urlformat" class="search-title"><i class="icon-quo-left icon"></i><span q-text="title"></span></a>
            <p class="search-time">
              <i class="icon-calendar icon"></i>
              <span q-text="date|dateformat"></span>
            </p>
            <p class="search-tag">
              <i class="icon-price-tags icon"></i>
              <span q-repeat="tags" q-on="click:choseTag(e, name)" q-text="name|tagformat"></span>
            </p>
          </li>
        </ul>
    	</section>
    

    
    	<section class="tools-section tools-section-friends" q-show="friends">
  		
        <ul class="search-ul">
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接1</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接2</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接3</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接4</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接5</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接6</a>
            </li>
          
        </ul>
  		
    	</section>
    

    
    	<section class="tools-section tools-section-me" q-show="aboutme">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">热爱美食的小小码农</div>
  	  	
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<!--<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>

</body>
</html>